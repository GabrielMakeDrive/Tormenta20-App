/*! For license information please see main.937b7490.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),a=n(43),i=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(o(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),b=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var _=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var x=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case w:return"Profiler";case v:return"StrictMode";case E:return"Suspense";case A:return"SuspenseList";case _:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case b:return e.displayName||"Context";case C:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var O=Array.isArray,k=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},B=[],j=-1;function F(e){return{current:e}}function z(e){0>j||(e.current=B[j],B[j]=null,j--)}function U(e,t){j++,B[j]=e.current,e.current=t}var H,V,W=F(null),G=F(null),Y=F(null),X=F(null);function q(e,t){switch(U(Y,t),U(G,e),U(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(W),U(W,e)}function Q(){z(W),z(G),z(Y)}function Z(e){null!==e.memoizedState&&U(X,e);var t=W.current,n=vd(t,e.type);t!==n&&(U(G,e),U(W,n))}function K(e){G.current===e&&(z(W),z(G)),X.current===e&&(z(X),uh._currentValue=L)}function $(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||"",V=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+H+e+V}var J=!1;function ee(e,t){if(!e||J)return"";J=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),o=i[0],s=i[1];if(o&&s){var l=o.split("\n"),c=s.split("\n");for(a=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===l.length||a===c.length)for(r=l.length-1,a=c.length-1;1<=r&&0<=a&&l[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(l[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||l[r]!==c[a]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{J=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?$(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return $(e.type);case 16:return $("Lazy");case 13:return e.child!==t&&null!==t?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return $("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ae=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,oe=r.unstable_shouldYield,se=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function we(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var Ce=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(be(e)/Se|0)|0},be=Math.log,Se=Math.LN2;var Ee=256,Ae=262144,Ie=4194304;function Ne(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~i)?a=Ne(r):0!==(o&=s)?a=Ne(o):n||0!==(n=s&~e)&&(a=Ne(n)):0!==(s=r&~i)?a=Ne(s):0!==o?a=Ne(o):n||0!==(n=r&~e)&&(a=Ne(n)),0===a?0:0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:a}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function De(){var e=Ie;return 0===(62914560&(Ie<<=1))&&(Ie=4194304),e}function Me(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Oe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ce(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function ke(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ce(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Pe(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Le(n))&(e.suspendedLanes|t))?0:n}function Le(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Be(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function je(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:Nh(e.type)}function Fe(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var ze=Math.random().toString(36).slice(2),Ue="__reactFiber$"+ze,He="__reactProps$"+ze,Ve="__reactContainer$"+ze,We="__reactEvents$"+ze,Ge="__reactListeners$"+ze,Ye="__reactHandles$"+ze,Xe="__reactResources$"+ze,qe="__reactMarker$"+ze;function Qe(e){delete e[Ue],delete e[He],delete e[We],delete e[Ge],delete e[Ye]}function Ze(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ld(e);null!==e;){if(n=e[Ue])return n;e=Ld(e)}return t}n=(e=n).parentNode}return null}function Ke(e){if(e=e[Ue]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Je(e){var t=e[Xe];return t||(t=e[Xe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[qe]=!0}var tt=new Set,nt={};function rt(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},st={};function lt(e,t,n){if(a=t,re.call(st,a)||!re.call(ot,a)&&(it.test(a)?st[a]=!0:(ot[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,a,i,o,s){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?Ct(e,o,dt(t)):null!=n?Ct(e,o,dt(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+dt(s):e.removeAttribute("name")}function wt(e,t,n,r,a,i,o,s){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),ft(e)}function Ct(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Et(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(O(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function At(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var It=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||It.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Nt(e,a,r)}else for(var i in t)t.hasOwnProperty(i)&&Nt(e,i,t[i])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mt(e){return Dt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rt(){}var Ot=null;function kt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Lt=null;function Bt(e){var t=Ke(e);if(t&&(e=t.stateNode)){var n=e[He]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[He]||null;if(!a)throw Error(o(90));vt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var jt=!1;function Ft(e,t,n){if(jt)return e(t,n);jt=!0;try{return e(t)}finally{if(jt=!1,(null!==Pt||null!==Lt)&&(Jc(),Pt&&(t=Pt,e=Lt,Lt=Pt=null,Bt(t),e)))for(t=0;t<e.length;t++)Bt(e[t])}}function zt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[He]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ht=!1;if(Ut)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Kh){Ht=!1}var Wt=null,Gt=null,Yt=null;function Xt(){if(Yt)return Yt;var e,t,n=Gt,r=n.length,a="value"in Wt?Wt.value:Wt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Yt=a.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Qt(){return!0}function Zt(){return!1}function Kt(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Qt:Zt,this.isPropagationStopped=Zt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qt)},persist:function(){},isPersistent:Qt}),t}var $t,Jt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Kt(tn),rn=f({},tn,{view:0,detail:0}),an=Kt(rn),on=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?($t=e.screenX-en.screenX,Jt=e.screenY-en.screenY):Jt=$t=0,en=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),sn=Kt(on),ln=Kt(f({},on,{dataTransfer:0})),cn=Kt(f({},rn,{relatedTarget:0})),un=Kt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Kt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Kt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return gn}var vn=Kt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wn=Kt(f({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=Kt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),bn=Kt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Kt(f({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),En=Kt(f({},tn,{newState:0,oldState:0})),An=[9,13,27,32],In=Ut&&"CompositionEvent"in window,Nn=null;Ut&&"documentMode"in document&&(Nn=document.documentMode);var _n=Ut&&"TextEvent"in window&&!Nn,Tn=Ut&&(!In||Nn&&8<Nn&&11>=Nn),xn=String.fromCharCode(32),Dn=!1;function Mn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var On=!1;var kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!kn[e.type]:"textarea"===t}function Ln(e,t,n,r){Pt?Lt?Lt.push(r):Lt=[r]:Pt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bn=null,jn=null;function Fn(e){Qu(e,0)}function zn(e){if(pt($e(e)))return e}function Un(e,t){if("change"===e)return t}var Hn=!1;if(Ut){var Vn;if(Ut){var Wn="oninput"in document;if(!Wn){var Gn=document.createElement("div");Gn.setAttribute("oninput","return;"),Wn="function"===typeof Gn.oninput}Vn=Wn}else Vn=!1;Hn=Vn&&(!document.documentMode||9<document.documentMode)}function Yn(){Bn&&(Bn.detachEvent("onpropertychange",Xn),jn=Bn=null)}function Xn(e){if("value"===e.propertyName&&zn(jn)){var t=[];Ln(t,jn,e,kt(e)),Ft(Fn,t)}}function qn(e,t,n){"focusin"===e?(Yn(),jn=n,(Bn=t).attachEvent("onpropertychange",Xn)):"focusout"===e&&Yn()}function Qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return zn(jn)}function Zn(e,t){if("click"===e)return zn(t)}function Kn(e,t){if("input"===e||"change"===e)return zn(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!re.call(t,a)||!$n(e[a],t[a]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Ut&&"documentMode"in document&&11>=document.documentMode,or=null,sr=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==or||or!==mt(r)||("selectionStart"in(r=or)&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Jn(lr,r)||(lr=r,0<(r=rd(sr,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}Ut&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=mr("animationend"),yr=mr("animationiteration"),vr=mr("animationstart"),wr=mr("transitionrun"),Cr=mr("transitionstart"),br=mr("transitioncancel"),Sr=mr("transitionend"),Er=new Map,Ar="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Er.set(e,t),rt(t,[e])}Ar.push("scrollEnd");var Nr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},_r=[],Tr=0,xr=0;function Dr(){for(var e=Tr,t=xr=Tr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var a=_r[t];_r[t++]=null;var i=_r[t];if(_r[t++]=null,null!==r&&null!==a){var o=r.pending;null===o?a.next=a:(a.next=o.next,o.next=a),r.pending=a}0!==i&&kr(n,a,i)}}function Mr(e,t,n,r){_r[Tr++]=e,_r[Tr++]=t,_r[Tr++]=n,_r[Tr++]=r,xr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Mr(e,t,n,r),Pr(e)}function Or(e,t){return Mr(e,null,null,t),Pr(e)}function kr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,a&&null!==t&&(a=31-Ce(n),null===(r=(e=i.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),i):null}function Pr(e){if(50<Wc)throw Wc=0,Gc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Br(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(e,t,n,r){return new Br(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=jr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hr(e,t,n,r,a,i){var s=0;if(r=e,"function"===typeof e)Fr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=jr(31,n,t,a)).elementType=_,e.lanes=i,e;case y:return Vr(n.children,a,i,t);case v:s=8,a|=24;break;case w:return(e=jr(12,n,t,2|a)).elementType=w,e.lanes=i,e;case E:return(e=jr(13,n,t,a)).elementType=E,e.lanes=i,e;case A:return(e=jr(19,n,t,a)).elementType=A,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:s=10;break e;case C:s=9;break e;case S:s=11;break e;case I:s=14;break e;case N:s=16,r=null;break e}s=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=jr(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Vr(e,t,n,r){return(e=jr(7,e,r,t)).lanes=n,e}function Wr(e,t,n){return(e=jr(6,e,null,t)).lanes=n,e}function Gr(e){var t=jr(18,null,null,0);return t.stateNode=e,t}function Yr(e,t,n){return(t=jr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Xr=new WeakMap;function qr(e,t){if("object"===typeof e&&null!==e){var n=Xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Xr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Qr=[],Zr=0,Kr=null,$r=0,Jr=[],ea=0,ta=null,na=1,ra="";function aa(e,t){Qr[Zr++]=$r,Qr[Zr++]=Kr,Kr=e,$r=t}function ia(e,t,n){Jr[ea++]=na,Jr[ea++]=ra,Jr[ea++]=ta,ta=e;var r=na;e=ra;var a=32-Ce(r)-1;r&=~(1<<a),n+=1;var i=32-Ce(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,na=1<<32-Ce(t)+a|n<<a|r,ra=i+e}else na=1<<i|n<<a|r,ra=e}function oa(e){null!==e.return&&(aa(e,1),ia(e,1,0))}function sa(e){for(;e===Kr;)Kr=Qr[--Zr],Qr[Zr]=null,$r=Qr[--Zr],Qr[Zr]=null;for(;e===ta;)ta=Jr[--ea],Jr[ea]=null,ra=Jr[--ea],Jr[ea]=null,na=Jr[--ea],Jr[ea]=null}function la(e,t){Jr[ea++]=na,Jr[ea++]=ra,Jr[ea++]=ta,na=t.id,ra=t.overflow,ta=e}var ca=null,ua=null,da=!1,ha=null,fa=!1,pa=Error(o(519));function ma(e){throw ba(qr(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pa}function ga(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ue]=e,t[He]=r,n){case"dialog":Zu("cancel",t),Zu("close",t);break;case"iframe":case"object":case"embed":Zu("load",t);break;case"video":case"audio":for(n=0;n<Xu.length;n++)Zu(Xu[n],t);break;case"source":Zu("error",t);break;case"img":case"image":case"link":Zu("error",t),Zu("load",t);break;case"details":Zu("toggle",t);break;case"input":Zu("invalid",t),wt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Zu("invalid",t);break;case"textarea":Zu("invalid",t),Et(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&(Zu("beforetoggle",t),Zu("toggle",t)),null!=r.onScroll&&Zu("scroll",t),null!=r.onScrollEnd&&Zu("scrollend",t),null!=r.onClick&&(t.onclick=Rt),t=!0):t=!1,t||ma(e,!0)}function ya(e){for(ca=e.return;ca;)switch(ca.tag){case 5:case 31:case 13:return void(fa=!1);case 27:case 3:return void(fa=!0);default:ca=ca.return}}function va(e){if(e!==ca)return!1;if(!da)return ya(e),da=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&ua&&ma(e),ya(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ua=Pd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ua=Pd(e)}else 27===n?(n=ua,Nd(e.type)?(e=kd,kd=null,ua=e):ua=n):ua=ca?Od(e.stateNode.nextSibling):null;return!0}function wa(){ua=ca=null,da=!1}function Ca(){var e=ha;return null!==e&&(null===Dc?Dc=e:Dc.push.apply(Dc,e),ha=null),e}function ba(e){null===ha?ha=[e]:ha.push(e)}var Sa=F(null),Ea=null,Aa=null;function Ia(e,t,n){U(Sa,t._currentValue),t._currentValue=n}function Na(e){e._currentValue=Sa.current,z(Sa)}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var s=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),_a(i.return,n,e),r||(s=null);break e}i=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(i=s.alternate)&&(i.lanes|=n),_a(s,n,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function xa(e,t,n,r){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(0!==(524288&a.flags))i=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var s=a.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var l=a.type;$n(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===X.current){if(null===(s=a.alternate))throw Error(o(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}a=a.return}null!==e&&Ta(t,e,n,r),t.flags|=262144}function Da(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ma(e){Ea=e,Aa=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ra(e){return ka(Ea,e)}function Oa(e,t){return null===Ea&&Ma(e),ka(e,t)}function ka(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Aa){if(null===e)throw Error(o(308));Aa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Aa=Aa.next=t;return n}var Pa="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},La=r.unstable_scheduleCallback,Ba=r.unstable_NormalPriority,ja={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fa(){return{controller:new Pa,data:new Map,refCount:0}}function za(e){e.refCount--,0===e.refCount&&La(Ba,function(){e.controller.abort()})}var Ua=null,Ha=0,Va=0,Wa=null;function Ga(){if(0===--Ha&&null!==Ua){null!==Wa&&(Wa.status="fulfilled");var e=Ua;Ua=null,Va=0,Wa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ya=k.S;k.S=function(e,t){Oc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ua){var n=Ua=[];Ha=0,Va=Hu(),Wa={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ha++,t.then(Ga,Ga)}(0,t),null!==Ya&&Ya(e,t)};var Xa=F(null);function qa(){var e=Xa.current;return null!==e?e:pc.pooledCache}function Qa(e,t){U(Xa,null===t?Xa.current:t.pool)}function Za(){var e=qa();return null===e?null:{parent:ja._currentValue,pool:e}}var Ka=Error(o(460)),$a=Error(o(474)),Ja=Error(o(542)),ei={then:function(){}};function ti(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ni(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Rt,Rt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e;default:if("string"===typeof t.status)t.then(Rt,Rt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e}throw ai=t,Ka}}function ri(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ai=t,Ka;throw t}}var ai=null;function ii(){if(null===ai)throw Error(o(459));var e=ai;return ai=null,e}function oi(e){if(e===Ka||e===Ja)throw Error(o(483))}var si=null,li=0;function ci(e){var t=li;return li+=1,null===si&&(si=[]),ni(si,e,t)}function ui(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function di(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wr(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&ri(i)===t.type)?(ui(t=a(t,n.props),n),t.return=e,t):(ui(t=Hr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Yr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Wr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return ui(n=Hr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Yr(t,e.mode,n)).return=e,t;case N:return h(e,t=ri(t),n)}if(O(t)||D(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ci(t),n);if(t.$$typeof===b)return h(e,Oa(e,t),n);di(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===a?c(e,t,n,r):null;case g:return n.key===a?u(e,t,n,r):null;case N:return f(e,t,n=ri(n),r)}if(O(n)||D(n))return null!==a?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ci(n),r);if(n.$$typeof===b)return f(e,t,Oa(e,n),r);di(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case N:return p(e,t,n,r=ri(r),a)}if(O(r)||D(r))return d(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return p(e,t,n,ci(r),a);if(r.$$typeof===b)return p(e,t,n,Oa(t,r),a);di(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var w=u.key;null!==c;){if(c.key===w){if((w=u.type)===y){if(7===c.tag){n(l,c.sibling),(d=a(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===N&&ri(w)===c.type){n(l,c.sibling),ui(d=a(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((d=Vr(u.props.children,l.mode,d,u.key)).return=l,l=d):(ui(d=Hr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return s(l);case g:e:{for(w=u.key;null!==c;){if(c.key===w){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=a(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Yr(u,l.mode,d)).return=l,l=d}return s(l);case N:return v(l,c,u=ri(u),d)}if(O(u))return function(a,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(a,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(a,d),o=i(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===s.length)return n(a,d),da&&aa(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(a,s[m],l))&&(o=i(d,o,m),null===u?c=d:u.sibling=d,u=d);return da&&aa(a,m),c}for(d=r(d);m<s.length;m++)null!==(g=p(d,a,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=i(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),da&&aa(a,m),c}(l,c,u,d);if(D(u)){if("function"!==typeof(w=D(u)))throw Error(o(150));return function(a,s,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(a,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(a,m),s=i(w,s,g),null===d?u=w:d.sibling=w,d=w,m=y}if(v.done)return n(a,m),da&&aa(a,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(a,v.value,c))&&(s=i(v,s,g),null===d?u=v:d.sibling=v,d=v);return da&&aa(a,g),u}for(m=r(m);!v.done;g++,v=l.next())null!==(v=p(m,a,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=i(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(a,e)}),da&&aa(a,g),u}(l,c,u=w.call(u),d)}if("function"===typeof u.then)return v(l,c,ci(u),d);if(u.$$typeof===b)return v(l,c,Oa(l,u),d);di(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=a(c,u)).return=l,l=d):(n(l,c),(d=Wr(u,l.mode,d)).return=l,l=d),s(l)):n(l,c)}return function(e,t,n,r){try{li=0;var a=v(e,t,n,r);return si=null,a}catch(o){if(o===Ka||o===Ja)throw o;var i=jr(29,o,null,e.mode);return i.lanes=r,i.return=e,i}}}var fi=hi(!0),pi=hi(!1),mi=!1;function gi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fc)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Pr(e),kr(e,null,n),t}return Mr(e,r,t,n),Pr(e)}function Ci(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,ke(e,n)}}function bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Si=!1;function Ei(){if(Si){if(null!==Wa)throw Wa}}function Ai(e,t,n,r){Si=!1;var a=e.updateQueue;mi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(o=0,u=c=l=null,s=i;;){var h=-536870913&s.lane,p=h!==s.lane;if(p?(gc&h)===h:(r&h)===h){0!==h&&h===Va&&(Si=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;h=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(y,d,h):m)||void 0===h)break e;d=f({},d,h);break e;case 2:mi=!0}}null!==(h=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=a.callbacks)?a.callbacks=[h]:p.push(h))}else p={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(p=s).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===i&&(a.shared.lanes=0),Ac|=o,e.lanes=o,e.memoizedState=d}}function Ii(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Ni(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ii(n[e],t)}var _i=F(null),Ti=F(0);function xi(e,t){U(Ti,e=Sc),U(_i,t),Sc=e|t.baseLanes}function Di(){U(Ti,Sc),U(_i,_i.current)}function Mi(){Sc=Ti.current,z(_i),z(Ti)}var Ri=F(null),Oi=null;function ki(e){var t=e.alternate;U(Fi,1&Fi.current),U(Ri,e),null===Oi&&(null===t||null!==_i.current||null!==t.memoizedState)&&(Oi=e)}function Pi(e){U(Fi,Fi.current),U(Ri,e),null===Oi&&(Oi=e)}function Li(e){22===e.tag?(U(Fi,Fi.current),U(Ri,e),null===Oi&&(Oi=e)):Bi()}function Bi(){U(Fi,Fi.current),U(Ri,Ri.current)}function ji(e){z(Ri),Oi===e&&(Oi=null),z(Fi)}var Fi=F(0);function zi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Md(n)||Rd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ui=0,Hi=null,Vi=null,Wi=null,Gi=!1,Yi=!1,Xi=!1,qi=0,Qi=0,Zi=null,Ki=0;function $i(){throw Error(o(321))}function Ji(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function eo(e,t,n,r,a,i){return Ui=i,Hi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=null===e||null===e.memoizedState?gs:ys,Xi=!1,i=n(r,a),Xi=!1,Yi&&(i=no(t,n,r,a)),to(e),i}function to(e){k.H=ms;var t=null!==Vi&&null!==Vi.next;if(Ui=0,Wi=Vi=Hi=null,Gi=!1,Qi=0,Zi=null,t)throw Error(o(300));null===e||Os||null!==(e=e.dependencies)&&Da(e)&&(Os=!0)}function no(e,t,n,r){Hi=e;var a=0;do{if(Yi&&(Zi=null),Qi=0,Yi=!1,25<=a)throw Error(o(301));if(a+=1,Wi=Vi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}k.H=vs,i=t(n,r)}while(Yi);return i}function ro(){var e=k.H,t=e.useState()[0];return t="function"===typeof t.then?co(t):t,e=e.useState()[0],(null!==Vi?Vi.memoizedState:null)!==e&&(Hi.flags|=1024),t}function ao(){var e=0!==qi;return qi=0,e}function io(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oo(e){if(Gi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Gi=!1}Ui=0,Wi=Vi=Hi=null,Yi=!1,Qi=qi=0,Zi=null}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wi?Hi.memoizedState=Wi=e:Wi=Wi.next=e,Wi}function lo(){if(null===Vi){var e=Hi.alternate;e=null!==e?e.memoizedState:null}else e=Vi.next;var t=null===Wi?Hi.memoizedState:Wi.next;if(null!==t)Wi=t,Vi=e;else{if(null===e){if(null===Hi.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Vi=e).memoizedState,baseState:Vi.baseState,baseQueue:Vi.baseQueue,queue:Vi.queue,next:null},null===Wi?Hi.memoizedState=Wi=e:Wi=Wi.next=e}return Wi}function co(e){var t=Qi;return Qi+=1,null===Zi&&(Zi=[]),e=ni(Zi,e,t),t=Hi,null===(null===Wi?t.memoizedState:Wi.next)&&(t=t.alternate,k.H=null===t||null===t.memoizedState?gs:ys),e}function uo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return co(e);if(e.$$typeof===b)return Ra(e)}throw Error(o(438,String(e)))}function ho(e){var t=null,n=Hi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Hi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function fo(e,t){return"function"===typeof t?t(e):t}function po(e){return mo(lo(),Vi,e)}function mo(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var a=e.baseQueue,i=r.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}t.baseQueue=a=i,r.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var l=s=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gc&h)===h:(Ui&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Va&&(d=!0);else{if((Ui&f)===f){u=u.next,f===Va&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,s=i):c=c.next=h,Hi.lanes|=f,Ac|=f}h=u.action,Xi&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,s=i):c=c.next=f,Hi.lanes|=h,Ac|=h;u=u.next}while(null!==u&&u!==t);if(null===c?s=i:c.next=l,!$n(i,e.memoizedState)&&(Os=!0,d&&null!==(n=Wa)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=c,r.lastRenderedState=i}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function go(e){var t=lo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);$n(i,t.memoizedState)||(Os=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function yo(e,t,n){var r=Hi,a=lo(),i=da;if(i){if(void 0===n)throw Error(o(407));n=n()}else n=t();var s=!$n((Vi||a).memoizedState,n);if(s&&(a.memoizedState=n,Os=!0),a=a.queue,Ho(Co.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==Wi&&1&Wi.memoizedState.tag){if(r.flags|=2048,Bo(9,{destroy:void 0},wo.bind(null,r,a,n,t),null),null===pc)throw Error(o(349));i||0!==(127&Ui)||vo(r,t,n)}return n}function vo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Hi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wo(e,t,n,r){t.value=n,t.getSnapshot=r,bo(t)&&So(e)}function Co(e,t,n){return n(function(){bo(t)&&So(e)})}function bo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function So(e){var t=Or(e,2);null!==t&&qc(t,e,2)}function Eo(e){var t=so();if("function"===typeof e){var n=e;if(e=n(),Xi){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:e},t}function Ao(e,t,n,r){return e.baseState=n,mo(e,Vi,"function"===typeof r?r:fo)}function Io(e,t,n,r,a){if(hs(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==k.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,No(t,i)):(i.next=n.next,t.pending=n.next=i)}}function No(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var i=k.T,o={};k.T=o;try{var s=n(a,r),l=k.S;null!==l&&l(o,s),_o(e,t,s)}catch(c){xo(e,t,c)}finally{null!==i&&null!==o.types&&(i.types=o.types),k.T=i}}else try{_o(e,t,i=n(a,r))}catch(u){xo(e,t,u)}}function _o(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){To(e,t,n)},function(n){return xo(e,t,n)}):To(e,t,n)}function To(e,t,n){t.status="fulfilled",t.value=n,Do(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,No(e,n)))}function xo(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Do(t),t=t.next}while(t!==r)}e.action=null}function Do(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Mo(e,t){return t}function Ro(e,t){if(da){var n=pc.formState;if(null!==n){e:{var r=Hi;if(da){if(ua){t:{for(var a=ua,i=fa;8!==a.nodeType;){if(!i){a=null;break t}if(null===(a=Od(a.nextSibling))){a=null;break t}}a="F!"===(i=a.data)||"F"===i?a:null}if(a){ua=Od(a.nextSibling),r="F!"===a.data;break e}}ma(r)}r=!1}r&&(t=n[0])}}return(n=so()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:t},n.queue=r,n=cs.bind(null,Hi,r),r.dispatch=n,r=Eo(!1),i=ds.bind(null,Hi,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=so()).queue=a,n=Io.bind(null,Hi,a,i,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function Oo(e){return ko(lo(),Vi,e)}function ko(e,t,n){if(t=mo(e,t,Mo)[0],e=po(fo)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=co(t)}catch(o){if(o===Ka)throw Ja;throw o}else r=t;var a=(t=lo()).queue,i=a.dispatch;return n!==t.memoizedState&&(Hi.flags|=2048,Bo(9,{destroy:void 0},Po.bind(null,a,n),null)),[r,i,e]}function Po(e,t){e.action=t}function Lo(e){var t=lo(),n=Vi;if(null!==n)return ko(t,n,e);lo(),t=t.memoizedState;var r=(n=lo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Bo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Hi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return lo().memoizedState}function Fo(e,t,n,r){var a=so();Hi.flags|=e,a.memoizedState=Bo(1|t,{destroy:void 0},n,void 0===r?null:r)}function zo(e,t,n,r){var a=lo();r=void 0===r?null:r;var i=a.memoizedState.inst;null!==Vi&&null!==r&&Ji(r,Vi.memoizedState.deps)?a.memoizedState=Bo(t,i,n,r):(Hi.flags|=e,a.memoizedState=Bo(1|t,i,n,r))}function Uo(e,t){Fo(8390656,8,e,t)}function Ho(e,t){zo(2048,8,e,t)}function Vo(e){var t=lo().memoizedState;return function(e){Hi.flags|=4;var t=Hi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Wo(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Yo(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Xo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Yo.bind(null,t,e),n)}function qo(){}function Qo(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ji(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zo(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ji(t,r[1]))return r[0];if(r=e(),Xi){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r}function Ko(e,t,n){return void 0===n||0!==(1073741824&Ui)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Xc(),Hi.lanes|=e,Ac|=e,n)}function $o(e,t,n,r){return $n(n,t)?n:null!==_i.current?(e=Ko(e,n,r),$n(e,t)||(Os=!0),e):0===(42&Ui)||0!==(1073741824&Ui)&&0===(261930&gc)?(Os=!0,e.memoizedState=n):(e=Xc(),Hi.lanes|=e,Ac|=e,t)}function Jo(e,t,n,r,a){var i=P.p;P.p=0!==i&&8>i?i:8;var o=k.T,s={};k.T=s,ds(e,!1,t,n);try{var l=a(),c=k.S;if(null!==c&&c(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)us(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Yc());else us(e,t,r,Yc())}catch(u){us(e,t,{then:function(){},status:"rejected",reason:u},Yc())}finally{P.p=i,null!==o&&null!==s.types&&(o.types=s.types),k.T=o}}function es(){}function ts(e,t,n,r){if(5!==e.tag)throw Error(o(476));var a=ns(e).queue;Jo(e,a,t,L,null===n?es:function(){return rs(e),n(r)})}function ns(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function rs(e){var t=ns(e);null===t.next&&(t=e.alternate.memoizedState),us(e,t.next.queue,{},Yc())}function as(){return Ra(uh)}function is(){return lo().memoizedState}function os(){return lo().memoizedState}function ss(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Yc(),r=wi(t,e=vi(n),n);return null!==r&&(qc(r,t,n),Ci(r,t,n)),t={cache:Fa()},void(e.payload=t)}t=t.return}}function ls(e,t,n){var r=Yc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hs(e)?fs(t,n):null!==(n=Rr(e,t,n,r))&&(qc(n,e,r),ps(n,t,r))}function cs(e,t,n){us(e,t,n,Yc())}function us(e,t,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hs(e))fs(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,$n(s,o))return Mr(e,t,a,0),null===pc&&Dr(),!1}catch(l){}if(null!==(n=Rr(e,t,a,r)))return qc(n,e,r),ps(n,t,r),!0}return!1}function ds(e,t,n,r){if(r={lane:2,revertLane:Hu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},hs(e)){if(t)throw Error(o(479))}else null!==(t=Rr(e,n,r,2))&&qc(t,e,2)}function hs(e){var t=e.alternate;return e===Hi||null!==t&&t===Hi}function fs(e,t){Yi=Gi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ps(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,ke(e,n)}}var ms={readContext:Ra,use:uo,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useLayoutEffect:$i,useInsertionEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useSyncExternalStore:$i,useId:$i,useHostTransitionStatus:$i,useFormState:$i,useActionState:$i,useOptimistic:$i,useMemoCache:$i,useCacheRefresh:$i};ms.useEffectEvent=$i;var gs={readContext:Ra,use:uo,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:Ra,useEffect:Uo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4194308,4,Yo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fo(4194308,4,e,t)},useInsertionEffect:function(e,t){Fo(4,2,e,t)},useMemo:function(e,t){var n=so();t=void 0===t?null:t;var r=e();if(Xi){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=so();if(void 0!==n){var a=n(t);if(Xi){we(!0);try{n(t)}finally{we(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=ls.bind(null,Hi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},so().memoizedState=e},useState:function(e){var t=(e=Eo(e)).queue,n=cs.bind(null,Hi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:qo,useDeferredValue:function(e,t){return Ko(so(),e,t)},useTransition:function(){var e=Eo(!1);return e=Jo.bind(null,Hi,e.queue,!0,!1),so().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Hi,a=so();if(da){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===pc)throw Error(o(349));0!==(127&gc)||vo(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Uo(Co.bind(null,r,i,e),[e]),r.flags|=2048,Bo(9,{destroy:void 0},wo.bind(null,r,i,n,t),null),n},useId:function(){var e=so(),t=pc.identifierPrefix;if(da){var n=ra;t="_"+t+"R_"+(n=(na&~(1<<32-Ce(na)-1)).toString(32)+n),0<(n=qi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Ki++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:as,useFormState:Ro,useActionState:Ro,useOptimistic:function(e){var t=so();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ds.bind(null,Hi,!0,n),n.dispatch=t,[e,t]},useMemoCache:ho,useCacheRefresh:function(){return so().memoizedState=ss.bind(null,Hi)},useEffectEvent:function(e){var t=so(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(o(440));return n.impl.apply(void 0,arguments)}}},ys={readContext:Ra,use:uo,useCallback:Qo,useContext:Ra,useEffect:Ho,useImperativeHandle:Xo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Zo,useReducer:po,useRef:jo,useState:function(){return po(fo)},useDebugValue:qo,useDeferredValue:function(e,t){return $o(lo(),Vi.memoizedState,e,t)},useTransition:function(){var e=po(fo)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:yo,useId:is,useHostTransitionStatus:as,useFormState:Oo,useActionState:Oo,useOptimistic:function(e,t){return Ao(lo(),0,e,t)},useMemoCache:ho,useCacheRefresh:os};ys.useEffectEvent=Vo;var vs={readContext:Ra,use:uo,useCallback:Qo,useContext:Ra,useEffect:Ho,useImperativeHandle:Xo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:Zo,useReducer:go,useRef:jo,useState:function(){return go(fo)},useDebugValue:qo,useDeferredValue:function(e,t){var n=lo();return null===Vi?Ko(n,e,t):$o(n,Vi.memoizedState,e,t)},useTransition:function(){var e=go(fo)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:yo,useId:is,useHostTransitionStatus:as,useFormState:Lo,useActionState:Lo,useOptimistic:function(e,t){var n=lo();return null!==Vi?Ao(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ho,useCacheRefresh:os};function ws(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vs.useEffectEvent=Vo;var Cs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Yc(),a=vi(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=wi(e,a,r))&&(qc(t,e,r),Ci(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Yc(),a=vi(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=wi(e,a,r))&&(qc(t,e,r),Ci(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yc(),r=vi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=wi(e,r,n))&&(qc(t,e,n),Ci(t,e,n))}};function bs(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(a,i))}function Ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Cs.enqueueReplaceState(t,t.state,null)}function Es(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=f({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function As(e){Nr(e)}function Is(e){console.error(e)}function Ns(e){Nr(e)}function _s(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ts(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function xs(e,t,n){return(n=vi(n)).tag=3,n.payload={element:null},n.callback=function(){_s(e,t)},n}function Ds(e){return(e=vi(e)).tag=3,e}function Ms(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var i=r.value;e.payload=function(){return a(i)},e.callback=function(){Ts(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Ts(t,n,r),"function"!==typeof a&&(null===Lc?Lc=new Set([this]):Lc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Rs=Error(o(461)),Os=!1;function ks(e,t,n,r){t.child=null===e?pi(t,null,n,r):fi(t,e.child,n,r)}function Ps(e,t,n,r,a){n=n.render;var i=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return Ma(t),r=eo(e,t,n,o,i,a),s=ao(),null===e||Os?(da&&s&&oa(t),t.flags|=1,ks(e,t,r,a),t.child):(io(e,t,a),al(e,t,a))}function Ls(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Fr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Hr(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Bs(e,t,i,r,a))}if(i=e.child,!il(e,a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(o,r)&&e.ref===t.ref)return al(e,t,a)}return t.flags|=1,(e=zr(i,r)).ref=t.ref,e.return=t,t.child=e}function Bs(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(Jn(i,r)&&e.ref===t.ref){if(Os=!1,t.pendingProps=r=i,!il(e,a))return t.lanes=e.lanes,al(e,t,a);0!==(131072&e.flags)&&(Os=!0)}}return Ws(e,t,n,r,a)}function js(e,t,n,r){var a=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~i}else r=0,t.child=null;return zs(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,zs(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Qa(0,null!==i?i.cachePool:null),null!==i?xi(t,i):Di(),Li(t)}else null!==i?(Qa(0,i.cachePool),xi(t,i),Bi(),t.memoizedState=null):(null!==e&&Qa(0,null),Di(),Bi());return ks(e,t,a,n),t.child}function Fs(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function zs(e,t,n,r,a){var i=qa();return i=null===i?null:{parent:ja._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Qa(0,null),Di(),Li(t),null!==e&&xa(e,t,r,!0),t.childLanes=a,null}function Us(e,t){return(t=Js({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Hs(e,t,n){return fi(t,e.child,null,n),(e=Us(t,t.pendingProps)).flags|=2,ji(t),t.memoizedState=null,e}function Vs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ws(e,t,n,r,a){return Ma(t),n=eo(e,t,n,r,void 0,a),r=ao(),null===e||Os?(da&&r&&oa(t),t.flags|=1,ks(e,t,n,a),t.child):(io(e,t,a),al(e,t,a))}function Gs(e,t,n,r,a,i){return Ma(t),t.updateQueue=null,n=no(t,r,n,a),to(e),r=ao(),null===e||Os?(da&&r&&oa(t),t.flags|=1,ks(e,t,n,i),t.child):(io(e,t,i),al(e,t,i))}function Ys(e,t,n,r,a){if(Ma(t),null===t.stateNode){var i=Lr,o=n.contextType;"object"===typeof o&&null!==o&&(i=Ra(o)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=Cs,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},gi(t),o=n.contextType,i.context="object"===typeof o&&null!==o?Ra(o):Lr,i.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ws(t,n,o,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(o=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&Cs.enqueueReplaceState(i,i.state,null),Ai(t,r,i,a),Ei(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,l=Es(n,s);i.props=l;var c=i.context,u=n.contextType;o=Lr,"object"===typeof u&&null!==u&&(o=Ra(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s||c!==o)&&Ss(t,i,r,o),mi=!1;var h=t.memoizedState;i.state=h,Ai(t,r,i,a),Ei(),c=t.memoizedState,s||h!==c||mi?("function"===typeof d&&(ws(t,n,d,r),c=t.memoizedState),(l=mi||bs(t,n,l,r,h,c,o))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=o,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,yi(e,t),u=Es(n,o=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Lr,"object"===typeof c&&null!==c&&(l=Ra(c)),(c="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&Ss(t,i,r,l),mi=!1,h=t.memoizedState,i.state=h,Ai(t,r,i,a),Ei();var f=t.memoizedState;o!==d||h!==f||mi||null!==e&&null!==e.dependencies&&Da(e.dependencies)?("function"===typeof s&&(ws(t,n,s,r),f=t.memoizedState),(u=mi||bs(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Da(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Vs(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=fi(t,e.child,null,a),t.child=fi(t,null,n,a)):ks(e,t,n,a),t.memoizedState=i.state,e=t.child):e=al(e,t,a),e}function Xs(e,t,n,r){return wa(),t.flags|=256,ks(e,t,n,r),t.child}var qs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qs(e){return{baseLanes:e,cachePool:Za()}}function Zs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=_c),e}function Ks(e,t,n){var r,a=t.pendingProps,i=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Fi.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(da){if(i?ki(t):Bi(),(e=ua)?null!==(e=null!==(e=Dd(e,fa))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Gr(e)).return=t,t.child=n,ca=t,ua=null):e=null,null===e)throw ma(t);return Rd(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,i?(Bi(),l=Js({mode:"hidden",children:l},i=t.mode),a=Vr(a,i,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(a=t.child).memoizedState=Qs(n),a.childLanes=Zs(e,r,n),t.memoizedState=qs,Fs(null,a)):(ki(t),$s(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(s)256&t.flags?(ki(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Bi(),t.child=e.child,t.flags|=128,t=null):(Bi(),l=a.fallback,i=t.mode,a=Js({mode:"visible",children:a.children},i),(l=Vr(l,i,n,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,fi(t,e.child,null,n),(a=t.child).memoizedState=Qs(n),a.childLanes=Zs(e,r,n),t.memoizedState=qs,t=Fs(null,a));else if(ki(t),Rd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(a=Error(o(419))).stack="",a.digest=r,ba({value:a,source:null,stack:null}),t=el(e,t,n)}else if(Os||xa(e,t,n,!1),r=0!==(n&e.childLanes),Os||r){if(null!==(r=pc)&&(0!==(a=Pe(r,n))&&a!==c.retryLane))throw c.retryLane=a,Or(e,a),qc(r,e,a),Rs;Md(l)||ou(),t=el(e,t,n)}else Md(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ua=Od(l.nextSibling),ca=t,da=!0,ha=null,fa=!1,null!==e&&la(t,e),(t=$s(t,a.children)).flags|=4096);return t}return i?(Bi(),l=a.fallback,i=t.mode,u=(c=e.child).sibling,(a=zr(c,{mode:"hidden",children:a.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=zr(u,l):(l=Vr(l,i,n,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,Fs(null,a),a=t.child,null===(l=e.child.memoizedState)?l=Qs(n):(null!==(i=l.cachePool)?(c=ja._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=Za(),l={baseLanes:l.baseLanes|n,cachePool:i}),a.memoizedState=l,a.childLanes=Zs(e,r,n),t.memoizedState=qs,Fs(e.child,a)):(ki(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $s(e,t){return(t=Js({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Js(e,t){return(e=jr(22,e,null,t)).lanes=0,e}function el(e,t,n){return fi(t,e.child,null,n),(e=$s(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function nl(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.treeForkCount=i)}function rl(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;r=r.children;var o=Fi.current,s=0!==(2&o);if(s?(o=1&o|2,t.flags|=128):o&=1,U(Fi,o),ks(e,t,r,n),r=da?$r:0,!s&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===zi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),nl(t,!1,a,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===zi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}nl(t,!0,n,null,i,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function al(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ac|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(xa(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function il(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Da(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Os=!0;else{if(!il(e,n)&&0===(128&t.flags))return Os=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),Ia(0,ja,e.memoizedState.cache),wa();break;case 27:case 5:Z(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:Ia(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Pi(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ki(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ks(e,t,n):(ki(t),null!==(e=al(e,t,n))?e.sibling:null);ki(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(xa(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return rl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),U(Fi,Fi.current),r)break;return null;case 22:return t.lanes=0,js(e,t,n,t.pendingProps);case 24:Ia(0,ja,e.memoizedState.cache)}return al(e,t,n)}(e,t,n);Os=0!==(131072&e.flags)}else Os=!1,da&&0!==(1048576&t.flags)&&ia(t,$r,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ri(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var a=e.$$typeof;if(a===S){t.tag=11,t=Ps(null,t,e,r,n);break e}if(a===I){t.tag=14,t=Ls(null,t,e,r,n);break e}}throw t=R(e)||e,Error(o(306,t,""))}Fr(e)?(r=Es(e,r),t.tag=1,t=Ys(null,t,e,r,n)):(t.tag=0,t=Ws(null,t,e,r,n))}return t;case 0:return Ws(e,t,t.type,t.pendingProps,n);case 1:return Ys(e,t,r=t.type,a=Es(r,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var i=t.memoizedState;a=i.element,yi(e,t),Ai(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Ia(0,ja,r),r!==i.cache&&Ta(t,[ja],n,!0),Ei(),r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Xs(e,t,r,n);break e}if(r!==a){ba(a=qr(Error(o(424)),t)),t=Xs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ua=Od(e.firstChild),ca=t,da=!0,ha=null,fa=!0,n=pi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(wa(),r===a){t=al(e,t,n);break e}ks(e,t,r,n)}t=t.child}return t;case 26:return Vs(e,t),null===e?(n=Gd(t.type,null,t.pendingProps,null))?t.memoizedState=n:da||(n=t.type,e=t.pendingProps,(r=gd(Y.current).createElement(n))[Ue]=t,r[He]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Gd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Z(t),null===e&&da&&(r=t.stateNode=Bd(t.type,t.pendingProps,Y.current),ca=t,fa=!0,a=ua,Nd(t.type)?(kd=a,ua=Od(r.firstChild)):ua=a),ks(e,t,t.pendingProps.children,n),Vs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&da&&((a=r=ua)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===i)return e}if(null===(e=Od(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fa))?(t.stateNode=r,ca=t,ua=Od(r.firstChild),fa=!1,a=!0):a=!1),a||ma(t)),Z(t),a=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,r=i.children,wd(a,i)?r=null:null!==s&&wd(a,s)&&(t.flags|=32),null!==t.memoizedState&&(a=eo(e,t,ro,null,null,n),uh._currentValue=a),Vs(e,t),ks(e,t,r,n),t.child;case 6:return null===e&&da&&((e=n=ua)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Od(e.nextSibling)))return null}return e}(n,t.pendingProps,fa))?(t.stateNode=n,ca=t,ua=null,e=!0):e=!1),e||ma(t)),null;case 13:return Ks(e,t,n);case 4:return q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fi(t,null,r,n):ks(e,t,r,n),t.child;case 11:return Ps(e,t,t.type,t.pendingProps,n);case 7:return ks(e,t,t.pendingProps,n),t.child;case 8:case 12:return ks(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ia(0,t.type,r.value),ks(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Ma(t),r=r(a=Ra(a)),t.flags|=1,ks(e,t,r,n),t.child;case 14:return Ls(e,t,t.type,t.pendingProps,n);case 15:return Bs(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,a=0!==(128&t.flags);if(t.flags&=-129,null===e){if(da){if("hidden"===r.mode)return e=Us(t,r),t.lanes=536870912,Fs(null,e);if(Pi(t),(e=ua)?null!==(e=null!==(e=Dd(e,fa))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Gr(e)).return=t,t.child=n,ca=t,ua=null):e=null,null===e)throw ma(t);return t.lanes=536870912,null}return Us(t,r)}var i=e.memoizedState;if(null!==i){var s=i.dehydrated;if(Pi(t),a)if(256&t.flags)t.flags&=-257,t=Hs(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Os||xa(e,t,n,!1),a=0!==(n&e.childLanes),Os||a){if(null!==(r=pc)&&0!==(s=Pe(r,n))&&s!==i.retryLane)throw i.retryLane=s,Or(e,s),qc(r,e,s),Rs;ou(),t=Hs(e,t,n)}else e=i.treeContext,ua=Od(s.nextSibling),ca=t,da=!0,ha=null,fa=!1,null!==e&&la(t,e),(t=Us(t,r)).flags|=4096;return t}return(e=zr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return js(e,t,n,t.pendingProps);case 24:return Ma(t),r=Ra(ja),null===e?(null===(a=qa())&&(a=pc,i=Fa(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:r,cache:a},gi(t),Ia(0,ja,a)):(0!==(e.lanes&n)&&(yi(e,t),Ai(t,null,null,n),Ei()),a=e.memoizedState,i=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),Ia(0,ja,r)):(r=i.cache,Ia(0,ja,r),r!==a.cache&&Ta(t,[ja],n,!0))),ks(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function sl(e){e.flags|=4}function ll(e,t,n,r,a){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw ai=ei,$a;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ah(t)){if(!ru())throw ai=ei,$a;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?De():536870912,e.lanes|=t,Tc|=t)}function dl(e,t){if(!da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fl(e,t,n){var r=t.pendingProps;switch(sa(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Na(ja),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(va(t)?sl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,Ca())),hl(t),null;case 26:var a=t.type,i=t.memoizedState;return null===e?(sl(t),null!==i?(hl(t),cl(t,i)):(hl(t),ll(t,a,0,0,n))):i?i!==e.memoizedState?(sl(t),hl(t),cl(t,i)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&sl(t),hl(t),ll(t,a,0,0,n)),null;case 27:if(K(t),n=Y.current,a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return hl(t),null}e=W.current,va(t)?ga(t):(e=Bd(a,r,n),t.stateNode=e,sl(t))}return hl(t),null;case 5:if(K(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return hl(t),null}if(i=W.current,va(t))ga(t);else{var s=gd(Y.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(i=s.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?s.createElement(a,{is:r.is}):s.createElement(a)}}i[Ue]=t,i[He]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)i.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=i;e:switch(hd(i,a,r),a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&sl(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&sl(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=Y.current,va(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ca))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||ma(t,!0)}else(e=gd(e).createTextNode(r))[Ue]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=va(t),null!==n){if(null===e){if(!r)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[Ue]=t}else wa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=Ca(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(ji(t),t):(ji(t),null);if(0!==(128&t.flags))throw Error(o(558))}return hl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=va(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[Ue]=t}else wa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),a=!1}else a=Ca(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(ji(t),t):(ji(t),null)}return ji(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return Q(),null===e&&Ju(t.stateNode.containerInfo),hl(t),null;case 10:return Na(t.type),hl(t),null;case 19:if(z(Fi),null===(r=t.memoizedState))return hl(t),null;if(a=0!==(128&t.flags),null===(i=r.rendering))if(a)dl(r,!1);else{if(0!==Ec||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=zi(e))){for(t.flags|=128,dl(r,!1),e=i.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return U(Fi,1&Fi.current|2),da&&aa(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>kc&&(t.flags|=128,a=!0,dl(r,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=zi(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!da)return hl(t),null}else 2*le()-r.renderingStartTime>kc&&536870912!==n&&(t.flags|=128,a=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Fi.current,U(Fi,a?1&n|2:1&n),da&&aa(t,r.treeForkCount),e):(hl(t),null);case 22:case 23:return ji(t),Mi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(Xa),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Na(ja),hl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function pl(e,t){switch(sa(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Na(ja),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return K(t),null;case 31:if(null!==t.memoizedState){if(ji(t),null===t.alternate)throw Error(o(340));wa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(ji(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));wa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(Fi),null;case 4:return Q(),null;case 10:return Na(t.type),null;case 22:case 23:return ji(t),Mi(),null!==e&&z(Xa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Na(ja),null;default:return null}}function ml(e,t){switch(sa(t),t.tag){case 3:Na(ja),Q();break;case 26:case 27:case 5:K(t);break;case 4:Q();break;case 31:null!==t.memoizedState&&ji(t);break;case 13:ji(t);break;case 19:z(Fi);break;case 10:Na(t.type);break;case 22:case 23:ji(t),Mi(),null!==e&&z(Xa);break;case 24:Na(ja)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var i=n.create,o=n.inst;r=i(),o.destroy=r}n=n.next}while(n!==a)}}catch(s){Eu(t,t.return,s)}}function yl(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var i=a.next;r=i;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,a=t;var l=n,c=s;try{c()}catch(u){Eu(a,l,u)}}}r=r.next}while(r!==i)}}catch(u){Eu(t,t.return,u)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ni(t,n)}catch(r){Eu(e,e.return,r)}}}function wl(e,t,n){n.props=Es(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Eu(e,t,r)}}function Cl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){Eu(e,t,a)}}function bl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){Eu(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){Eu(e,t,i)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){Eu(e,e.return,a)}}function El(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,s=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||ud(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":i=p;break;case"name":a=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":s=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&ud(e,t,f,p,r,h)}}return void vt(e,s,l,c,u,d,i,a);case"select":for(i in p=s=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(i)||ud(e,t,i,null,r,c)}for(a in r)if(i=r[a],c=n[a],r.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":s=i;default:i!==c&&ud(e,t,a,i,r,c)}return t=l,n=s,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,r,a)}for(s in r)if(a=r[s],i=n[s],r.hasOwnProperty(s)&&(null!=a||null!=i))switch(s){case"value":f=a;break;case"defaultValue":p=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(o(91));break;default:a!==i&&ud(e,t,s,a,r,i)}return void St(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ud(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ud(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&ud(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:ud(e,t,u,f,r,p)}return;default:if(Tt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&dd(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||dd(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&ud(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||ud(e,t,h,f,r,p)}(r,e.type,n,t),r[He]=t}catch(a){Eu(e,e.return,a)}}function Al(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Nd(e.type)||4===e.tag}function Il(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Nd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Nl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Rt));else if(4!==r&&(27===r&&Nd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Nl(e,t,n),e=e.sibling;null!==e;)Nl(e,t,n),e=e.sibling}function _l(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Nd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(_l(e,t,n),e=e.sibling;null!==e;)_l(e,t,n),e=e.sibling}function Tl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);hd(t,r,n),t[Ue]=e,t[He]=n}catch(i){Eu(e,e.return,i)}}var xl=!1,Dl=!1,Ml=!1,Rl="function"===typeof WeakSet?WeakSet:Set,Ol=null;function kl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:ql(e,n),4&r&&gl(5,n);break;case 1:if(ql(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){Eu(n,n.return,o)}else{var a=Es(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){Eu(n,n.return,s)}}64&r&&vl(n),512&r&&Cl(n,n.return);break;case 3:if(ql(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ni(e,t)}catch(o){Eu(n,n.return,o)}}break;case 27:null===t&&4&r&&Tl(n);case 26:case 5:ql(e,n),null===t&&4&r&&Sl(n),512&r&&Cl(n,n.return);break;case 12:ql(e,n);break;case 31:ql(e,n),4&r&&zl(e,n);break;case 13:ql(e,n),4&r&&Ul(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=_u.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||xl)){t=null!==t&&null!==t.memoizedState||Dl,a=xl;var i=Dl;xl=r,(Dl=t)&&!i?Zl(e,n,0!==(8772&n.subtreeFlags)):ql(e,n),xl=a,Dl=i}break;case 30:break;default:ql(e,n)}}function Pl(e){var t=e.alternate;null!==t&&(e.alternate=null,Pl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ll=null,Bl=!1;function jl(e,t,n){for(n=n.child;null!==n;)Fl(e,t,n),n=n.sibling}function Fl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(i){}switch(n.tag){case 26:Dl||bl(n,t),jl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Dl||bl(n,t);var r=Ll,a=Bl;Nd(n.type)&&(Ll=n.stateNode,Bl=!1),jl(e,t,n),jd(n.stateNode),Ll=r,Bl=a;break;case 5:Dl||bl(n,t);case 6:if(r=Ll,a=Bl,Ll=null,jl(e,t,n),Bl=a,null!==(Ll=r))if(Bl)try{(9===Ll.nodeType?Ll.body:"HTML"===Ll.nodeName?Ll.ownerDocument.body:Ll).removeChild(n.stateNode)}catch(o){Eu(n,t,o)}else try{Ll.removeChild(n.stateNode)}catch(o){Eu(n,t,o)}break;case 18:null!==Ll&&(Bl?(_d(9===(e=Ll).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wh(e)):_d(Ll,n.stateNode));break;case 4:r=Ll,a=Bl,Ll=n.stateNode.containerInfo,Bl=!0,jl(e,t,n),Ll=r,Bl=a;break;case 0:case 11:case 14:case 15:yl(2,n,t),Dl||yl(4,n,t),jl(e,t,n);break;case 1:Dl||(bl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&wl(n,t,r)),jl(e,t,n);break;case 21:jl(e,t,n);break;case 22:Dl=(r=Dl)||null!==n.memoizedState,jl(e,t,n),Dl=r;break;default:jl(e,t,n)}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wh(e)}catch(n){Eu(t,t.return,n)}}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wh(e)}catch(n){Eu(t,t.return,n)}}function Hl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Rl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Rl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Tu.bind(null,e,t);t.then(r,r)}})}function Vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(Nd(l.type)){Ll=l.stateNode,Bl=!1;break e}break;case 5:Ll=l.stateNode,Bl=!1;break e;case 3:case 4:Ll=l.stateNode.containerInfo,Bl=!0;break e}l=l.return}if(null===Ll)throw Error(o(160));Fl(i,s,a),Ll=null,Bl=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Gl(t,e),t=t.sibling}var Wl=null;function Gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vl(t,e),Yl(e),4&r&&(yl(3,e,e.return),gl(3,e),yl(5,e,e.return));break;case 1:Vl(t,e),Yl(e),512&r&&(Dl||null===n||bl(n,n.return)),64&r&&xl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Wl;if(Vl(t,e),Yl(e),512&r&&(Dl||null===n||bl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(i=a.getElementsByTagName("title")[0])||i[qe]||i[Ue]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(r),a.head.insertBefore(i,a.querySelector("head > title"))),hd(i,r,n),i[Ue]=e,et(i),r=i;break e;case"link":var s=nh("link","href",a).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((i=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}hd(i=a.createElement(r),r,n),a.head.appendChild(i);break;case"meta":if(s=nh("meta","content",a).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((i=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}hd(i=a.createElement(r),r,n),a.head.appendChild(i);break;default:throw Error(o(468,r))}i[Ue]=e,et(i),r=i}e.stateNode=r}else rh(a,e.type,e.stateNode);else e.stateNode=Kd(a,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?rh(a,e.type,e.stateNode):Kd(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&El(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vl(t,e),Yl(e),512&r&&(Dl||null===n||bl(n,n.return)),null!==n&&4&r&&El(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vl(t,e),Yl(e),512&r&&(Dl||null===n||bl(n,n.return)),32&e.flags){a=e.stateNode;try{At(a,"")}catch(m){Eu(e,e.return,m)}}4&r&&null!=e.stateNode&&El(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(Ml=!0);break;case 6:if(Vl(t,e),Yl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Eu(e,e.return,m)}}break;case 3:if(th=null,a=Wl,Wl=Ud(t.containerInfo),Vl(t,e),Wl=a,Yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(m){Eu(e,e.return,m)}Ml&&(Ml=!1,Xl(e));break;case 4:r=Wl,Wl=Ud(e.stateNode.containerInfo),Vl(t,e),Yl(e),Wl=r;break;case 12:default:Vl(t,e),Yl(e);break;case 31:case 19:Vl(t,e),Yl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r)));break;case 13:Vl(t,e),Yl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Rc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=xl,d=Dl;if(xl=u||a,Dl=d||c,Vl(t,e),Dl=d,xl=u,Yl(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||xl||Dl||Ql(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,a)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){Eu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(m){Eu(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;a?Td(p,!0):Td(c.stateNode,!1)}catch(m){Eu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Hl(e,n))));case 30:case 21:}}function Yl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Al(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var a=n.stateNode;_l(e,Il(e),a);break;case 5:var i=n.stateNode;32&n.flags&&(At(i,""),n.flags&=-33),_l(e,Il(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;Nl(e,Il(e),s);break;default:throw Error(o(161))}}catch(l){Eu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Xl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Xl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function Ql(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Ql(t);break;case 1:bl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&wl(t,t.return,n),Ql(t);break;case 27:jd(t.stateNode);case 26:case 5:bl(t,t.return),Ql(t);break;case 22:null===t.memoizedState&&Ql(t);break;default:Ql(t)}e=e.sibling}}function Zl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Zl(a,i,n),gl(4,i);break;case 1:if(Zl(a,i,n),"function"===typeof(a=(r=i).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){Eu(r,r.return,c)}if(null!==(a=(r=i).updateQueue)){var s=r.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)Ii(l[a],s)}catch(c){Eu(r,r.return,c)}}n&&64&o&&vl(i),Cl(i,i.return);break;case 27:Tl(i);case 26:case 5:Zl(a,i,n),n&&null===r&&4&o&&Sl(i),Cl(i,i.return);break;case 12:Zl(a,i,n);break;case 31:Zl(a,i,n),n&&4&o&&zl(a,i);break;case 13:Zl(a,i,n),n&&4&o&&Ul(a,i);break;case 22:null===i.memoizedState&&Zl(a,i,n),Cl(i,i.return);break;case 30:break;default:Zl(a,i,n)}t=t.sibling}}function Kl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&za(n))}function $l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&za(e))}function Jl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Jl(e,t,n,r),2048&a&&gl(9,t);break;case 1:case 31:case 13:default:Jl(e,t,n,r);break;case 3:Jl(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&za(e)));break;case 12:if(2048&a){Jl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,s=i.onPostCommit;"function"===typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Eu(t,t.return,l)}}else Jl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?Jl(e,t,n,r):nc(e,t):2&i._visibility?Jl(e,t,n,r):(i._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&a&&Kl(o,t);break;case 24:Jl(e,t,n,r),2048&a&&$l(t.alternate,t)}}function tc(e,t,n,r,a){for(a=a&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,o=t,s=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:tc(i,o,s,l,a),gl(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?tc(i,o,s,l,a):nc(i,o):(u._visibility|=2,tc(i,o,s,l,a)),a&&2048&c&&Kl(o.alternate,o);break;case 24:tc(i,o,s,l,a),a&&2048&c&&$l(o.alternate,o);break;default:tc(i,o,s,l,a)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:nc(n,r),2048&a&&Kl(r.alternate,r);break;case 24:nc(n,r),2048&a&&$l(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ac(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)ic(e,t,n),e=e.sibling}function ic(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var a=Yd(r.href),i=t.querySelector(Xd(a));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=oh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=qd(r),(a=Fd.get(a))&&Jd(r,a),et(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=oh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var r=Wl;Wl=Ud(e.stateNode.containerInfo),ac(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ac(e,t,n),rc=r):ac(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function sc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ol=r,uc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:sc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:sc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):sc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ol=r,uc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Ol;){var n=Ol;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:za(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Ol=r;else e:for(n=e;null!==Ol;){var a=(r=Ol).sibling,i=r.return;if(Pl(r),r===n){Ol=null;break e}if(null!==a){a.return=i,Ol=a;break e}Ol=i}}}var dc={getCacheForType:function(e){var t=Ra(ja),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ra(ja).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,fc=0,pc=null,mc=null,gc=0,yc=0,vc=null,wc=!1,Cc=!1,bc=!1,Sc=0,Ec=0,Ac=0,Ic=0,Nc=0,_c=0,Tc=0,xc=null,Dc=null,Mc=!1,Rc=0,Oc=0,kc=1/0,Pc=null,Lc=null,Bc=0,jc=null,Fc=null,zc=0,Uc=0,Hc=null,Vc=null,Wc=0,Gc=null;function Yc(){return 0!==(2&fc)&&0!==gc?gc&-gc:null!==k.T?Hu():je()}function Xc(){if(0===_c)if(0===(536870912&gc)||da){var e=Ae;0===(3932160&(Ae<<=1))&&(Ae=262144),_c=e}else _c=536870912;return null!==(e=Ri.current)&&(e.flags|=32),_c}function qc(e,t,n){(e!==pc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(tu(e,0),$c(e,gc,_c,!1)),Re(e,n),0!==(2&fc)&&e===pc||(e===pc&&(0===(2&fc)&&(Ic|=n),4===Ec&&$c(e,gc,_c,!1)),Pu(e))}function Qc(e,t,n){if(0!==(6&fc))throw Error(o(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Te(e,t),a=r?function(e,t){var n=fc;fc|=2;var r=au(),a=iu();pc!==e||gc!==t?(Pc=null,kc=le()+500,tu(e,t)):Cc=Te(e,t);e:for(;;)try{if(0!==yc&&null!==mc){t=mc;var i=vc;t:switch(yc){case 1:yc=0,vc=null,hu(e,t,i,1);break;case 2:case 9:if(ti(i)){yc=0,vc=null,du(t);break}t=function(){2!==yc&&9!==yc||pc!==e||(yc=7),Pu(e)},i.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ti(i)?(yc=0,vc=null,du(t)):(yc=0,vc=null,hu(e,t,i,7));break;case 5:var s=null;switch(mc.tag){case 26:s=mc.memoizedState;case 5:case 27:var l=mc;if(s?ah(s):l.stateNode.complete){yc=0,vc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,fu(u)):mc=null}break t}}yc=0,vc=null,hu(e,t,i,5);break;case 6:yc=0,vc=null,hu(e,t,i,6);break;case 8:eu(),Ec=6;break e;default:throw Error(o(462))}}cu();break}catch(d){nu(e,d)}return Aa=Ea=null,k.H=r,k.A=a,fc=n,null!==mc?0:(pc=null,gc=0,Dr(),Ec)}(e,t):su(e,t,!0),i=r;;){if(0===a){Cc&&!r&&$c(e,t,0,!1);break}if(n=e.current.alternate,!i||Kc(n)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;a=xc;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,s).flags|=256),2!==(s=su(l,s,!1))){if(bc&&!c){l.errorRecoveryDisabledLanes|=i,Ic|=i,a=4;break e}i=Dc,Dc=a,null!==i&&(null===Dc?Dc=i:Dc.push.apply(Dc,i))}a=s}if(i=!1,2!==a)continue}}if(1===a){tu(e,0),$c(e,t,0,!0);break}e:{switch(r=e,i=a){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:$c(r,t,_c,!wc);break e;case 2:Dc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(a=Rc+300-le())){if($c(r,t,_c,!wc),0!==_e(r,0,!0))break e;zc=t,r.timeoutHandle=bd(Zc.bind(null,r,n,Dc,Pc,Mc,t,_c,Ic,Tc,wc,i,"Throttled",-0,0),a)}else Zc(r,n,Dc,Pc,Mc,t,_c,Ic,Tc,wc,i,null,-0,0)}break}a=su(e,t,!1),i=!1}Pu(e)}function Zc(e,t,n,r,a,i,o,s,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ic(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rt});var p=(62914560&i)===i?Rc-le():(4194048&i)===i?Oc-le():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ih&&(ih=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],i=a.transferSize,o=a.initiatorType,s=a.duration;if(i&&s&&fd(o)){for(o=0,s=a.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>s)break;var u=l.transferSize,d=l.initiatorType;u&&fd(d)&&(o+=u*((l=l.responseEnd)<s?1:(s-c)/(l-c)))}if(--r,t+=8*(i+o)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ih?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}(d,p)))return zc=i,e.cancelPendingCommit=p(mu.bind(null,e,t,i,n,r,a,o,s,l,u,d,null,h,f)),void $c(e,i,o,!c)}mu(e,t,i,n,r,a,o,s,l)}function Kc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!$n(i(),a))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $c(e,t,n,r){t&=~Nc,t&=~Ic,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var i=31-Ce(a),o=1<<i;r[i]=-1,a&=~o}0!==n&&Oe(e,n,t)}function Jc(){return 0!==(6&fc)||(Lu(0,!1),!1)}function eu(){if(null!==mc){if(0===yc)var e=mc.return;else Aa=Ea=null,oo(e=mc),si=null,li=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc=0,eu(),pc=e,mc=n=zr(e.current,null),gc=t,yc=0,vc=null,wc=!1,Cc=Te(e,t),bc=!1,Tc=_c=Nc=Ic=Ac=Ec=0,Dc=xc=null,Mc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-Ce(r),i=1<<a;t|=e[a],r&=~i}return Sc=t,Dr(),n}function nu(e,t){Hi=null,k.H=ms,t===Ka||t===Ja?(t=ii(),yc=3):t===$a?(t=ii(),yc=4):yc=t===Rs?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vc=t,null===mc&&(Ec=1,_s(e,qr(t,e.current)))}function ru(){var e=Ri.current;return null===e||((4194048&gc)===gc?null===Oi:((62914560&gc)===gc||0!==(536870912&gc))&&e===Oi)}function au(){var e=k.H;return k.H=ms,null===e?ms:e}function iu(){var e=k.A;return k.A=dc,e}function ou(){Ec=4,wc||(4194048&gc)!==gc&&null!==Ri.current||(Cc=!0),0===(134217727&Ac)&&0===(134217727&Ic)||null===pc||$c(pc,gc,_c,!1)}function su(e,t,n){var r=fc;fc|=2;var a=au(),i=iu();pc===e&&gc===t||(Pc=null,tu(e,t)),t=!1;var o=Ec;e:for(;;)try{if(0!==yc&&null!==mc){var s=mc,l=vc;switch(yc){case 8:eu(),o=6;break e;case 3:case 2:case 9:case 6:null===Ri.current&&(t=!0);var c=yc;if(yc=0,vc=null,hu(e,s,l,c),n&&Cc){o=0;break e}break;default:c=yc,yc=0,vc=null,hu(e,s,l,c)}}lu(),o=Ec;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,Aa=Ea=null,fc=r,k.H=a,k.A=i,null===mc&&(pc=null,gc=0,Dr()),o}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!oe();)uu(mc)}function uu(e){var t=ol(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Gs(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Gs(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:oo(t);default:ml(n,t),t=ol(n,t=mc=Ur(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function hu(e,t,n,r){Aa=Ea=null,oo(t),si=null,li=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&xa(t,n,a,!0),null!==(n=Ri.current)){switch(n.tag){case 31:case 13:return null===Oi?ou():null===n.alternate&&0===Ec&&(Ec=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Au(e,r,a)),!1;case 22:return n.flags|=65536,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Au(e,r,a)),!1}throw Error(o(435,n.tag))}return Au(e,r,a),ou(),!1}if(da)return null!==(t=Ri.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==pa&&ba(qr(e=Error(o(422),{cause:r}),n))):(r!==pa&&ba(qr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=qr(r,n),bi(e,a=xs(e.stateNode,r,a)),4!==Ec&&(Ec=2)),!1;var i=Error(o(520),{cause:r});if(i=qr(i,n),null===xc?xc=[i]:xc.push(i),4!==Ec&&(Ec=2),null===t)return!0;r=qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,bi(n,e=xs(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Lc||!Lc.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,Ms(a=Ds(a),e,n,r),bi(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,gc))return Ec=1,_s(e,qr(n,e.current)),void(mc=null)}catch(i){if(null!==a)throw mc=a,i;return Ec=1,_s(e,qr(n,e.current)),void(mc=null)}32768&t.flags?(da||1===r?e=!0:Cc||0!==(536870912&gc)?e=!1:(wc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ri.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,wc);e=t.return;var n=fl(t.alternate,t,Sc);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===Ec&&(Ec=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);Ec=6,mc=null}function mu(e,t,n,r,a,i,s,l,c){e.cancelPendingCommit=null;do{Cu()}while(0!==Bc);if(0!==(6&fc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,a,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Ce(n),d=1<<u;s[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Oe(e,r,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,n,i|=xr,s,l,c),e===pc&&(mc=pc=null,gc=0),Fc=t,jc=e,zc=n,Uc=i,Hc=a,Vc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ae(he,function(){return bu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=k.T,k.T=null,a=P.p,P.p=2,s=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,pd=wh,ar(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(l=s+a),h!==i||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=s),f===i&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},wh=!1,Ol=t;null!==Ol;)if(e=(t=Ol).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ol=e;else for(;null!==Ol;){switch(i=(t=Ol).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(a=e[n]).ref.impl=a.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=Es(n.type,a);e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){Eu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))xd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Ol=e;break}Ol=t.return}}(e,t)}finally{fc=s,P.p=a,k.T=r}}Bc=1,gu(),yu(),vu()}}function gu(){if(1===Bc){Bc=0;var e=jc,t=Fc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=k.T,k.T=null;var r=P.p;P.p=2;var a=fc;fc|=4;try{Gl(t,e);var i=md,o=rr(e.containerInfo),s=i.focusedElem,l=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&nr(s.ownerDocument.documentElement,s)){if(null!==l&&ar(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=s.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var y=tr(s,m),v=tr(s,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var w=d.createRange();w.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(w),f.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),f.addRange(w))}}}}for(d=[],f=s;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var C=d[s];C.element.scrollLeft=C.left,C.element.scrollTop=C.top}}wh=!!pd,md=pd=null}finally{fc=a,P.p=r,k.T=n}}e.current=t,Bc=2}}function yu(){if(2===Bc){Bc=0;var e=jc,t=Fc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=k.T,k.T=null;var r=P.p;P.p=2;var a=fc;fc|=4;try{kl(e,t.alternate,t)}finally{fc=a,P.p=r,k.T=n}}Bc=3}}function vu(){if(4===Bc||3===Bc){Bc=0,se();var e=jc,t=Fc,n=zc,r=Vc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Bc=5:(Bc=0,Fc=jc=null,wu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Lc=null),Be(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=k.T,a=P.p,P.p=2,k.T=null;try{for(var i=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];i(s.value,{componentStack:s.stack})}}finally{k.T=t,P.p=a}}0!==(3&zc)&&Cu(),Pu(e),a=e.pendingLanes,0!==(261930&n)&&0!==(42&a)?e===Gc?Wc++:(Wc=0,Gc=e):Wc=0,Lu(0,!1)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,za(t)))}function Cu(){return gu(),yu(),vu(),bu()}function bu(){if(5!==Bc)return!1;var e=jc,t=Uc;Uc=0;var n=Be(zc),r=k.T,a=P.p;try{P.p=32>n?32:n,k.T=null,n=Hc,Hc=null;var i=jc,s=zc;if(Bc=0,Fc=jc=null,zc=0,0!==(6&fc))throw Error(o(331));var l=fc;if(fc|=4,lc(i.current),ec(i,i.current,s,n),fc=l,Lu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,i)}catch(c){}return!0}finally{P.p=a,k.T=r,wu(e,t)}}function Su(e,t,n){t=qr(n,t),null!==(e=wi(e,t=xs(e.stateNode,t,2),2))&&(Re(e,2),Pu(e))}function Eu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Lc||!Lc.has(r))){e=qr(n,e),null!==(r=wi(t,n=Ds(2),2))&&(Ms(n,r,t,e),Re(r,2),Pu(r));break}}t=t.return}}function Au(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(bc=!0,a.add(n),e=Iu.bind(null,e,t,n),t.then(e,e))}function Iu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(gc&n)===n&&(4===Ec||3===Ec&&(62914560&gc)===gc&&300>le()-Rc?0===(2&fc)&&tu(e,0):Nc|=n,Tc===gc&&(Tc=0)),Pu(e)}function Nu(e,t){0===t&&(t=De()),null!==(e=Or(e,t))&&(Re(e,t),Pu(e))}function _u(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nu(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),Nu(e,n)}var xu=null,Du=null,Mu=!1,Ru=!1,Ou=!1,ku=0;function Pu(e){e!==Du&&null===e.next&&(null===Du?xu=Du=e:Du=Du.next=e),Ru=!0,Mu||(Mu=!0,Ad(function(){0!==(6&fc)?ae(ue,Bu):ju()}))}function Lu(e,t){if(!Ou&&Ru){Ou=!0;do{for(var n=!1,r=xu;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var i=0;else{var o=r.suspendedLanes,s=r.pingedLanes;i=(1<<31-Ce(42|e)+1)-1,i=201326741&(i&=a&~(o&~s))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Uu(r,i))}else i=gc,0===(3&(i=_e(r,r===pc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Te(r,i)||(n=!0,Uu(r,i));r=r.next}}while(n);Ou=!1}}function Bu(){ju()}function ju(){Ru=Mu=!1;var e=0;0!==ku&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Cd&&(Cd=e,!0);return Cd=null,!1}()&&(e=ku);for(var t=le(),n=null,r=xu;null!==r;){var a=r.next,i=Fu(r,t);0===i?(r.next=null,null===n?xu=a:n.next=a,null===a&&(Du=n)):(n=r,(0!==e||0!==(3&i))&&(Ru=!0)),r=a}0!==Bc&&5!==Bc||Lu(e,!1),0!==ku&&(ku=0)}function Fu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-Ce(i),s=1<<o,l=a[o];-1===l?0!==(s&n)&&0===(s&r)||(a[o]=xe(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}if(n=gc,n=_e(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Be(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=zu.bind(null,e),n=ae(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function zu(e,t){if(0!==Bc&&5!==Bc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Cu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=_e(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Qc(e,r,t),Fu(e,le()),null!=e.callbackNode&&e.callbackNode===n?zu.bind(null,e):null)}function Uu(e,t){if(Cu())return null;Qc(e,t,!0)}function Hu(){if(0===ku){var e=Va;0===e&&(e=Ee,0===(261888&(Ee<<=1))&&(Ee=256)),ku=e}return ku}function Vu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Mt(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Gu=0;Gu<Ar.length;Gu++){var Yu=Ar[Gu];Ir(Yu.toLowerCase(),"on"+(Yu[0].toUpperCase()+Yu.slice(1)))}Ir(gr,"onAnimationEnd"),Ir(yr,"onAnimationIteration"),Ir(vr,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(wr,"onTransitionRun"),Ir(Cr,"onTransitionStart"),Ir(br,"onTransitionCancel"),Ir(Sr,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xu));function Qu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=c;try{i(a)}catch(u){Nr(u)}a.currentTarget=null,i=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=c;try{i(a)}catch(u){Nr(u)}a.currentTarget=null,i=l}}}}function Zu(e,t){var n=t[We];void 0===n&&(n=t[We]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Ku(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Ju(e){if(!e[$u]){e[$u]=!0,tt.forEach(function(t){"selectionchange"!==t&&(qu.has(t)||Ku(t,!1,e),Ku(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$u]||(t[$u]=!0,Ku("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Nh(t)){case 2:var a=Ch;break;case 8:a=bh;break;default:a=Sh}n=a.bind(null,t,n,e),a=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function td(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===a)return;o=o.return}for(;null!==s;){if(null===(o=Ze(s)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=i=o;continue e}s=s.parentNode}}r=r.return}Ft(function(){var r=i,a=kt(n),o=[];e:{var s=Er.get(e);if(void 0!==s){var c=nn,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Cn;break;case gr:case yr:case vr:c=un;break;case Sr:c=bn;break;case"scroll":case"scrollend":c=an;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=wn;break;case"toggle":case"beforetoggle":c=En}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==s?s+"Capture":null:s;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=zt(m,f))&&d.push(nd(m,g,p)),h)break;m=m.return}0<d.length&&(s=new c(s,u,null,n,a),o.push({event:s,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ot||!(u=n.relatedTarget||n.fromElement)||!Ze(u)&&!u[Ve])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=sn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=wn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?s:$e(c),p=null==u?s:$e(u),(s=new d(g,m+"leave",c,n,a)).target=h,s.relatedTarget=p,g=null,Ze(a)===r&&((d=new d(f,m+"enter",u,n,a)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=ad,m=u,p=0,g=f=c;g;g=d(g))p++;g=0;for(var y=m;y;y=d(y))g++;for(;0<p-g;)f=d(f),p--;for(;0<g-p;)m=d(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){d=f;break e}f=d(f),m=d(m)}d=null}else d=null;null!==c&&id(o,s,c,d,!1),null!==u&&null!==h&&id(o,h,u,d,!0)}if("select"===(c=(s=r?$e(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var v=Un;else if(Pn(s))if(Hn)v=Kn;else{v=Qn;var w=qn}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Tt(r.elementType)&&(v=Un):v=Zn;switch(v&&(v=v(e,r))?Ln(o,v,n,a):(w&&w(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&Ct(s,"number",s.value)),w=r?$e(r):window,e){case"focusin":(Pn(w)||"true"===w.contentEditable)&&(or=w,sr=r,lr=null);break;case"focusout":lr=sr=or=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(o,n,a);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":ur(o,n,a)}var C;if(In)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else On?Mn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Tn&&"ko"!==n.locale&&(On||"onCompositionStart"!==b?"onCompositionEnd"===b&&On&&(C=Xt()):(Gt="value"in(Wt=a)?Wt.value:Wt.textContent,On=!0)),0<(w=rd(r,b)).length&&(b=new hn(b,e,null,n,a),o.push({event:b,listeners:w}),C?b.data=C:null!==(C=Rn(n))&&(b.data=C))),(C=_n?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(Dn=!0,xn);case"textInput":return(e=t.data)===xn&&Dn?null:e;default:return null}}(e,n):function(e,t){if(On)return"compositionend"===e||!In&&Mn(e,t)?(e=Xt(),Yt=Gt=Wt=null,On=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=rd(r,"onBeforeInput")).length&&(w=new hn("onBeforeInput","beforeinput",null,n,a),o.push({event:w,listeners:b}),w.data=C)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var i=Vu((a[He]||null).action),o=r.submitter;o&&null!==(t=(t=o[He]||null)?Vu(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var s=new nn("action","action",null,r,a);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==ku){var e=o?Wu(a,o):new FormData(a);ts(n,{pending:!0,data:e,method:a.method,action:i},null,e)}}else"function"===typeof i&&(s.preventDefault(),e=o?Wu(a,o):new FormData(a),ts(n,{pending:!0,data:e,method:a.method,action:i},i,e))},currentTarget:a}]})}}(o,e,r,n,a)}Qu(o,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=zt(e,n))&&r.unshift(nd(e,a,i)),null!=(a=zt(e,t))&&r.push(nd(e,a,i))),3===e.tag)return r;e=e.return}return[]}function ad(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===c||(l=c,a?null!=(c=zt(n,i))&&o.unshift(nd(n,c,l)):a||null!=(c=zt(n,i))&&o.push(nd(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var od=/\r\n?/g,sd=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(od,"\n").replace(sd,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,r,a,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||At(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&At(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":_t(e,r,i);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Mt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&ud(e,t,"name",a.name,a,null),ud(e,t,"formEncType",a.formEncType,a,null),ud(e,t,"formMethod",a.formMethod,a,null),ud(e,t,"formTarget",a.formTarget,a,null)):(ud(e,t,"encType",a.encType,a,null),ud(e,t,"method",a.method,a,null),ud(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Mt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"onScroll":null!=r&&Zu("scroll",e);break;case"onScrollEnd":null!=r&&Zu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Mt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Zu("beforetoggle",e),Zu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=xt.get(n)||n,r)}}function dd(e,t,n,r,a,i){switch(n){case"style":_t(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?At(e,r):("number"===typeof r||"bigint"===typeof r)&&At(e,""+r);break;case"onScroll":null!=r&&Zu("scroll",e);break;case"onScrollEnd":null!=r&&Zu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(i=null!=(i=e[He]||null)?i[n]:null)&&e.removeEventListener(t,i,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zu("error",e),Zu("load",e);var r,a=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ud(e,t,r,s,n,null)}}return i&&ud(e,t,"srcSet",n.srcSet,n,null),void(a&&ud(e,t,"src",n.src,n,null));case"input":Zu("invalid",e);var l=r=s=i=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(null!=d)switch(a){case"name":i=d;break;case"type":s=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:ud(e,t,a,d,n,null)}}return void wt(e,r,l,c,u,s,i,!1);case"select":for(i in Zu("invalid",e),a=s=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:ud(e,t,i,l,n,null)}return t=r,n=s,e.multiple=!!a,void(null!=t?bt(e,!!a,t,!1):null!=n&&bt(e,!!a,n,!0));case"textarea":for(s in Zu("invalid",e),r=i=a=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":a=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:ud(e,t,s,l,n,null)}return void Et(e,a,i,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else ud(e,t,c,a,n,null);return;case"dialog":Zu("beforetoggle",e),Zu("toggle",e),Zu("cancel",e),Zu("close",e);break;case"iframe":case"object":Zu("load",e);break;case"video":case"audio":for(a=0;a<Xu.length;a++)Zu(Xu[a],e);break;case"image":Zu("error",e),Zu("load",e);break;case"details":Zu("toggle",e);break;case"embed":case"source":case"link":Zu("error",e),Zu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ud(e,t,u,a,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(a=n[d])&&dd(e,t,d,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(a=n[l])&&ud(e,t,l,a,n,null))}function fd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,md=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Cd=null;var bd="function"===typeof setTimeout?setTimeout:void 0,Sd="function"===typeof clearTimeout?clearTimeout:void 0,Ed="function"===typeof Promise?Promise:void 0,Ad="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Ed?function(e){return Ed.resolve(null).then(e).catch(Id)}:bd;function Id(e){setTimeout(function(){throw e})}function Nd(e){return"head"===e}function _d(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)||"/&"===n){if(0===r)return e.removeChild(a),void Wh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)jd(e.ownerDocument.documentElement);else if("head"===n){jd(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var o=i.nextSibling,s=i.nodeName;i[qe]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=o}}else"body"===n&&jd(e.ownerDocument.body);n=a}while(n);Wh(t)}function Td(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function xd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":xd(n),Qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Dd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Od(e.nextSibling)))return null}return e}function Md(e){return"$?"===e.data||"$~"===e.data}function Rd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Od(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var kd=null;function Pd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Od(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Bd(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function jd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qe(e)}var Fd=new Map,zd=new Set;function Ud(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Hd=P.d;P.d={f:function(){var e=Hd.f(),t=Jc();return e||t},r:function(e){var t=Ke(e);null!==t&&5===t.tag&&"form"===t.type?rs(t):Hd.r(e)},D:function(e){Hd.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){Hd.C(e,t),Wd("preconnect",e,t)},L:function(e,t,n){Hd.L(e,t,n);var r=Vd;if(r&&e&&t){var a='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+yt(n.imageSizes)+'"]')):a+='[href="'+yt(e)+'"]';var i=a;switch(t){case"style":i=Yd(e);break;case"script":i=Qd(e)}Fd.has(i)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Fd.set(i,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Xd(i))||"script"===t&&r.querySelector(Zd(i))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Hd.m(e,t);var n=Vd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',i=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Qd(e)}if(!Fd.has(i)&&(e=f({rel:"modulepreload",href:e},t),Fd.set(i,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Zd(i)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Hd.X(e,t);var n=Vd;if(n&&e){var r=Je(n).hoistableScripts,a=Qd(e),i=r.get(a);i||((i=n.querySelector(Zd(a)))||(e=f({src:e,async:!0},t),(t=Fd.get(a))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}},S:function(e,t,n){Hd.S(e,t,n);var r=Vd;if(r&&e){var a=Je(r).hoistableStyles,i=Yd(e);t=t||"default";var o=a.get(i);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Xd(i)))s.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Fd.get(i))&&Jd(e,n);var l=o=r.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,$d(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:s},a.set(i,o)}}},M:function(e,t){Hd.M(e,t);var n=Vd;if(n&&e){var r=Je(n).hoistableScripts,a=Qd(e),i=r.get(a);i||((i=n.querySelector(Zd(a)))||(e=f({src:e,async:!0,type:"module"},t),(t=Fd.get(a))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}};var Vd="undefined"===typeof document?null:document;function Wd(e,t,n){var r=Vd;if(r&&"string"===typeof t&&t){var a=yt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),zd.has(a)||(zd.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Gd(e,t,n,r){var a,i,s,l,c=(c=Y.current)?Ud(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Yd(n.href),(r=(n=Je(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Yd(n.href);var u=Je(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Xd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Fd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fd.set(e,n),u||(a=c,i=e,s=n,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=a.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),hd(i,"link",s),et(i),a.head.appendChild(i))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Qd(n),(r=(n=Je(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Yd(e){return'href="'+yt(e)+'"'}function Xd(e){return'link[rel="stylesheet"]['+e+"]"}function qd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Qd(e){return'[src="'+yt(e)+'"]'}function Zd(e){return"script[async]"+e}function Kd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var a=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",a),$d(r,n.precedence,e),t.instance=r;case"stylesheet":a=Yd(n.href);var i=e.querySelector(Xd(a));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=qd(n),(a=Fd.get(a))&&Jd(r,a),et(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),hd(i,"link",r),t.state.loading|=4,$d(i,n.precedence,e),t.instance=i;case"script":return i=Qd(n.src),(a=e.querySelector(Zd(i)))?(t.instance=a,et(a),a):(r=n,(a=Fd.get(i))&&eh(r=f({},n),a),et(a=(e=e.ownerDocument||e).createElement("script")),hd(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,$d(r,n.precedence,e));return t.instance}function $d(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,i=a,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)i=s;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,a=th=new Map;a.set(n,r)}else(r=(a=th).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var i=n[a];if(!(i[qe]||i[Ue]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var s=r.get(o);s?s.push(i):r.set(o,[i])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ah(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ih=0;function oh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var sh=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,sh=new Map,t.forEach(ch,e),sh=null,oh.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=sh.get(e);if(n)var r=n.get(null);else{n=new Map,sh.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(a=t.instance).getAttribute("data-precedence"),(i=n.get(o)||r)===r&&n.set(null,a),n.set(o,a),this.count++,r=oh.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var uh={$$typeof:b,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function dh(e,t,n,r,a,i,o,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,r,a,i,o,s,l,c,u,d){return e=new dh(e,t,n,o,l,c,u,d,s),t=1,!0===i&&(t|=24),i=jr(3,null,null,t),e.current=i,i.stateNode=e,(t=Fa()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},gi(i),e}function fh(e){return e?e=Lr:Lr}function ph(e,t,n,r,a,i){a=fh(a),null===r.context?r.context=a:r.pendingContext=a,(r=vi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=wi(e,r,t))&&(qc(n,0,t),Ci(n,e,t))}function mh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){mh(e,t),(e=e.alternate)&&mh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Or(e,67108864);null!==t&&qc(t,0,67108864),gh(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=Yc(),n=Or(e,t=Le(t));null!==n&&qc(n,0,t),gh(e,t)}}var wh=!0;function Ch(e,t,n,r){var a=k.T;k.T=null;var i=P.p;try{P.p=2,Sh(e,t,n,r)}finally{P.p=i,k.T=a}}function bh(e,t,n,r){var a=k.T;k.T=null;var i=P.p;try{P.p=8,Sh(e,t,n,r)}finally{P.p=i,k.T=a}}function Sh(e,t,n,r){if(wh){var a=Eh(r);if(null===a)td(e,t,r,Ah,n),Ph(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Th=Lh(Th,e,t,n,r,a),!0;case"dragenter":return xh=Lh(xh,e,t,n,r,a),!0;case"mouseover":return Dh=Lh(Dh,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Mh.set(i,Lh(Mh.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Rh.set(i,Lh(Rh.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Ph(e,r),4&t&&-1<kh.indexOf(e)){for(;null!==a;){var i=Ke(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=Ne(i.pendingLanes);if(0!==o){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-Ce(o);s.entanglements[1]|=l,o&=~l}Pu(i),0===(6&fc)&&(kc=le()+500,Lu(0,!1))}}break;case 31:case 13:null!==(s=Or(i,2))&&qc(s,0,2),Jc(),gh(i,2)}if(null===(i=Eh(r))&&td(e,t,r,Ah,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else td(e,t,r,null,n)}}function Eh(e){return Ih(e=kt(e))}var Ah=null;function Ih(e){if(Ah=null,null!==(e=Ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ah=e,null}function Nh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var _h=!1,Th=null,xh=null,Dh=null,Mh=new Map,Rh=new Map,Oh=[],kh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ph(e,t){switch(e){case"focusin":case"focusout":Th=null;break;case"dragenter":case"dragleave":xh=null;break;case"mouseover":case"mouseout":Dh=null;break;case"pointerover":case"pointerout":Mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(t.pointerId)}}function Lh(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=Ke(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Bh(e){var t=Ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Fe(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Fe(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Eh(e.nativeEvent);if(null!==n)return null!==(t=Ke(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ot=r,n.target.dispatchEvent(r),Ot=null,t.shift()}return!0}function Fh(e,t,n){jh(e)&&n.delete(t)}function zh(){_h=!1,null!==Th&&jh(Th)&&(Th=null),null!==xh&&jh(xh)&&(xh=null),null!==Dh&&jh(Dh)&&(Dh=null),Mh.forEach(Fh),Rh.forEach(Fh)}function Uh(e,t){e.blockedOn===t&&(e.blockedOn=null,_h||(_h=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zh)))}var Hh=null;function Vh(e){Hh!==e&&(Hh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hh===e&&(Hh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===Ih(r||n))continue;break}var i=Ke(n);null!==i&&(e.splice(t,3),t-=3,ts(i,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Wh(e){function t(t){return Uh(t,e)}null!==Th&&Uh(Th,e),null!==xh&&Uh(xh,e),null!==Dh&&Uh(Dh,e),Mh.forEach(t),Rh.forEach(t);for(var n=0;n<Oh.length;n++){var r=Oh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Oh.length&&null===(n=Oh[0]).blockedOn;)Bh(n),null===n.blockedOn&&Oh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],i=n[r+1],o=a[He]||null;if("function"===typeof i)o||Vh(n);else if(o){var s=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[He]||null)s=o.formAction;else if(null!==Ih(a))continue}else s=o.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Vh(n)}}}function Gh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function Yh(e){this._internalRoot=e}function Xh(e){this._internalRoot=e}Xh.prototype.render=Yh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));ph(t.current,Yc(),e,t,null,null)},Xh.prototype.unmount=Yh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),Jc(),t[Ve]=null}},Xh.prototype.unstable_scheduleHydration=function(e){if(e){var t=je();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Oh.length&&0!==t&&t<Oh[n].priority;n++);Oh.splice(n,0,e),0===n&&Bh(e)}};var qh=a.version;if("19.2.1"!==qh)throw Error(o(527,qh,"19.2.1"));P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return d(a),e;if(i===r)return d(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,c=a.child;c;){if(c===n){s=!0,n=a,r=i;break}if(c===r){s=!0,r=a,n=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===n){s=!0,n=i,r=a;break}if(c===r){s=!0,r=i,n=a;break}c=c.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Qh={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{ye=Zh.inject(Qh),ve=Zh}catch($h){}}t.createRoot=function(e,t){if(!s(e))throw Error(o(299));var n=!1,r="",a=As,i=Is,l=Ns;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,a,i,l,Gh),e[Ve]=t.current,Ju(e),new Yh(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(o(299));var r=!1,a="",i=As,l=Is,c=Ns,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,a,u,i,l,c,Gh)).context=fh(null),n=t.current,(a=vi(r=Le(r=Yc()))).callback=null,wi(n,a,r),n=r,t.current.lanes=n,Re(t,n),Pu(t),e[Ve]=t.current,Ju(e),new Xh(t)},t.version="19.2.1"},43:(e,t,n)=>{"use strict";e.exports=n(288)},72:function(e,t,n){!function(e){"use strict";function t(e){return null===e||void 0===e}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function o(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var s,l=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),i(r,n.prototype),o(r),r}return a(t,e),t}(Error);class c extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}c.kind="Exception";class u extends c{}u.kind="ArgumentException";class d extends c{}d.kind="IllegalArgumentException";class h{constructor(e){if(this.binarizer=e,null===e)throw new d("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const a=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new h(this.binarizer.createBinarizer(a))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new h(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new h(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class f extends c{static getChecksumInstance(){return new f}}f.kind="ChecksumException";class p{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class m{static arraycopy(e,t,n,r,a){for(;a--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class g extends c{}g.kind="IndexOutOfBoundsException";class y extends g{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}y.kind="ArrayIndexOutOfBoundsException";class v{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){v.rangeCheck(e.length,t,n);for(let a=t;a<n;a++)e[a]=r}static rangeCheck(e,t,n){if(t>n)throw new d("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new y(t);if(n>e)throw new y(n)}static asList(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}static create(e,t,n){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,a=new Int32Array(r);return m.arraycopy(e,t,a,0,r),a}static binarySearch(e,t,n){void 0===n&&(n=v.numberComparator);let r=0,a=e.length-1;for(;r<=a;){const i=a+r>>1,o=n(t,e[i]);if(o>0)r=i+1;else{if(!(o<0))return i;a=i-1}}return-r-1}static numberComparator(e,t){return e-t}}class w{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}w.MIN_VALUE_32_BITS=-2147483648,w.MAX_VALUE=Number.MAX_SAFE_INTEGER;class C{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?C.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=C.makeArray(e);m.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),a=n[r];a&=~((1<<(31&e))-1);const i=n.length;for(;0===a;){if(++r===i)return t;a=n[r]}const o=32*r+w.numberOfTrailingZeros(a);return o>t?t:o}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),a=~n[r];a&=~((1<<(31&e))-1);const i=n.length;for(;0===a;){if(++r===i)return t;a=~n[r]}const o=32*r+w.numberOfTrailingZeros(a);return o>t?t:o}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new d;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),a=this.bits;for(let i=n;i<=r;i++){const o=(2<<(i<r?31:31&t))-(1<<(i>n?0:31&e));a[i]|=o}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new d;if(t===e)return!0;t--;const r=Math.floor(e/32),a=Math.floor(t/32),i=this.bits;for(let o=r;o<=a;o++){const s=(2<<(o<a?31:31&t))-(1<<(o>r?0:31&e))&4294967295;if((i[o]&s)!==(n?s:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new d("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new d("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let a=0;a<r;a++){let r=0;for(let t=0;t<8;t++)this.get(e)&&(r|=1<<7-t),e++;t[n+a]=r}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let a=0;a<n;a++){let n=r[a];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-a]=n}if(this.size!==32*n){const t=32*n-this.size;let r=e[0]>>>t;for(let a=1;a<n;a++){const n=e[a];r|=n<<32-t,e[a-1]=r,r=n>>>t}e[n-1]=r}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof C))return!1;const t=e;return this.size===t.size&&v.equals(this.bits,t.bits)}hashCode(){return 31*this.size+v.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new C(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(s||(s={}));var b,S=s;class E extends c{static getFormatInstance(){return new E}}E.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(b||(b={}));class A{constructor(e,t,n){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t;for(var r=arguments.length,a=new Array(r>3?r-3:0),i=3;i<r;i++)a[i-3]=arguments[i];this.otherEncodingNames=a,A.VALUE_IDENTIFIER_TO_ECI.set(e,this),A.NAME_TO_ECI.set(n,this);const o=this.values;for(let s=0,l=o.length;s!==l;s++){const e=o[s];A.VALUES_TO_ECI.set(e,this)}for(const s of a)A.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new E("incorect value");const t=A.VALUES_TO_ECI.get(e);if(void 0===t)throw new E("incorect value");return t}static getCharacterSetECIByName(e){const t=A.NAME_TO_ECI.get(e);if(void 0===t)throw new E("incorect value");return t}equals(e){if(!(e instanceof A))return!1;const t=e;return this.getName()===t.getName()}}A.VALUE_IDENTIFIER_TO_ECI=new Map,A.VALUES_TO_ECI=new Map,A.NAME_TO_ECI=new Map,A.Cp437=new A(b.Cp437,Int32Array.from([0,2]),"Cp437"),A.ISO8859_1=new A(b.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),A.ISO8859_2=new A(b.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),A.ISO8859_3=new A(b.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),A.ISO8859_4=new A(b.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),A.ISO8859_5=new A(b.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),A.ISO8859_6=new A(b.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),A.ISO8859_7=new A(b.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),A.ISO8859_8=new A(b.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),A.ISO8859_9=new A(b.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),A.ISO8859_10=new A(b.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),A.ISO8859_11=new A(b.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),A.ISO8859_13=new A(b.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),A.ISO8859_14=new A(b.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),A.ISO8859_15=new A(b.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),A.ISO8859_16=new A(b.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),A.SJIS=new A(b.SJIS,20,"SJIS","Shift_JIS"),A.Cp1250=new A(b.Cp1250,21,"Cp1250","windows-1250"),A.Cp1251=new A(b.Cp1251,22,"Cp1251","windows-1251"),A.Cp1252=new A(b.Cp1252,23,"Cp1252","windows-1252"),A.Cp1256=new A(b.Cp1256,24,"Cp1256","windows-1256"),A.UnicodeBigUnmarked=new A(b.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),A.UTF8=new A(b.UTF8,26,"UTF8","UTF-8"),A.ASCII=new A(b.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),A.Big5=new A(b.Big5,28,"Big5"),A.GB18030=new A(b.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),A.EUC_KR=new A(b.EUC_KR,30,"EUC_KR","EUC-KR");class I extends c{}I.kind="UnsupportedOperationException";class N{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!N.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof A?e:A.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(N.isDecodeFallbackSupported(n)){let t="";for(let n=0,r=e.length;n<r;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+="%"+r}return decodeURIComponent(t)}if(n.equals(A.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new I("Encoding ".concat(this.encodingName(t)," not supported by fallback."))}static isDecodeFallbackSupported(e){return e.equals(A.UTF8)||e.equals(A.ISO8859_1)||e.equals(A.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)}}class _{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t?t.getName():this.ISO88591;return N.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(S.CHARACTER_SET))return t.get(S.CHARACTER_SET).toString();const n=e.length;let r=!0,a=!0,i=!0,o=0,s=0,l=0,c=0,u=0,d=0,h=0,f=0,p=0,m=0,g=0;const y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let v=0;v<n&&(r||a||i);v++){const t=255&e[v];i&&(o>0?0===(128&t)?i=!1:o--:0!==(128&t)&&(0===(64&t)?i=!1:(o++,0===(32&t)?s++:(o++,0===(16&t)?l++:(o++,0===(8&t)?c++:i=!1))))),r&&(t>127&&t<160?r=!1:t>159&&(t<192||215===t||247===t)&&g++),a&&(u>0?t<64||127===t||t>252?a=!1:u--:128===t||160===t||t>239?a=!1:t>160&&t<224?(d++,f=0,h++,h>p&&(p=h)):t>127?(u++,h=0,f++,f>m&&(m=f)):(h=0,f=0))}return i&&o>0&&(i=!1),a&&u>0&&(a=!1),i&&(y||s+l+c>0)?_.UTF8:a&&(_.ASSUME_SHIFT_JIS||p>=3||m>=3)?_.SHIFT_JIS:r&&a?2===p&&2===d||10*g>=n?_.SHIFT_JIS:_.ISO88591:r?_.ISO88591:a?_.SHIFT_JIS:i?_.UTF8:_.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let a=-1;function i(e,t,r,i,o,s){if("%%"===e)return"%";if(void 0===n[++a])return;e=i?parseInt(i.substr(1)):void 0;let l,c=o?parseInt(o.substr(1)):void 0;switch(s){case"s":l=n[a];break;case"c":l=n[a][0];break;case"f":l=parseFloat(n[a]).toFixed(e);break;case"p":l=parseFloat(n[a]).toPrecision(e);break;case"e":l=parseFloat(n[a]).toExponential(e);break;case"x":l=parseInt(n[a]).toString(c||16);break;case"d":l=parseFloat(parseInt(n[a],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(r),d=r&&r[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==t?l+d:d+l;return l}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)}static getBytes(e,t){return N.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}_.SHIFT_JIS=A.SJIS.getName(),_.GB2312="GB2312",_.ISO88591=A.ISO8859_1.getName(),_.EUC_JP="EUC_JP",_.UTF8=A.UTF8.getName(),_.PLATFORM_DEFAULT_ENCODING=_.UTF8,_.ASSUME_SHIFT_JIS=!1;class T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=_.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class x{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new d("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new x(n,t);for(let a=0;a<t;a++){const t=e[a];for(let e=0;e<n;e++)t[e]&&r.set(e,a)}return r}static parseFromString(e,t,n){if(null===e)throw new d("stringRepresentation cannot be null");const r=new Array(e.length);let a=0,i=0,o=-1,s=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(a>i){if(-1===o)o=a-i;else if(a-i!==o)throw new d("row lengths do not match");i=a,s++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,r[a]=!0,a++;else{if(e.substring(l,l+n.length)!==n)throw new d("illegal character encountered: "+e.substring(l));l+=n.length,r[a]=!1,a++}if(a>i){if(-1===o)o=a-i;else if(a-i!==o)throw new d("row lengths do not match");s++}const c=new x(o,s);for(let u=0;u<a;u++)r[u]&&c.set(Math.floor(u%o),Math.floor(u/o));return c}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new d("input matrix dimensions do not match");const t=new C(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let a=0,i=this.height;a<i;a++){const i=a*n,o=e.getRow(a,t).getBitArray();for(let e=0;e<n;e++)r[i+e]^=o[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new d("Left and top must be nonnegative");if(r<1||n<1)throw new d("Height and width must be at least 1");const a=e+n,i=t+r;if(i>this.height||a>this.width)throw new d("The region must fit inside the matrix");const o=this.rowSize,s=this.bits;for(let l=t;l<i;l++){const t=l*o;for(let n=e;n<a;n++)s[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new C(this.width):t.clear();const n=this.rowSize,r=this.bits,a=e*n;for(let i=0;i<n;i++)t.setBulk(32*i,r[a+i]);return t}setRow(e,t){m.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new C(e),r=new C(e);for(let a=0,i=Math.floor((t+1)/2);a<i;a++)n=this.getRow(a,n),r=this.getRow(t-1-a,r),n.reverse(),r.reverse(),this.setRow(a,r),this.setRow(t-1-a,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let a=e,i=t,o=-1,s=-1;for(let l=0;l<t;l++)for(let e=0;e<n;e++){const t=r[l*n+e];if(0!==t){if(l<i&&(i=l),l>s&&(s=l),32*e<a){let n=0;for(;0===(t<<31-n&4294967295);)n++;32*e+n<a&&(a=32*e+n)}if(32*e+31>o){let n=31;for(;t>>>n===0;)n--;32*e+n>o&&(o=32*e+n)}}}return o<a||s<i?null:Int32Array.from([a,i,o-a+1,s-i+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const r=n/e;let a=n%e*32;const i=t[n];let o=0;for(;0===(i<<31-o&4294967295);)o++;return a+=o,Int32Array.from([a,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const r=Math.floor(n/e);let a=32*Math.floor(n%e);const i=t[n];let o=31;for(;i>>>o===0;)o--;return a+=o,Int32Array.from([a,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof x))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&v.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+v.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new T;for(let a=0,i=this.height;a<i;a++){for(let n=0,i=this.width;n<i;n++)r.append(this.get(n,a)?e:t);r.append(n)}return r.toString()}clone(){return new x(this.width,this.height,this.rowSize,this.bits.slice())}}class D extends c{static getNotFoundInstance(){return new D}}D.kind="NotFoundException";class M extends p{constructor(e){super(e),this.luminances=M.EMPTY,this.buckets=new Int32Array(M.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();void 0===t||null===t||t.getSize()<r?t=new C(r):t.clear(),this.initArrays(r);const a=n.getRow(e,this.luminances),i=this.buckets;for(let s=0;s<r;s++)i[(255&a[s])>>M.LUMINANCE_SHIFT]++;const o=M.estimateBlackPoint(i);if(r<3)for(let s=0;s<r;s++)(255&a[s])<o&&t.set(s);else{let e=255&a[0],n=255&a[1];for(let i=1;i<r-1;i++){const r=255&a[i+1];(4*n-e-r)/2<o&&t.set(i),e=n,n=r}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new x(t,n);this.initArrays(t);const a=this.buckets;for(let s=1;s<5;s++){const r=Math.floor(n*s/5),i=e.getRow(r,this.luminances),o=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<o;e++)a[(255&i[e])>>M.LUMINANCE_SHIFT]++}const i=M.estimateBlackPoint(a),o=e.getMatrix();for(let s=0;s<n;s++){const e=s*t;for(let n=0;n<t;n++)(255&o[e+n])<i&&r.set(n,s)}return r}createBinarizer(e){return new M(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<M.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,a=0;for(let c=0;c<t;c++)e[c]>a&&(r=c,a=e[c]),e[c]>n&&(n=e[c]);let i=0,o=0;for(let c=0;c<t;c++){const t=c-r,n=e[c]*t*t;n>o&&(i=c,o=n)}if(r>i){const e=r;r=i,i=e}if(i-r<=t/16)throw new D;let s=i-1,l=-1;for(let c=i-1;c>r;c--){const t=c-r,a=t*t*(i-c)*(n-e[c]);a>l&&(s=c,l=a)}return s<<M.LUMINANCE_SHIFT}}M.LUMINANCE_BITS=5,M.LUMINANCE_SHIFT=8-M.LUMINANCE_BITS,M.LUMINANCE_BUCKETS=1<<M.LUMINANCE_BITS,M.EMPTY=Uint8ClampedArray.from([0]);class R extends M{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=R.MINIMUM_DIMENSION&&n>=R.MINIMUM_DIMENSION){const r=e.getMatrix();let a=t>>R.BLOCK_SIZE_POWER;0!==(t&R.BLOCK_SIZE_MASK)&&a++;let i=n>>R.BLOCK_SIZE_POWER;0!==(n&R.BLOCK_SIZE_MASK)&&i++;const o=R.calculateBlackPoints(r,a,i,t,n),s=new x(t,n);R.calculateThresholdForBlock(r,a,i,t,n,o,s),this.matrix=s}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new R(e)}static calculateThresholdForBlock(e,t,n,r,a,i,o){const s=a-R.BLOCK_SIZE,l=r-R.BLOCK_SIZE;for(let c=0;c<n;c++){let a=c<<R.BLOCK_SIZE_POWER;a>s&&(a=s);const u=R.cap(c,2,n-3);for(let n=0;n<t;n++){let s=n<<R.BLOCK_SIZE_POWER;s>l&&(s=l);const c=R.cap(n,2,t-3);let d=0;for(let e=-2;e<=2;e++){const t=i[u+e];d+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const h=d/25;R.thresholdBlock(e,s,a,h,r,o)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,a,i){for(let o=0,s=n*a+t;o<R.BLOCK_SIZE;o++,s+=a)for(let a=0;a<R.BLOCK_SIZE;a++)(255&e[s+a])<=r&&i.set(t+a,n+o)}static calculateBlackPoints(e,t,n,r,a){const i=a-R.BLOCK_SIZE,o=r-R.BLOCK_SIZE,s=new Array(n);for(let l=0;l<n;l++){s[l]=new Int32Array(t);let n=l<<R.BLOCK_SIZE_POWER;n>i&&(n=i);for(let a=0;a<t;a++){let t=a<<R.BLOCK_SIZE_POWER;t>o&&(t=o);let i=0,c=255,u=0;for(let a=0,o=n*r+t;a<R.BLOCK_SIZE;a++,o+=r){for(let t=0;t<R.BLOCK_SIZE;t++){const n=255&e[o+t];i+=n,n<c&&(c=n),n>u&&(u=n)}if(u-c>R.MIN_DYNAMIC_RANGE)for(a++,o+=r;a<R.BLOCK_SIZE;a++,o+=r)for(let t=0;t<R.BLOCK_SIZE;t++)i+=255&e[o+t]}let d=i>>2*R.BLOCK_SIZE_POWER;if(u-c<=R.MIN_DYNAMIC_RANGE&&(d=c/2,l>0&&a>0)){const e=(s[l-1][a]+2*s[l][a-1]+s[l-1][a-1])/4;c<e&&(d=e)}s[l][a]=d}}return s}}R.BLOCK_SIZE_POWER=3,R.BLOCK_SIZE=1<<R.BLOCK_SIZE_POWER,R.BLOCK_SIZE_MASK=R.BLOCK_SIZE-1,R.MINIMUM_DIMENSION=5*R.BLOCK_SIZE,R.MIN_DYNAMIC_RANGE=24;class O{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new I("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new I("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new I("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new T;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&r[e];let a;a=n<64?"#":n<128?"+":n<192?".":" ",t.append(a)}t.append("\n")}return t.toString()}}class k extends O{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let a=0;a<r;a++)n[a]=255-(255&n[a]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new k(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new k(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new k(this.delegate.rotateCounterClockwise45())}}class P extends O{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=P.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return P.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let a=0,i=0,o=e.length;a<o;a+=4,i++){let t;t=0===e[a+3]?255:306*e[a]+601*e[a+1]+117*e[a+2]+512>>10,r[i]=t}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*P.DEGREE_TO_RADIANS,a=this.canvas.width,i=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(r))*a+Math.abs(Math.sin(r))*i),s=Math.ceil(Math.abs(Math.sin(r))*a+Math.abs(Math.cos(r))*i);return t.width=o,t.height=s,n.translate(o/2,s/2),n.rotate(r),n.drawImage(this.canvas,a/-2,i/-2),this.buffer=P.makeBufferFromCanvasImageData(t),this}invert(){return new k(this)}}P.DEGREE_TO_RADIANS=Math.PI/180;class L{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var B,j=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,r){function a(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function o(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){e.done?n(e.value):a(e.value).then(o,s)}l((r=r.apply(e,t||[])).next())})};class F{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return j(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const r={deviceId:n.deviceId||n.id,label:n.label||"Video device ".concat(t.length+1),kind:e,groupId:n.groupId};t.push(r)}return t})}getVideoInputDevices(){return j(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new L(e.deviceId,e.label))})}findDeviceById(e){return j(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return j(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return j(this,void 0,void 0,function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return j(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return j(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return j(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return j(this,void 0,void 0,function*(){let r;r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const a={video:r};return yield this.decodeFromConstraints(a,t,n)})}decodeFromConstraints(e,t,n){return j(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return j(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return j(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return j(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new u("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new u("element with id '".concat(e,"' must be an ").concat(t," element"));return n}decodeFromImage(e,t){if(!e&&!t)throw new u("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new u("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new u("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new u("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return j(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return j(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const r=(a,i)=>{if(this._stopAsyncDecode)return i(new D("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{a(this.decode(e))}catch(o){if(t&&o instanceof D||(o instanceof f||o instanceof E)&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,a,i);i(o)}};return new Promise((e,t)=>r(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r),(r instanceof f||r instanceof E||r instanceof D)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new P(t),r=new R(n);return new h(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class z{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:m.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=a,this.timestamp=i,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=a,this.resultMetadata=null,this.timestamp=void 0===i||null===i?m.currentTimeMillis():i}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);m.arraycopy(t,0,n,0,t.length),m.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(B||(B={}));var U,H=B;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(U||(U={}));var V,W,G,Y,X,q,Q=U;class Z{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=i,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class K{exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class ${constructor(e,t){if(0===t.length)throw new d;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),m.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,r=t.length;e!==r;e++){const r=t[e];n=K.addOrSubtract(n,r)}return n}n=t[0];const r=t.length,a=this.field;for(let i=1;i<r;i++)n=K.addOrSubtract(a.multiply(e,n),t[i]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let r=new Int32Array(n.length);const a=n.length-t.length;m.arraycopy(n,0,r,0,a);for(let i=a;i<n.length;i++)r[i]=K.addOrSubtract(t[i-a],n[i]);return new $(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,a=r.length,i=new Int32Array(n+a-1),o=this.field;for(let s=0;s<n;s++){const e=t[s];for(let t=0;t<a;t++)i[s+t]=K.addOrSubtract(i[s+t],o.multiply(e,r[t]))}return new $(o,i)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),a=this.coefficients;for(let i=0;i<t;i++)r[i]=n.multiply(a[i],e);return new $(n,r)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return this.field.getZero();const n=this.coefficients,r=n.length,a=new Int32Array(r+e),i=this.field;for(let o=0;o<r;o++)a[o]=i.multiply(n[o],t);return new $(i,a)}divide(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new d("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const a=e.getCoefficient(e.getDegree()),i=t.inverse(a);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const a=r.getDegree()-e.getDegree(),o=t.multiply(r.getCoefficient(r.getDegree()),i),s=e.multiplyByMonomial(a,o),l=t.buildMonomial(a,o);n=n.addOrSubtract(l),r=r.addOrSubtract(s)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class J extends c{}J.kind="ArithmeticException";class ee extends K{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let a=1;for(let o=0;o<t;o++)r[o]=a,a*=2,a>=t&&(a^=e,a&=t-1);this.expTable=r;const i=new Int32Array(t);for(let o=0;o<t-1;o++)i[r[o]]=o;this.logTable=i,this.zero=new $(this,Int32Array.from([0])),this.one=new $(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new $(this,n)}inverse(e){if(0===e)throw new J;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+w.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends c{}te.kind="ReedSolomonException";class ne extends c{}ne.kind="IllegalStateException";class re{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new $(n,e),a=new Int32Array(t);let i=!0;for(let h=0;h<t;h++){const e=r.evaluateAt(n.exp(h+n.getGeneratorBase()));a[a.length-1-h]=e,0!==e&&(i=!1)}if(i)return;const o=new $(n,a),s=this.runEuclideanAlgorithm(n.buildMonomial(t,1),o,t),l=s[0],c=s[1],u=this.findErrorLocations(l),d=this.findErrorMagnitudes(c,u);for(let h=0;h<u.length;h++){const t=e.length-1-n.log(u[h]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],d[h])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const r=this.field;let a=e,i=t,o=r.getZero(),s=r.getOne();for(;i.getDegree()>=(n/2|0);){let e=a,t=o;if(a=i,o=s,a.isZero())throw new te("r_{i-1} was zero");i=e;let n=r.getZero();const l=a.getCoefficient(a.getDegree()),c=r.inverse(l);for(;i.getDegree()>=a.getDegree()&&!i.isZero();){const e=i.getDegree()-a.getDegree(),t=r.multiply(i.getCoefficient(i.getDegree()),c);n=n.addOrSubtract(r.buildMonomial(e,t)),i=i.addOrSubtract(a.multiplyByMonomial(e,t))}if(s=n.multiply(o).addOrSubtract(t),i.getDegree()>=a.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const l=s.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const c=r.inverse(l);return[s.multiplyScalar(c),i.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const a=this.field;for(let i=1;i<a.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=a.inverse(i),r++);if(r!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),a=this.field;for(let i=0;i<n;i++){const o=a.inverse(t[i]);let s=1;for(let e=0;e<n;e++)if(i!==e){const n=a.multiply(t[e],o),r=0===(1&n)?1|n:-2&n;s=a.multiply(s,r)}r[i]=a.multiply(e.evaluateAt(o),a.inverse(s)),0!==a.getGeneratorBase()&&(r[i]=a.multiply(r[i],o))}return r}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(V||(V={}));class ae{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),a=ae.convertBoolArrayToByteArray(r),i=ae.getEncodedData(r),o=new Z(a,i,null,null);return o.setNumBits(r.length),o}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=V.UPPER,r=V.UPPER,a="",i=0;for(;i<t;)if(r===V.BINARY){if(t-i<5)break;let o=ae.readCode(e,i,5);if(i+=5,0===o){if(t-i<11)break;o=ae.readCode(e,i,11)+31,i+=11}for(let n=0;n<o;n++){if(t-i<8){i=t;break}const n=ae.readCode(e,i,8);a+=_.castAsNonUtf8Char(n),i+=8}r=n}else{let o=r===V.DIGIT?4:5;if(t-i<o)break;let s=ae.readCode(e,i,o);i+=o;let l=ae.getCharacter(r,s);l.startsWith("CTRL_")?(n=r,r=ae.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(a+=l,r=n)}return a}static getTable(e){switch(e){case"L":return V.LOWER;case"P":return V.PUNCT;case"M":return V.MIXED;case"D":return V.DIGIT;case"B":return V.BINARY;default:return V.UPPER}}static getCharacter(e,t){switch(e){case V.UPPER:return ae.UPPER_TABLE[t];case V.LOWER:return ae.LOWER_TABLE[t];case V.MIXED:return ae.MIXED_TABLE[t];case V.PUNCT:return ae.PUNCT_TABLE[t];case V.DIGIT:return ae.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),a=e.length/n;if(a<r)throw new E;let i=e.length%n,o=new Int32Array(a);for(let h=0;h<a;h++,i+=n)o[h]=ae.readCode(e,i,n);try{new re(t).decode(o,a-r)}catch(d){throw new E(d)}let s=(1<<n)-1,l=0;for(let h=0;h<r;h++){let e=o[h];if(0===e||e===s)throw new E;1!==e&&e!==s-1||l++}let c=new Array(r*n-l),u=0;for(let h=0;h<r;h++){let e=o[h];if(1===e||e===s-1)c.fill(e>1,u,u+n-1),u+=n-1;else for(let t=n-1;t>=0;--t)c[u++]=0!==(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,a=new Int32Array(r),i=new Array(this.totalBitsInLayer(n,t));if(t)for(let o=0;o<a.length;o++)a[o]=o;else{let e=r+1+2*w.truncDivision(w.truncDivision(r,2)-1,15),t=r/2,n=w.truncDivision(e,2);for(let r=0;r<t;r++){let e=r+w.truncDivision(r,15);a[t-r-1]=n-e-1,a[t+r]=n+e+1}}for(let o=0,s=0;o<n;o++){let l=4*(n-o)+(t?9:12),c=2*o,u=r-1-c;for(let t=0;t<l;t++){let n=2*t;for(let r=0;r<2;r++)i[s+n+r]=e.get(a[c+r],a[c+t]),i[s+2*l+n+r]=e.get(a[c+t],a[u-r]),i[s+4*l+n+r]=e.get(a[u-r],a[u-t]),i[s+6*l+n+r]=e.get(a[u-t],a[c+r])}s+=8*l}return i}static readCode(e,t,n){let r=0;for(let a=t;a<t+n;a++)r<<=1,e[a]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?ae.readCode(e,t,8):ae.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=ae.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ae.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ae.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ae.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ae.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ae.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ie{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const a=e-n,i=t-r;return Math.sqrt(a*a+i*i)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class oe{static floatToIntBits(e){return e}}oe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class se{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof se){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*oe.floatToIntBits(this.x)+oe.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let a,i,o;if(n>=t&&n>=r?(i=e[0],a=e[1],o=e[2]):r>=n&&r>=t?(i=e[1],a=e[0],o=e[2]):(i=e[2],a=e[0],o=e[1]),this.crossProductZ(a,i,o)<0){const e=a;a=o,o=e}e[0]=a,e[1]=i,e[2]=o}static distance(e,t){return ie.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,a=t.y;return(n.x-r)*(e.y-a)-(n.y-a)*(e.x-r)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,n,r,a){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=a}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ue{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=ue.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==r&&null!==r||(r=e.getHeight()/2|0);const a=t/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=r-a,this.downInit=r+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new D}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,a=!1,i=!0,o=!1,s=!1,l=!1,c=!1,u=!1;const d=this.width,h=this.height;for(;i;){i=!1;let f=!0;for(;(f||!s)&&t<d;)f=this.containsBlackPoint(n,r,t,!1),f?(t++,i=!0,s=!0):s||t++;if(t>=d){a=!0;break}let p=!0;for(;(p||!l)&&r<h;)p=this.containsBlackPoint(e,t,r,!0),p?(r++,i=!0,l=!0):l||r++;if(r>=h){a=!0;break}let m=!0;for(;(m||!c)&&e>=0;)m=this.containsBlackPoint(n,r,e,!1),m?(e--,i=!0,c=!0):c||e--;if(e<0){a=!0;break}let g=!0;for(;(g||!u)&&n>=0;)g=this.containsBlackPoint(e,t,n,!0),g?(n--,i=!0,u=!0):u||n--;if(n<0){a=!0;break}i&&(o=!0)}if(!a&&o){const a=t-e;let i=null;for(let t=1;null===i&&t<a;t++)i=this.getBlackPointOnSegment(e,r-t,e+t,r);if(null==i)throw new D;let o=null;for(let t=1;null===o&&t<a;t++)o=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==o)throw new D;let s=null;for(let e=1;null===s&&e<a;e++)s=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==s)throw new D;let l=null;for(let e=1;null===l&&e<a;e++)l=this.getBlackPointOnSegment(t,r-e,t-e,r);if(null==l)throw new D;return this.centerEdges(l,i,s,o)}throw new D}getBlackPointOnSegment(e,t,n,r){const a=ie.round(ie.distance(e,t,n,r)),i=(n-e)/a,o=(r-t)/a,s=this.image;for(let l=0;l<a;l++){const n=ie.round(e+l*i),r=ie.round(t+l*o);if(s.get(n,r))return new se(n,r)}return null}centerEdges(e,t,n,r){const a=e.getX(),i=e.getY(),o=t.getX(),s=t.getY(),l=n.getX(),c=n.getY(),u=r.getX(),d=r.getY(),h=ue.CORR;return a<this.width/2?[new se(u-h,d+h),new se(o+h,s+h),new se(l-h,c-h),new se(a+h,i-h)]:[new se(u+h,d+h),new se(o+h,s-h),new se(l-h,c+h),new se(a-h,i-h)]}containsBlackPoint(e,t,n,r){const a=this.image;if(r){for(let i=e;i<=t;i++)if(a.get(i,n))return!0}else for(let i=e;i<=t;i++)if(a.get(n,i))return!0;return!1}}ue.INIT_SIZE=10,ue.CORR=1;class de{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let a=!0;for(let i=0;i<t.length&&a;i+=2){const e=Math.floor(t[i]),o=Math.floor(t[i+1]);if(e<-1||e>n||o<-1||o>r)throw new D;a=!1,-1===e?(t[i]=0,a=!0):e===n&&(t[i]=n-1,a=!0),-1===o?(t[i+1]=0,a=!0):o===r&&(t[i+1]=r-1,a=!0)}a=!0;for(let i=t.length-2;i>=0&&a;i-=2){const e=Math.floor(t[i]),o=Math.floor(t[i+1]);if(e<-1||e>n||o<-1||o>r)throw new D;a=!1,-1===e?(t[i]=0,a=!0):e===n&&(t[i]=n-1,a=!0),-1===o?(t[i+1]=0,a=!0):o===r&&(t[i+1]=r-1,a=!0)}}}class he{constructor(e,t,n,r,a,i,o,s,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=a,this.a32=i,this.a13=o,this.a23=s,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,r,a,i,o,s,l,c,u,d,h,f,p,m){const g=he.quadrilateralToSquare(e,t,n,r,a,i,o,s);return he.squareToQuadrilateral(l,c,u,d,h,f,p,m).times(g)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,a=this.a13,i=this.a21,o=this.a22,s=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let d=0;d<t;d+=2){const t=e[d],h=e[d+1],f=a*t+s*h+u;e[d]=(n*t+i*h+l)/f,e[d+1]=(r*t+o*h+c)/f}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,a=this.a13,i=this.a21,o=this.a22,s=this.a23,l=this.a31,c=this.a32,u=this.a33,d=e.length;for(let h=0;h<d;h++){const d=e[h],f=t[h],p=a*d+s*f+u;e[h]=(n*d+i*f+l)/p,t[h]=(r*d+o*f+c)/p}}static squareToQuadrilateral(e,t,n,r,a,i,o,s){const l=e-n+a-o,c=t-r+i-s;if(0===l&&0===c)return new he(n-e,a-n,e,r-t,i-r,t,0,0,1);{const u=n-a,d=o-a,h=r-i,f=s-i,p=u*f-d*h,m=(l*f-d*c)/p,g=(u*c-l*h)/p;return new he(n-e+m*n,o-e+g*o,e,r-t+m*r,s-t+g*s,t,m,g,1)}}static quadrilateralToSquare(e,t,n,r,a,i,o,s){return he.squareToQuadrilateral(e,t,n,r,a,i,o,s).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class fe extends de{sampleGrid(e,t,n,r,a,i,o,s,l,c,u,d,h,f,p,m,g,y,v){const w=he.quadrilateralToQuadrilateral(r,a,i,o,s,l,c,u,d,h,f,p,m,g,y,v);return this.sampleGridWithTransform(e,t,n,w)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new D;const a=new x(t,n),i=new Float32Array(2*t);for(let s=0;s<n;s++){const t=i.length,n=s+.5;for(let e=0;e<t;e+=2)i[e]=e/2+.5,i[e+1]=n;r.transformPoints(i),de.checkAndNudgePoints(e,i);try{for(let n=0;n<t;n+=2)e.get(Math.floor(i[n]),Math.floor(i[n+1]))&&a.set(n/2,s)}catch(o){throw new D}}return a}}class pe{static setGridSampler(e){pe.gridSampler=e}static getInstance(){return pe.gridSampler}}pe.gridSampler=new fe;class me{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new se(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ge{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),a=this.getMatrixCornerPoints(n);return new ce(r,a,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new D;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let i=0;i<4;i++){let e=n[(this.shift+i)%4];this.compact?(r<<=7,r+=e>>1&127):(r<<=10,r+=(e>>2&992)+(e>>1&31))}let a=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(a>>6),this.nbDataBlocks=1+(63&a)):(this.nbLayers=1+(a>>11),this.nbDataBlocks=1+(2047&a))}getRotation(e,t){let n=0;e.forEach((e,r,a)=>{n=(e>>t-2<<1)+(1&e)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(w.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new D}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let a=n-r,i=new Int32Array(n);for(let l=n-1;l>=0;--l)i[l]=15&e,e>>=4;try{new re(ee.AZTEC_PARAM).decode(i,a)}catch(s){throw new D}let o=0;for(let l=0;l<r;l++)o=(o<<4)+i[l];return o}getBullsEyeCorners(e){let t=e,n=e,r=e,a=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,i,1,-1),o=this.getFirstDifferent(n,i,1,1),s=this.getFirstDifferent(r,i,-1,1),l=this.getFirstDifferent(a,i,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,o,s,l))break}t=e,n=o,r=s,a=l,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new D;this.compact=5===this.nbCenterLayers;let o=new se(t.getX()+.5,t.getY()-.5),s=new se(n.getX()+.5,n.getY()+.5),l=new se(r.getX()-.5,r.getY()+.5),c=new se(a.getX()-.5,a.getY()-.5);return this.expandSquare([o,s,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let a=new ue(this.image).detect();e=a[0],t=a[1],n=a[2],r=a[3]}catch(o){let a=this.image.getWidth()/2,i=this.image.getHeight()/2;e=this.getFirstDifferent(new me(a+7,i-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new me(a+7,i+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new me(a-7,i+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new me(a-7,i-7),!1,-1,-1).toResultPoint()}let a=ie.round((e.getX()+r.getX()+t.getX()+n.getX())/4),i=ie.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let o=new ue(this.image,15,a,i).detect();e=o[0],t=o[1],n=o[2],r=o[3]}catch(o){e=this.getFirstDifferent(new me(a+7,i-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new me(a+7,i+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new me(a-7,i+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new me(a-7,i-7),!1,-1,-1).toResultPoint()}return a=ie.round((e.getX()+r.getX()+t.getX()+n.getX())/4),i=ie.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new me(a,i)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,a){let i=pe.getInstance(),o=this.getDimension(),s=o/2-this.nbCenterLayers,l=o/2+this.nbCenterLayers;return i.sampleGrid(e,o,o,s,s,l,s,l,l,s,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),a.getX(),a.getY())}sampleLine(e,t,n){let r=0,a=this.distanceResultPoint(e,t),i=a/n,o=e.getX(),s=e.getY(),l=i*(t.getX()-e.getX())/a,c=i*(t.getY()-e.getY())/a;for(let u=0;u<n;u++)this.image.get(ie.round(o+u*l),ie.round(s+u*c))&&(r|=1<<n-u-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let a=3;e=new me(e.getX()-a,e.getY()+a),t=new me(t.getX()-a,t.getY()-a),n=new me(n.getX()+a,n.getY()-a),r=new me(r.getX()+a,r.getY()+a);let i=this.getColor(r,e);if(0===i)return!1;let o=this.getColor(e,t);return o===i&&(o=this.getColor(t,n),o===i&&(o=this.getColor(n,r),o===i))}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,a=(t.getY()-e.getY())/n,i=0,o=e.getX(),s=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n);for(let d=0;d<c;d++)o+=r,s+=a,this.image.get(ie.round(o),ie.round(s))!==l&&i++;let u=i/n;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(e,t,n,r){let a=e.getX()+n,i=e.getY()+r;for(;this.isValid(a,i)&&this.image.get(a,i)===t;)a+=n,i+=r;for(a-=n,i-=r;this.isValid(a,i)&&this.image.get(a,i)===t;)a+=n;for(a-=n;this.isValid(a,i)&&this.image.get(a,i)===t;)i+=r;return i-=r,new me(a,i)}expandSquare(e,t,n){let r=n/(2*t),a=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,l=new se(o+r*a,s+r*i),c=new se(o-r*a,s-r*i);return a=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[l,new se(o+r*a,s+r*i),c,new se(o-r*a,s-r*i)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=ie.round(e.getX()),n=ie.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return ie.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return ie.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(w.truncDivision(this.nbLayers-4,8)+1)+15}}class ye{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=new ge(e.getBlackMatrix()),a=null,i=null;try{let e=r.detectMirror(!1);a=e.getPoints(),this.reportFoundResultPoints(t,a),i=(new ae).decode(e)}catch(c){n=c}if(null==i)try{let e=r.detectMirror(!0);a=e.getPoints(),this.reportFoundResultPoints(t,a),i=(new ae).decode(e)}catch(c){if(null!=n)throw n;throw c}let o=new z(i.getText(),i.getRawBytes(),i.getNumBits(),a,H.AZTEC,m.currentTimeMillis()),s=i.getByteSegments();null!=s&&o.putMetadata(Q.BYTE_SEGMENTS,s);let l=i.getECLevel();return null!=l&&o.putMetadata(Q.ERROR_CORRECTION_LEVEL,l),o}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(S.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((e,t,r)=>{n.foundPossibleResultPoint(e)})}}reset(){}}class ve extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ye,e)}}class we{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(S.TRY_HARDER)&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),r=this.doDecode(n,t),a=r.getResultMetadata();let i=270;null!==a&&!0===a.get(Q.ORIENTATION)&&(i+=a.get(Q.ORIENTATION)%360),r.putMetadata(Q.ORIENTATION,i);const o=r.getResultPoints();if(null!==o){const e=n.getHeight();for(let t=0;t<o.length;t++)o[t]=new se(e-o[t].getY()-1,o[t].getX())}return r}throw new D}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let a=new C(n);const i=t&&!0===t.get(S.TRY_HARDER),o=Math.max(1,r>>(i?8:5));let s;s=i?r:15;const l=Math.trunc(r/2);for(let d=0;d<s;d++){const i=Math.trunc((d+1)/2),s=l+o*(0===(1&d)?i:-i);if(s<0||s>=r)break;try{a=e.getBlackRow(s,a)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(a.reverse(),t&&!0===t.get(S.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,n)=>e.set(n,t)),e.delete(S.NEED_RESULT_POINT_CALLBACK),t=e}try{const r=this.decodeRow(s,a,t);if(1===e){r.putMetadata(Q.ORIENTATION,180);const e=r.getResultPoints();null!==e&&(e[0]=new se(n-e[0].getX()-1,e[0].getY()),e[1]=new se(n-e[1].getX()-1,e[1].getY()))}return r}catch(u){}}}throw new D}static recordPattern(e,t,n){const r=n.length;for(let l=0;l<r;l++)n[l]=0;const a=e.getSize();if(t>=a)throw new D;let i=!e.get(t),o=0,s=t;for(;s<a;){if(e.get(s)!==i)n[o]++;else{if(++o===r)break;n[o]=1,i=!i}s++}if(o!==r&&(o!==r-1||s!==a))throw new D}static recordPatternInReverse(e,t,n){let r=n.length,a=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==a&&(r--,a=!a);if(r>=0)throw new D;we.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let a=0,i=0;for(let l=0;l<r;l++)a+=e[l],i+=t[l];if(a<i)return Number.POSITIVE_INFINITY;const o=a/i;n*=o;let s=0;for(let l=0;l<r;l++){const r=e[l],a=t[l]*o,i=r>a?r-a:a-r;if(i>n)return Number.POSITIVE_INFINITY;s+=i}return s/a}}class Ce extends we{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,a=Int32Array.from([0,0,0,0,0,0]),i=n,o=!1;const s=6;for(let l=n;l<t;l++)if(e.get(l)!==o)a[r]++;else{if(r===s-1){let t=Ce.MAX_AVG_VARIANCE,n=-1;for(let e=Ce.CODE_START_A;e<=Ce.CODE_START_C;e++){const r=we.patternMatchVariance(a,Ce.CODE_PATTERNS[e],Ce.MAX_INDIVIDUAL_VARIANCE);r<t&&(t=r,n=e)}if(n>=0&&e.isRange(Math.max(0,i-(l-i)/2),i,!1))return Int32Array.from([i,l,n]);i+=a[0]+a[1],a=a.slice(2,a.length-1),a[r-1]=0,a[r]=0,r--}else r++;a[r]=1,o=!o}throw new D}static decodeCode(e,t,n){we.recordPattern(e,n,t);let r=Ce.MAX_AVG_VARIANCE,a=-1;for(let i=0;i<Ce.CODE_PATTERNS.length;i++){const e=Ce.CODE_PATTERNS[i],n=this.patternMatchVariance(t,e,Ce.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,a=i)}if(a>=0)return a;throw new D}decodeRow(e,t,n){const r=n&&!0===n.get(S.ASSUME_GS1),a=Ce.findStartPattern(t),i=a[2];let o=0;const s=new Uint8Array(20);let l;switch(s[o++]=i,i){case Ce.CODE_START_A:l=Ce.CODE_CODE_A;break;case Ce.CODE_START_B:l=Ce.CODE_CODE_B;break;case Ce.CODE_START_C:l=Ce.CODE_CODE_C;break;default:throw new E}let c=!1,u=!1,d="",h=a[0],p=a[1];const m=Int32Array.from([0,0,0,0,0,0]);let g=0,y=0,v=i,w=0,C=!0,b=!1,A=!1;for(;!c;){const e=u;switch(u=!1,g=y,y=Ce.decodeCode(t,m,p),s[o++]=y,y!==Ce.CODE_STOP&&(C=!0),y!==Ce.CODE_STOP&&(w++,v+=w*y),h=p,p+=m.reduce((e,t)=>e+t,0),y){case Ce.CODE_START_A:case Ce.CODE_START_B:case Ce.CODE_START_C:throw new E}switch(l){case Ce.CODE_CODE_A:if(y<64)d+=A===b?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),A=!1;else if(y<96)d+=A===b?String.fromCharCode(y-64):String.fromCharCode(y+64),A=!1;else switch(y!==Ce.CODE_STOP&&(C=!1),y){case Ce.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_A:!b&&A?(b=!0,A=!1):b&&A?(b=!1,A=!1):A=!0;break;case Ce.CODE_SHIFT:u=!0,l=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_B:l=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_C:l=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:c=!0}break;case Ce.CODE_CODE_B:if(y<96)d+=A===b?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),A=!1;else switch(y!==Ce.CODE_STOP&&(C=!1),y){case Ce.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_B:!b&&A?(b=!0,A=!1):b&&A?(b=!1,A=!1):A=!0;break;case Ce.CODE_SHIFT:u=!0,l=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_A:l=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_C:l=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:c=!0}break;case Ce.CODE_CODE_C:if(y<100)y<10&&(d+="0"),d+=y;else switch(y!==Ce.CODE_STOP&&(C=!1),y){case Ce.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case Ce.CODE_CODE_A:l=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_B:l=Ce.CODE_CODE_B;break;case Ce.CODE_STOP:c=!0}}e&&(l=l===Ce.CODE_CODE_A?Ce.CODE_CODE_B:Ce.CODE_CODE_A)}const I=p-h;if(p=t.getNextUnset(p),!t.isRange(p,Math.min(t.getSize(),p+(p-h)/2),!1))throw new D;if(v-=w*g,v%103!==g)throw new f;const N=d.length;if(0===N)throw new D;N>0&&C&&(d=l===Ce.CODE_CODE_C?d.substring(0,N-2):d.substring(0,N-1));const _=(a[1]+a[0])/2,T=h+I/2,x=s.length,M=new Uint8Array(x);for(let f=0;f<x;f++)M[f]=s[f];const R=[new se(_,e),new se(T,e)];return new z(d,M,0,R,H.CODE_128,(new Date).getTime())}}Ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ce.MAX_AVG_VARIANCE=.25,Ce.MAX_INDIVIDUAL_VARIANCE=.7,Ce.CODE_SHIFT=98,Ce.CODE_CODE_C=99,Ce.CODE_CODE_B=100,Ce.CODE_CODE_A=101,Ce.CODE_FNC_1=102,Ce.CODE_FNC_2=97,Ce.CODE_FNC_3=96,Ce.CODE_FNC_4_A=101,Ce.CODE_FNC_4_B=100,Ce.CODE_START_A=103,Ce.CODE_START_B=104,Ce.CODE_START_C=105,Ce.CODE_STOP=106;class be extends we{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let a,i,o=be.findAsteriskPattern(t,r),s=t.getNextSet(o[1]),l=t.getSize();do{be.recordPattern(t,s,r);let e=be.toNarrowWidePattern(r);if(e<0)throw new D;a=be.patternToChar(e),this.decodeRowResult+=a,i=s;for(let t of r)s+=t;s=t.getNextSet(s)}while("*"!==a);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,u=0;for(let f of r)u+=f;if(s!==l&&2*(s-i-u)<u)throw new D;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=be.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==be.ALPHABET_STRING.charAt(t%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new D;c=this.extendedMode?be.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(o[1]+o[0])/2,h=i+u/2;return new z(c,null,0,[new se(d,e),new se(h,e)],H.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),a=0,i=r,o=!1,s=t.length;for(let l=r;l<n;l++)if(e.get(l)!==o)t[a]++;else{if(a===s-1){if(this.toNarrowWidePattern(t)===be.ASTERISK_ENCODING&&e.isRange(Math.max(0,i-Math.floor((l-i)/2)),i,!1))return[i,l];i+=t[0]+t[1],t.copyWithin(0,2,2+a-1),t[a-1]=0,t[a]=0,a--}else a++;t[a]=1,o=!o}throw new D}static toNarrowWidePattern(e){let t,n=e.length,r=0;do{let a=2147483647;for(let t of e)t<a&&t>r&&(a=t);r=a,t=0;let i=0,o=0;for(let s=0;s<n;s++){let a=e[s];a>r&&(o|=1<<n-1-s,t++,i+=a)}if(3===t){for(let a=0;a<n&&t>0;a++){let n=e[a];if(n>r&&(t--,2*n>=i))return-1}return o}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<be.CHARACTER_ENCODINGS.length;t++)if(be.CHARACTER_ENCODINGS[t]===e)return be.ALPHABET_STRING.charAt(t);if(e===be.ASTERISK_ENCODING)return"*";throw new D}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let t=e.charAt(r);if("+"===t||"$"===t||"%"===t||"/"===t){let a=e.charAt(r+1),i="\0";switch(t){case"+":if(!(a>="A"&&a<="Z"))throw new E;i=String.fromCharCode(a.charCodeAt(0)+32);break;case"$":if(!(a>="A"&&a<="Z"))throw new E;i=String.fromCharCode(a.charCodeAt(0)-64);break;case"%":if(a>="A"&&a<="E")i=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")i=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")i=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")i=String.fromCharCode(a.charCodeAt(0)+43);else if("U"===a)i="\0";else if("V"===a)i="@";else if("W"===a)i="`";else{if("X"!==a&&"Y"!==a&&"Z"!==a)throw new E;i="\x7f"}break;case"/":if(a>="A"&&a<="O")i=String.fromCharCode(a.charCodeAt(0)-32);else{if("Z"!==a)throw new E;i=":"}}n+=i,r++}else n+=t}return n}}be.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",be.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],be.ASTERISK_ENCODING=148;class Se extends we{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),a=this.decodeEnd(t),i=new T;Se.decodeMiddle(t,r[1],a[0],i);let o=i.toString(),s=null;null!=n&&(s=n.get(S.ALLOWED_LENGTHS)),null==s&&(s=Se.DEFAULT_ALLOWED_LENGTHS);let l=o.length,c=!1,u=0;for(let h of s){if(l===h){c=!0;break}h>u&&(u=h)}if(!c&&l>u&&(c=!0),!c)throw new E;const d=[new se(r[1],e),new se(a[0],e)];return new z(o,null,0,d,H.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,r){let a=new Int32Array(10),i=new Int32Array(5),o=new Int32Array(5);for(a.fill(0),i.fill(0),o.fill(0);t<n;){we.recordPattern(e,t,a);for(let e=0;e<5;e++){let t=2*e;i[e]=a[t],o[e]=a[t+1]}let n=Se.decodeDigit(i);r.append(n.toString()),n=this.decodeDigit(o),r.append(n.toString()),a.forEach(function(e){t+=e})}}decodeStart(e){let t=Se.skipWhiteSpace(e),n=Se.findGuardPattern(e,t,Se.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new D}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new D;return n}decodeEnd(e){e.reverse();try{let n,r=Se.skipWhiteSpace(e);try{n=Se.findGuardPattern(e,r,Se.END_PATTERN_REVERSED[0])}catch(t){t instanceof D&&(n=Se.findGuardPattern(e,r,Se.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let a=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-a,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,a=new Int32Array(r),i=e.getSize(),o=!1,s=0,l=t;a.fill(0);for(let c=t;c<i;c++)if(e.get(c)!==o)a[s]++;else{if(s===r-1){if(we.patternMatchVariance(a,n,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return[l,c];l+=a[0]+a[1],m.arraycopy(a,2,a,0,s-1),a[s-1]=0,a[s]=0,s--}else s++;a[s]=1,o=!o}throw new D}static decodeDigit(e){let t=Se.MAX_AVG_VARIANCE,n=-1,r=Se.PATTERNS.length;for(let a=0;a<r;a++){let r=Se.PATTERNS[a],i=we.patternMatchVariance(e,r,Se.MAX_INDIVIDUAL_VARIANCE);i<t?(t=i,n=a):i===t&&(n=-1)}if(n>=0)return n%10;throw new D}}Se.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Se.MAX_AVG_VARIANCE=.38,Se.MAX_INDIVIDUAL_VARIANCE=.5,Se.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Se.START_PATTERN=Int32Array.from([1,1,1,1]),Se.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ee extends we{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,r=0,a=Int32Array.from([0,0,0]);for(;!n;){a=Int32Array.from([0,0,0]),t=Ee.findGuardPattern(e,r,!1,this.START_END_PATTERN,a);let i=t[0];r=t[1];let o=i-(r-i);o>=0&&(n=e.isRange(o,i,!1))}return t}static checkChecksum(e){return Ee.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ee.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return Ee.findGuardPattern(e,t,!1,Ee.START_END_PATTERN,new Int32Array(Ee.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,a){let i=e.getSize(),o=0,s=t=n?e.getNextUnset(t):e.getNextSet(t),l=r.length,c=n;for(let u=t;u<i;u++)if(e.get(u)!==c)a[o]++;else{if(o===l-1){if(we.patternMatchVariance(a,r,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE)return Int32Array.from([s,u]);s+=a[0]+a[1];let e=a.slice(2,a.length-1);for(let t=0;t<o-1;t++)a[t]=e[t];a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,c=!c}throw new D}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let a=this.MAX_AVG_VARIANCE,i=-1,o=r.length;for(let s=0;s<o;s++){let e=r[s],n=we.patternMatchVariance(t,e,Ee.MAX_INDIVIDUAL_VARIANCE);n<a&&(a=n,i=s)}if(i>=0)return i;throw new D}}Ee.MAX_AVG_VARIANCE=.48,Ee.MAX_INDIVIDUAL_VARIANCE=.7,Ee.START_END_PATTERN=Int32Array.from([1,1,1]),Ee.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ee.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ee.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ae{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,r),i=r.toString(),o=Ae.parseExtensionString(i),s=[new se((n[0]+n[1])/2,e),new se(a,e)],l=new z(i,null,0,s,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a=e.getSize(),i=t[1],o=0;for(let l=0;l<5&&i<a;l++){let t=Ee.decodeDigit(e,r,i,Ee.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)i+=e;t>=10&&(o|=1<<4-l),4!==l&&(i=e.getNextSet(i),i=e.getNextUnset(i))}if(5!==n.length)throw new D;let s=this.determineCheckDigit(o);if(Ae.extensionChecksum(n.toString())!==s)throw new D;return i}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new D}static parseExtensionString(e){if(5!==e.length)return null;let t=Ae.parseExtension5String(e);return null==t?null:new Map([[Q.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}class Ie{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,r),i=r.toString(),o=Ie.parseExtensionString(i),s=[new se((n[0]+n[1])/2,e),new se(a,e)],l=new z(i,null,0,s,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a=e.getSize(),i=t[1],o=0;for(let s=0;s<2&&i<a;s++){let t=Ee.decodeDigit(e,r,i,Ee.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)i+=e;t>=10&&(o|=1<<1-s),1!==s&&(i=e.getNextSet(i),i=e.getNextUnset(i))}if(2!==n.length)throw new D;if(parseInt(n.toString())%4!==o)throw new D;return i}static parseExtensionString(e){return 2!==e.length?null:new Map([[Q.ISSUE_NUMBER,parseInt(e)]])}}class Ne{static decodeRow(e,t,n){let r=Ee.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Ae).decodeRow(e,t,r)}catch(a){return(new Ie).decodeRow(e,t,r)}}}Ne.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class _e extends Ee{constructor(){super(),this.decodeRowStringBuffer="",_e.L_AND_G_PATTERNS=_e.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=_e.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];_e.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=_e.findStartGuardPattern(t),a=null==n?null:n.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=a){const t=new se((r[0]+r[1])/2,e);a.foundPossibleResultPoint(t)}let i=this.decodeMiddle(t,r,this.decodeRowStringBuffer),o=i.rowOffset,s=i.resultString;if(null!=a){const t=new se(o,e);a.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,o);if(null!=a){const t=new se((l[0]+l[1])/2,e);a.foundPossibleResultPoint(t)}let c=l[1],u=c+(c-l[0]);if(u>=t.getSize()||!t.isRange(c,u,!1))throw new D;let d=s.toString();if(d.length<8)throw new E;if(!_e.checkChecksum(d))throw new f;let h=(r[1]+r[0])/2,p=(l[1]+l[0])/2,m=this.getBarcodeFormat(),g=[new se(h,e),new se(p,e)],y=new z(d,null,0,g,m,(new Date).getTime()),v=0;try{let n=Ne.decodeRow(e,t,l[1]);y.putMetadata(Q.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),v=n.getText().length}catch(C){}let w=null==n?null:n.get(S.ALLOWED_EAN_EXTENSIONS);if(null!=w){let e=!1;for(let t in w)if(v.toString()===t){e=!0;break}if(!e)throw new D}return y}decodeEnd(e,t){return _e.findGuardPattern(e,t,!1,_e.START_END_PATTERN,new Int32Array(_e.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return _e.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return _e.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;n+=t}return(1e3-n)%10}}class Te extends _e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a=e.getSize(),i=t[1],o=0;for(let s=0;s<6&&i<a;s++){let t=_e.decodeDigit(e,r,i,_e.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)i+=e;t>=10&&(o|=1<<5-s)}n=Te.determineFirstDigit(n,o),i=_e.findGuardPattern(e,i,!0,_e.MIDDLE_PATTERN,new Int32Array(_e.MIDDLE_PATTERN.length).fill(0))[1];for(let s=0;s<6&&i<a;s++){let t=_e.decodeDigit(e,r,i,_e.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)i+=e}return{rowOffset:i,resultString:n}}getBarcodeFormat(){return H.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new D}}Te.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class xe extends _e{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a=e.getSize(),i=t[1];for(let o=0;o<4&&i<a;o++){let t=_e.decodeDigit(e,r,i,_e.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)i+=e}i=_e.findGuardPattern(e,i,!0,_e.MIDDLE_PATTERN,new Int32Array(_e.MIDDLE_PATTERN.length).fill(0))[1];for(let o=0;o<4&&i<a;o++){let t=_e.decodeDigit(e,r,i,_e.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)i+=e}return{rowOffset:i,resultString:n}}getBarcodeFormat(){return H.EAN_8}}class De extends _e{constructor(){super(...arguments),this.ean13Reader=new Te}getBarcodeFormat(){return H.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new z(t.substring(1),null,null,e.getResultPoints(),H.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new D}reset(){this.ean13Reader.reset()}}class Me extends _e{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(e=>e);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const a=e.getSize();let i=t[1],o=0;for(let s=0;s<6&&i<a;s++){const t=Me.decodeDigit(e,r,i,Me.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)i+=e;t>=10&&(o|=1<<5-s)}return{rowOffset:i,resultString:Me.determineNumSysAndCheckDigit(n,o)}}decodeEnd(e,t){return Me.findGuardPatternWithoutCounters(e,t,!0,Me.MIDDLE_END_PATTERN)}checkChecksum(e){return _e.checkChecksum(Me.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+r);throw D.getNotFoundInstance()}getBarcodeFormat(){return H.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),n=new T;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Me.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Me.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Re extends we{constructor(e){super();let n=null==e?null:e.get(S.POSSIBLE_FORMATS),r=[];t(n)?(r.push(new Te),r.push(new De),r.push(new xe),r.push(new Me)):(n.indexOf(H.EAN_13)>-1&&r.push(new Te),n.indexOf(H.UPC_A)>-1&&r.push(new De),n.indexOf(H.EAN_8)>-1&&r.push(new xe),n.indexOf(H.UPC_E)>-1&&r.push(new Me)),this.readers=r}decodeRow(e,t,n){for(let a of this.readers)try{const r=a.decodeRow(e,t,n),i=r.getBarcodeFormat()===H.EAN_13&&"0"===r.getText().charAt(0),o=null==n?null:n.get(S.POSSIBLE_FORMATS),s=null==o||o.includes(H.UPC_A);if(i&&s){const e=r.getRawBytes(),t=new z(r.getText().substring(1),e,e?e.length:null,r.getResultPoints(),H.UPC_A);return t.putAllMetadata(r.getResultMetadata()),t}return r}catch(r){}throw new D}reset(){for(let e of this.readers)e.reset()}}class Oe extends we{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(we.patternMatchVariance(e,t[n],Oe.MAX_INDIVIDUAL_VARIANCE)<Oe.MAX_AVG_VARIANCE)return n;throw new D}static count(e){return ie.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let a=1;a<e.length;a++)t[a]>r&&(r=t[a],n=a);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let a=1;a<e.length;a++)t[a]<r&&(r=t[a],n=a);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t/(t+e[2]+e[3]);if(n>=Oe.MIN_FINDER_PATTERN_RATIO&&n<=Oe.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of e)r>n&&(n=r),r<t&&(t=r);return n<10*t}return!1}}Oe.MAX_AVG_VARIANCE=.2,Oe.MAX_INDIVIDUAL_VARIANCE=.45,Oe.MIN_FINDER_PATTERN_RATIO=9.5/12,Oe.MAX_FINDER_PATTERN_RATIO=12.5/14;class ke{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof ke))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Pe{constructor(e,t,n,r,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new se(n,a)),this.resultPoints.push(new se(r,a))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Pe))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Le{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let s of e)r+=s;let a=0,i=0,o=e.length;for(let s=0;s<o-1;s++){let l;for(l=1,i|=1<<s;l<e[s];l++,i&=~(1<<s)){let e=Le.combins(r-l-1,o-s-2);if(n&&0===i&&r-l-(o-s-1)>=o-s-1&&(e-=Le.combins(r-l-(o-s),o-s-2)),o-s-1>1){let n=0;for(let e=r-l-(o-s-2);e>t;e--)n+=Le.combins(r-l-e-1,o-s-3);e-=n*(o-1-s)}else r-l>t&&e--;a+=e}r-=l}return a}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let a=1,i=1;for(let o=e;o>n;o--)a*=o,i<=r&&(a/=i,i++);for(;i<=r;)a/=i,i++;return a}}class Be{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new C(12*t),r=0,a=e[0].getRightChar().getValue();for(let i=11;i>=0;--i)0!=(a&1<<i)&&n.set(r),r++;for(let i=1;i<e.length;++i){let t=e[i],a=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(a&1<<e)&&n.set(r),r++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&n.set(r),r++}}return n}}class je{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Fe{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class ze extends Fe{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===ze.FNC1}}ze.FNC1="$";class Ue extends Fe{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class He extends Fe{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new E;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===He.FNC1}isSecondDigitFNC1(){return this.secondDigit===He.FNC1}isAnyFNC1(){return this.firstDigit===He.FNC1||this.secondDigit===He.FNC1}}He.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new D;let t=e.substring(0,2);for(let a of Ve.TWO_DIGIT_DATA_LENGTH)if(a[0]===t)return a[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,a[2],e):Ve.processFixedAI(2,a[1],e);if(e.length<3)throw new D;let n=e.substring(0,3);for(let a of Ve.THREE_DIGIT_DATA_LENGTH)if(a[0]===n)return a[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,a[2],e):Ve.processFixedAI(3,a[1],e);for(let a of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(a[0]===n)return a[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,a[2],e):Ve.processFixedAI(4,a[1],e);if(e.length<4)throw new D;let r=e.substring(0,4);for(let a of Ve.FOUR_DIGIT_DATA_LENGTH)if(a[0]===r)return a[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,a[2],e):Ve.processFixedAI(4,a[1],e);throw new D}static processFixedAI(e,t,n){if(n.length<e)throw new D;let r=n.substring(0,e);if(n.length<e+t)throw new D;let a=n.substring(e,e+t),i=n.substring(e+t),o="("+r+")"+a,s=Ve.parseFieldsInGeneralPurpose(i);return null==s?o:o+s}static processVariableAI(e,t,n){let r,a=n.substring(0,e);r=n.length<e+t?n.length:e+t;let i=n.substring(e,r),o=n.substring(r),s="("+a+")"+i,l=Ve.parseFieldsInGeneralPurpose(o);return null==l?s:s+l}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class We{constructor(e){this.buffer=new T,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let t=this.decodeGeneralPurposeField(n,r),a=Ve.parseFieldsInGeneralPurpose(t.getNewString());if(null!=a&&e.append(a),r=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new He(this.information.getSize(),0===t?He.FNC1:t-1,He.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new He(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return We.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let a=0;a<n;++a)e.get(t+a)&&(r|=1<<n-a-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new Ue(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Ue(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new Ue(this.current.getPosition(),this.buffer.toString()):new Ue(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new je(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new je(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new je(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new je(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new je(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new je(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new je(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new ze(e+5,ze.FNC1);if(t>=5&&t<15)return new ze(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new ze(e+7,""+(r+1));if(r>=90&&r<116)return new ze(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new E}return new ze(e+8,n)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new ze(e+5,ze.FNC1);if(t>=5&&t<15)return new ze(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new ze(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+r)}return new ze(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Ge{constructor(e){this.information=e,this.generalDecoder=new We(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ye extends Ge{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}Ye.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let a=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*a:a}n=10-n%10,10===n&&(n=0),e.append(n)}}Ye.GTIN_SIZE=40;class Xe extends Ye{constructor(e){super(e)}parseInformation(){let e=new T;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Xe.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Xe.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE+44)}}Xe.HEADER_SIZE=4;class qe extends Ge{constructor(e){super(e)}parseInformation(){let e=new T;return this.getGeneralDecoder().decodeAllCodes(e,qe.HEADER_SIZE)}}qe.HEADER_SIZE=5;class Qe extends Ye{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let a=this.checkWeight(r),i=1e5;for(let o=0;o<5;++o)a/i===0&&e.append("0"),i/=10;e.append(a)}}class Ze extends Qe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Ze.HEADER_SIZE+Qe.GTIN_SIZE+Ze.WEIGHT_SIZE)throw new D;let e=new T;return this.encodeCompressedGtin(e,Ze.HEADER_SIZE),this.encodeCompressedWeight(e,Ze.HEADER_SIZE+Qe.GTIN_SIZE,Ze.WEIGHT_SIZE),e.toString()}}Ze.HEADER_SIZE=5,Ze.WEIGHT_SIZE=15;class Ke extends Ze{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class $e extends Ze{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Je extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Je.HEADER_SIZE+Ye.GTIN_SIZE)throw new D;let e=new T;this.encodeCompressedGtin(e,Je.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Je.HEADER_SIZE+Ye.GTIN_SIZE,Je.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Je.HEADER_SIZE+Ye.GTIN_SIZE+Je.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Je.HEADER_SIZE=8,Je.LAST_DIGIT_SIZE=2;class et extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ye.GTIN_SIZE)throw new D;let e=new T;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends Qe{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new D;let e=new T;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let a=n%12+1;n/=12;let i=n;i/10==0&&e.append("0"),e.append(i),a/10==0&&e.append("0"),e.append(a),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new Xe(e);if(!e.get(2))return new qe(e);switch(We.extractNumericValueFromBitArray(e,1,4)){case 4:return new Ke(e);case 5:return new $e(e)}switch(We.extractNumericValueFromBitArray(e,1,5)){case 12:return new Je(e);case 13:return new et(e)}switch(We.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class rt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof rt&&rt.equalsOrNull(e.leftchar,t.leftchar)&&rt.equalsOrNull(e.rightchar,t.rightchar)&&rt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:rt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class at{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof at&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((e,r)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n}}class it extends Oe{constructor(e){super(...arguments),this.pairs=new Array(it.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return it.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,it.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(a){if(a instanceof D){if(!this.pairs.length)throw new D;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new D}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!it.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let a=new Array(e);a.push(t);try{return this.checkRows(a,r+1)}catch(n){this.verbose&&console.log(n)}}throw new D}static isValidSequence(e){for(let t of it.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,a=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){a=t.isEquivalent(this.pairs);break}r=t.isEquivalent(this.pairs),n++}a||r||it.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new at(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(rt.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let r of e){let e=!1;for(let t of n.getPairs())if(r.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=nt(Be.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),a=[n[0],n[1],r[0],r[1]];return new z(t,null,null,a,H.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),a=2;for(let i=1;i<this.pairs.size();++i){let e=this.pairs.get(i);r+=e.getLeftChar().getChecksumPortion(),a++;let t=e.getRightChar();null!=t&&(r+=t.getChecksumPortion(),a++)}return r%=211,211*(a-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r,a=t.length%2==0;this.startFromEven&&(a=!a);let i=!0,o=-1;do{this.findNextPair(e,t,o),r=this.parseFoundFinderPattern(e,n,a),null==r?o=it.getNextSecondBar(e,this.startEnd[0]):i=!1}while(i);let s,l=this.decodeDataCharacter(e,r,a,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new D;try{s=this.decodeDataCharacter(e,r,a,!1)}catch(c){s=null,this.verbose&&console.log(c)}return new rt(l,s,r,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a,i=e.getSize();a=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let o=t.length%2!=0;this.startFromEven&&(o=!o);let s=!1;for(;a<i&&(s=!e.get(a),s);)a++;let l=0,c=a;for(let u=a;u<i;u++)if(e.get(u)!=s)r[l]++;else{if(3==l){if(o&&it.reverseCounters(r),it.isFinderPattern(r))return this.startEnd[0]=c,void(this.startEnd[1]=u);o&&it.reverseCounters(r),c+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,l--}else l++;r[l]=1,s=!s}throw new D}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,a,i;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,r=this.startEnd[0]-t,a=t,i=this.startEnd[1]}else a=this.startEnd[0],i=e.getNextUnset(this.startEnd[1]+1),r=i-this.startEnd[1];let o,s=this.getDecodeFinderCounters();m.arraycopy(s,0,s,1,s.length-1),s[0]=r;try{o=this.parseFinderValue(s,it.FINDER_PATTERNS)}catch(l){return null}return new Pe(o,[a,i],a,i,t)}decodeDataCharacter(e,t,n,r){let a=this.getDataCharacterCounters();for(let A=0;A<a.length;A++)a[A]=0;if(r)it.recordPatternInReverse(e,t.getStartEnd()[0],a);else{it.recordPattern(e,t.getStartEnd()[1],a);for(let e=0,t=a.length-1;e<t;e++,t--){let n=a[e];a[e]=a[t],a[t]=n}}let i=17,o=ie.sum(new Int32Array(a))/i,s=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(o-s)/s>.3)throw new D;let l=this.getOddCounts(),c=this.getEvenCounts(),u=this.getOddRoundingErrors(),d=this.getEvenRoundingErrors();for(let A=0;A<a.length;A++){let e=1*a[A]/o,t=e+.5;if(t<1){if(e<.3)throw new D;t=1}else if(t>8){if(e>8.7)throw new D;t=8}let n=A/2;0==(1&A)?(l[n]=t,u[n]=e-t):(c[n]=t,d[n]=e-t)}this.adjustOddEvenCounts(i);let h=4*t.getValue()+(n?0:2)+(r?0:1)-1,f=0,p=0;for(let A=l.length-1;A>=0;A--){if(it.isNotA1left(t,n,r)){let e=it.WEIGHTS[h][2*A];p+=l[A]*e}f+=l[A]}let m=0;for(let A=c.length-1;A>=0;A--)if(it.isNotA1left(t,n,r)){let e=it.WEIGHTS[h][2*A+1];m+=c[A]*e}let g=p+m;if(0!=(1&f)||f>13||f<4)throw new D;let y=(13-f)/2,v=it.SYMBOL_WIDEST[y],w=9-v,C=Le.getRSSvalue(l,v,!0),b=Le.getRSSvalue(c,w,!1),S=it.EVEN_TOTAL_SUBSET[y],E=it.GSUM[y];return new ke(C*S+b+E,g)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=ie.sum(new Int32Array(this.getOddCounts())),n=ie.sum(new Int32Array(this.getEvenCounts())),r=!1,a=!1;t>13?a=!0:t<4&&(r=!0);let i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);let s=t+n-e,l=1==(1&t),c=0==(1&n);if(1==s)if(l){if(c)throw new D;a=!0}else{if(!c)throw new D;o=!0}else if(-1==s)if(l){if(c)throw new D;r=!0}else{if(!c)throw new D;i=!0}else{if(0!=s)throw new D;if(l){if(!c)throw new D;t<n?(r=!0,o=!0):(a=!0,i=!0)}else if(c)throw new D}if(r){if(a)throw new D;it.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&it.decrement(this.getOddCounts(),this.getOddRoundingErrors()),i){if(o)throw new D;it.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&it.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}it.SYMBOL_WIDEST=[7,5,4,3,1],it.EVEN_TOTAL_SUBSET=[4,20,52,104,204],it.GSUM=[0,348,1388,2948,3988],it.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],it.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],it.FINDER_PAT_A=0,it.FINDER_PAT_B=1,it.FINDER_PAT_C=2,it.FINDER_PAT_D=3,it.FINDER_PAT_E=4,it.FINDER_PAT_F=5,it.FINDER_PATTERN_SEQUENCES=[[it.FINDER_PAT_A,it.FINDER_PAT_A],[it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B],[it.FINDER_PAT_A,it.FINDER_PAT_C,it.FINDER_PAT_B,it.FINDER_PAT_D],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_C],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_D,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_D],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_E],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F]],it.MAX_PAIRS=11;class ot extends ke{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class st extends Oe{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);st.addOrTally(this.possibleLeftPairs,r),t.reverse();let a=this.decodePair(t,!0,e,n);st.addOrTally(this.possibleRightPairs,a),t.reverse();for(let i of this.possibleLeftPairs)if(i.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&st.checkChecksum(i,e))return st.constructResult(i,e);throw new D}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),a=new T;for(let l=13-r.length;l>0;l--)a.append("0");a.append(r);let i=0;for(let l=0;l<13;l++){let e=a.charAt(l).charCodeAt(0)-"0".charCodeAt(0);i+=0===(1&l)?3*e:e}i=10-i%10,10===i&&(i=0),a.append(i.toString());let o=e.getFinderPattern().getResultPoints(),s=t.getFinderPattern().getResultPoints();return new z(a.toString(),null,0,[o[0],o[1],s[0],s[1]],H.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let a=this.findFinderPattern(e,t),i=this.parseFoundFinderPattern(e,n,t,a),o=null==r?null:r.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=o){let r=(a[0]+a[1])/2;t&&(r=e.getSize()-1-r),o.foundPossibleResultPoint(new se(r,n))}let s=this.decodeDataCharacter(e,i,!0),l=this.decodeDataCharacter(e,i,!1);return new ot(1597*s.getValue()+l.getValue(),s.getChecksumPortion()+4*l.getChecksumPortion(),i)}catch(a){return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let m=0;m<r.length;m++)r[m]=0;if(n)we.recordPatternInReverse(e,t.getStartEnd()[0],r);else{we.recordPattern(e,t.getStartEnd()[1]+1,r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let a=n?16:15,i=ie.sum(new Int32Array(r))/a,o=this.getOddCounts(),s=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let m=0;m<r.length;m++){let e=r[m]/i,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(m/2);0===(1&m)?(o[n]=t,l[n]=e-t):(s[n]=t,c[n]=e-t)}this.adjustOddEvenCounts(n,a);let u=0,d=0;for(let m=o.length-1;m>=0;m--)d*=9,d+=o[m],u+=o[m];let h=0,f=0;for(let m=s.length-1;m>=0;m--)h*=9,h+=s[m],f+=s[m];let p=d+3*h;if(n){if(0!==(1&u)||u>12||u<4)throw new D;let e=(12-u)/2,t=st.OUTSIDE_ODD_WIDEST[e],n=9-t,r=Le.getRSSvalue(o,t,!1),a=Le.getRSSvalue(s,n,!0),i=st.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=st.OUTSIDE_GSUM[e];return new ke(r*i+a+l,p)}{if(0!==(1&f)||f>10||f<4)throw new D;let e=(10-f)/2,t=st.INSIDE_ODD_WIDEST[e],n=9-t,r=Le.getRSSvalue(o,t,!0),a=Le.getRSSvalue(s,n,!1),i=st.INSIDE_ODD_TOTAL_SUBSET[e],l=st.INSIDE_GSUM[e];return new ke(a*i+r+l,p)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),a=!1,i=0;for(;i<r&&(a=!e.get(i),t!==a);)i++;let o=0,s=i;for(let l=i;l<r;l++)if(e.get(l)!==a)n[o]++;else{if(3===o){if(Oe.isFinderPattern(n))return[s,l];s+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,o--}else o++;n[o]=1,a=!a}throw new D}parseFoundFinderPattern(e,t,n,r){let a=e.get(r[0]),i=r[0]-1;for(;i>=0&&a!==e.get(i);)i--;i++;const o=r[0]-i,s=this.getDecodeFinderCounters(),l=new Int32Array(s.length);m.arraycopy(s,0,l,1,s.length-1),l[0]=o;const c=this.parseFinderValue(l,st.FINDER_PATTERNS);let u=i,d=r[1];return n&&(u=e.getSize()-1-u,d=e.getSize()-1-d),new Pe(c,[i,r[1]],u,d,t)}adjustOddEvenCounts(e,t){let n=ie.sum(new Int32Array(this.getOddCounts())),r=ie.sum(new Int32Array(this.getEvenCounts())),a=!1,i=!1,o=!1,s=!1;e?(n>12?i=!0:n<4&&(a=!0),r>12?s=!0:r<4&&(o=!0)):(n>11?i=!0:n<5&&(a=!0),r>10?s=!0:r<4&&(o=!0));let l=n+r-t,c=(1&n)===(e?1:0),u=1===(1&r);if(1===l)if(c){if(u)throw new D;i=!0}else{if(!u)throw new D;s=!0}else if(-1===l)if(c){if(u)throw new D;a=!0}else{if(!u)throw new D;o=!0}else{if(0!==l)throw new D;if(c){if(!u)throw new D;n<r?(a=!0,s=!0):(i=!0,o=!0)}else if(u)throw new D}if(a){if(i)throw new D;Oe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&Oe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(s)throw new D;Oe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&Oe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],st.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],st.OUTSIDE_GSUM=[0,161,961,2015,2715],st.INSIDE_GSUM=[0,336,1036,1516],st.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],st.INSIDE_ODD_WIDEST=[2,4,6,8],st.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends we{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(S.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(S.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(H.EAN_13)||n.includes(H.UPC_A)||n.includes(H.EAN_8)||n.includes(H.UPC_E))&&this.readers.push(new Re(e)),n.includes(H.CODE_39)&&this.readers.push(new be(r)),n.includes(H.CODE_128)&&this.readers.push(new Ce),n.includes(H.ITF)&&this.readers.push(new Se),n.includes(H.RSS_14)&&this.readers.push(new st),n.includes(H.RSS_EXPANDED)&&this.readers.push(new it(this.verbose))):(this.readers.push(new Re(e)),this.readers.push(new be),this.readers.push(new Re(e)),this.readers.push(new Ce),this.readers.push(new Se),this.readers.push(new st),this.readers.push(new it(this.verbose)))}decodeRow(e,t,n){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(e,t,n)}catch(r){}throw new D}reset(){this.readers.forEach(e=>e.reset())}}class ct extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class ut{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class dt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,n,r,a,i){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=a,this.ecBlocks=i;let o=0;const s=i.getECCodewords(),l=i.getECBlocks();for(let c of l)o+=c.getCount()*(c.getDataCodewords()+s);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new E;for(let n of ht.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new E}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new ut(5,new dt(1,3))),new ht(2,12,12,10,10,new ut(7,new dt(1,5))),new ht(3,14,14,12,12,new ut(10,new dt(1,8))),new ht(4,16,16,14,14,new ut(12,new dt(1,12))),new ht(5,18,18,16,16,new ut(14,new dt(1,18))),new ht(6,20,20,18,18,new ut(18,new dt(1,22))),new ht(7,22,22,20,20,new ut(20,new dt(1,30))),new ht(8,24,24,22,22,new ut(24,new dt(1,36))),new ht(9,26,26,24,24,new ut(28,new dt(1,44))),new ht(10,32,32,14,14,new ut(36,new dt(1,62))),new ht(11,36,36,16,16,new ut(42,new dt(1,86))),new ht(12,40,40,18,18,new ut(48,new dt(1,114))),new ht(13,44,44,20,20,new ut(56,new dt(1,144))),new ht(14,48,48,22,22,new ut(68,new dt(1,174))),new ht(15,52,52,24,24,new ut(42,new dt(2,102))),new ht(16,64,64,14,14,new ut(56,new dt(2,140))),new ht(17,72,72,16,16,new ut(36,new dt(4,92))),new ht(18,80,80,18,18,new ut(48,new dt(4,114))),new ht(19,88,88,20,20,new ut(56,new dt(4,144))),new ht(20,96,96,22,22,new ut(68,new dt(4,174))),new ht(21,104,104,24,24,new ut(56,new dt(6,136))),new ht(22,120,120,18,18,new ut(68,new dt(6,175))),new ht(23,132,132,20,20,new ut(62,new dt(8,163))),new ht(24,144,144,22,22,new ut(62,new dt(8,156),new dt(2,155))),new ht(25,8,18,6,16,new ut(7,new dt(1,5))),new ht(26,8,32,6,14,new ut(11,new dt(1,10))),new ht(27,12,26,10,24,new ut(14,new dt(1,16))),new ht(28,12,36,10,16,new ut(18,new dt(1,22))),new ht(29,16,36,14,16,new ut(24,new dt(1,32))),new ht(30,16,48,14,22,new ut(28,new dt(1,49)))]}}ht.VERSIONS=ht.buildVersions();class ft{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new E;this.version=ft.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new x(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return ht.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const a=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth();let o=!1,s=!1,l=!1,c=!1;do{if(n!==a||0!==r||o)if(n!==a-2||0!==r||0===(3&i)||s)if(n!==a+4||2!==r||0!==(7&i)||l)if(n!==a-2||0!==r||4!==(7&i)||c){do{n<a&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,a,i)),n-=2,r+=2}while(n>=0&&r<i);n+=1,r+=3;do{n>=0&&r<i&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,a,i)),n+=2,r-=2}while(n<a&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(a,i),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner3(a,i),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner2(a,i),n-=2,r+=2,s=!0;else e[t++]=255&this.readCorner1(a,i),n-=2,r+=2,o=!0}while(n<a||r<i);if(t!==this.version.getTotalCodewords())throw new E;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let a=0;return this.readModule(e-2,t-2,n,r)&&(a|=1),a<<=1,this.readModule(e-2,t-1,n,r)&&(a|=1),a<<=1,this.readModule(e-1,t-2,n,r)&&(a|=1),a<<=1,this.readModule(e-1,t-1,n,r)&&(a|=1),a<<=1,this.readModule(e-1,t,n,r)&&(a|=1),a<<=1,this.readModule(e,t-2,n,r)&&(a|=1),a<<=1,this.readModule(e,t-1,n,r)&&(a|=1),a<<=1,this.readModule(e,t,n,r)&&(a|=1),a}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new d("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),i=t/r|0,o=n/a|0,s=new x(o*a,i*r);for(let l=0;l<i;++l){const t=l*r;for(let n=0;n<o;++n){const i=n*a;for(let o=0;o<r;++o){const c=l*(r+2)+1+o,u=t+o;for(let t=0;t<a;++t){const r=n*(a+2)+1+t;if(e.get(r,c)){const e=i+t;s.set(e,u)}}}}}return s}}class pt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const a=n.getECBlocks();for(let d of a)r+=d.getCount();const i=new Array(r);let o=0;for(let d of a)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=n.getECCodewords()+e;i[o++]=new pt(e,new Uint8Array(t))}const s=i[0].codewords.length-n.getECCodewords(),l=s-1;let c=0;for(let d=0;d<l;d++)for(let t=0;t<o;t++)i[t].codewords[d]=e[c++];const u=24===t.getVersionNumber(),h=u?8:o;for(let d=0;d<h;d++)i[d].codewords[s-1]=e[c++];const f=i[0].codewords.length;for(let d=s;d<f;d++)for(let t=0;t<o;t++){const n=u?(t+8)%o:t,r=u&&n>7?d-1:d;i[n].codewords[r]=e[c++]}if(c!==e.length)throw new d;return i}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class mt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new d(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const a=this.bytes;if(n>0){const i=8-n,o=e<i?e:i,s=i-o,l=255>>8-o<<s;t=(a[r]&l)>>s,e-=o,n+=o,8===n&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&a[r],r++,e-=8;if(e>0){const i=8-e,o=255>>i<<i;t=t<<e|(a[r]&o)>>i,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(W||(W={}));class gt{static decode(e){const t=new mt(e),n=new T,r=new T,a=new Array;let i=W.ASCII_ENCODE;do{if(i===W.ASCII_ENCODE)i=this.decodeAsciiSegment(t,n,r);else{switch(i){case W.C40_ENCODE:this.decodeC40Segment(t,n);break;case W.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case W.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case W.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case W.BASE256_ENCODE:this.decodeBase256Segment(t,n,a);break;default:throw new E}i=W.ASCII_ENCODE}}while(i!==W.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Z(e,n.toString(),0===a.length?null:a,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let a=e.readBits(8);if(0===a)throw new E;if(a<=128)return r&&(a+=128),t.append(String.fromCharCode(a-1)),W.ASCII_ENCODE;if(129===a)return W.PAD_ENCODE;if(a<=229){const e=a-130;e<10&&t.append("0"),t.append(""+e)}else switch(a){case 230:return W.C40_ENCODE;case 231:return W.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return W.ANSIX12_ENCODE;case 239:return W.TEXT_ENCODE;case 240:return W.EDIFACT_ENCODE;default:if(254!==a||0!==e.available())throw new E}}while(e.available()>0);return W.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let a=0;do{if(8===e.available())return;const i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),r);for(let e=0;e<3;e++){const i=r[e];switch(a){case 0:if(i<3)a=i+1;else{if(!(i<this.C40_BASIC_SET_CHARS.length))throw new E;{const e=this.C40_BASIC_SET_CHARS[i];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(i+128)),n=!1):t.append(String.fromCharCode(i)),a=0;break;case 2:if(i<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[i];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(i){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new E}a=0;break;case 3:n?(t.append(String.fromCharCode(i+224)),n=!1):t.append(String.fromCharCode(i+96)),a=0;break;default:throw new E}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],a=0;do{if(8===e.available())return;const i=e.readBits(8);if(254===i)return;this.parseTwoBytes(i,e.readBits(8),r);for(let e=0;e<3;e++){const i=r[e];switch(a){case 0:if(i<3)a=i+1;else{if(!(i<this.TEXT_BASIC_SET_CHARS.length))throw new E;{const e=this.TEXT_BASIC_SET_CHARS[i];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(i+128)),n=!1):t.append(String.fromCharCode(i)),a=0;break;case 2:if(i<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[i];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(i){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new E}a=0;break;case 3:if(!(i<this.TEXT_SHIFT3_SET_CHARS.length))throw new E;{const e=this.TEXT_SHIFT3_SET_CHARS[i];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),a=0}break;default:throw new E}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let e=0;e<3;e++){const r=n[e];switch(r){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(r<14)t.append(String.fromCharCode(r+44));else{if(!(r<40))throw new E;t.append(String.fromCharCode(r+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,a=Math.floor(r/1600);n[0]=a,r-=1600*a,a=Math.floor(r/40),n[1]=a,n[2]=r-40*a}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const a=this.unrandomize255State(e.readBits(8),r++);let i;if(i=0===a?e.available()/8|0:a<250?a:250*(a-249)+this.unrandomize255State(e.readBits(8),r++),i<0)throw new E;const o=new Uint8Array(i);for(let l=0;l<i;l++){if(e.available()<8)throw new E;o[l]=this.unrandomize255State(e.readBits(8),r++)}n.push(o);try{t.append(N.decode(o,_.ISO88591))}catch(s){throw new ne("Platform does not support required encoding: "+s.message)}}static unrandomize255State(e,t){const n=e-(149*t%255+1);return n>=0?n:n+256}}gt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],gt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],gt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],gt.TEXT_SHIFT2_SET_CHARS=gt.C40_SHIFT2_SET_CHARS,gt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class yt{constructor(){this.rsDecoder=new re(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new ft(e),n=t.getVersion(),r=t.readCodewords(),a=pt.getDataBlocks(r,n);let i=0;for(let l of a)i+=l.getNumDataCodewords();const o=new Uint8Array(i),s=a.length;for(let l=0;l<s;l++){const e=a[l],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let r=0;r<n;r++)o[r*s+l]=t[r]}return gt.decode(o)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let a=0;a<t;a++)e[a]=n[a]}}class vt{constructor(e){this.image=e,this.rectangleDetector=new ue(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new D;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],a=t[2],i=t[3];let o=this.transitionsBetween(n,i)+1,s=this.transitionsBetween(a,i)+1;1===(1&o)&&(o+=1),1===(1&s)&&(s+=1),4*o<7*s&&4*s<7*o&&(o=s=Math.max(o,s));let l=vt.sampleGrid(this.image,n,r,a,i,o,s);return new le(l,[n,r,a,i])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),a=(t.getY()-e.getY())/(n+1);return new se(e.getX()+r,e.getY()+a)}static moveAway(e,t,n){let r=e.getX(),a=e.getY();return r<t?r-=1:r+=1,a<n?a-=1:a+=1,new se(r,a)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],a=e[2],i=this.transitionsBetween(t,n),o=this.transitionsBetween(n,r),s=this.transitionsBetween(r,a),l=this.transitionsBetween(a,t),c=i,u=[a,t,n,r];return c>o&&(c=o,u[0]=t,u[1]=n,u[2]=r,u[3]=a),c>s&&(c=s,u[0]=n,u[1]=r,u[2]=a,u[3]=t),c>l&&(u[0]=r,u[1]=a,u[2]=t,u[3]=n),u}detectSolid2(e){let t=e[0],n=e[1],r=e[2],a=e[3],i=this.transitionsBetween(t,a),o=vt.shiftPoint(n,r,4*(i+1)),s=vt.shiftPoint(r,n,4*(i+1));return this.transitionsBetween(o,t)<this.transitionsBetween(s,a)?(e[0]=t,e[1]=n,e[2]=r,e[3]=a):(e[0]=n,e[1]=r,e[2]=a,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],a=e[3],i=this.transitionsBetween(t,a),o=this.transitionsBetween(n,a),s=vt.shiftPoint(t,n,4*(o+1)),l=vt.shiftPoint(r,n,4*(i+1));i=this.transitionsBetween(s,a),o=this.transitionsBetween(l,a);let c=new se(a.getX()+(r.getX()-n.getX())/(i+1),a.getY()+(r.getY()-n.getY())/(i+1)),u=new se(a.getX()+(t.getX()-n.getX())/(o+1),a.getY()+(t.getY()-n.getY())/(o+1));return this.isValid(c)?this.isValid(u)?this.transitionsBetween(s,c)+this.transitionsBetween(l,c)>this.transitionsBetween(s,u)+this.transitionsBetween(l,u)?c:u:c:this.isValid(u)?u:null}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],a=e[3],i=this.transitionsBetween(t,a)+1,o=this.transitionsBetween(r,a)+1,s=vt.shiftPoint(t,n,4*o),l=vt.shiftPoint(r,n,4*i);i=this.transitionsBetween(s,a)+1,o=this.transitionsBetween(l,a)+1,1===(1&i)&&(i+=1),1===(1&o)&&(o+=1);let c,u,d=(t.getX()+n.getX()+r.getX()+a.getX())/4,h=(t.getY()+n.getY()+r.getY()+a.getY())/4;return t=vt.moveAway(t,d,h),n=vt.moveAway(n,d,h),r=vt.moveAway(r,d,h),a=vt.moveAway(a,d,h),s=vt.shiftPoint(t,n,4*o),s=vt.shiftPoint(s,a,4*i),c=vt.shiftPoint(n,t,4*o),c=vt.shiftPoint(c,r,4*i),l=vt.shiftPoint(r,a,4*o),l=vt.shiftPoint(l,n,4*i),u=vt.shiftPoint(a,r,4*o),u=vt.shiftPoint(u,t,4*i),[s,c,l,u]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,a,i,o){return pe.getInstance().sampleGrid(e,i,o,.5,.5,i-.5,.5,i-.5,o-.5,.5,o-.5,t.getX(),t.getY(),a.getX(),a.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),a=Math.trunc(t.getX()),i=Math.trunc(t.getY()),o=Math.abs(i-r)>Math.abs(a-n);if(o){let e=n;n=r,r=e,e=a,a=i,i=e}let s=Math.abs(a-n),l=Math.abs(i-r),c=-s/2,u=r<i?1:-1,d=n<a?1:-1,h=0,f=this.image.get(o?r:n,o?n:r);for(let p=n,m=r;p!==a;p+=d){let e=this.image.get(o?m:p,o?p:m);if(e!==f&&(h++,f=e),c+=l,c>0){if(m===i)break;m+=u,c-=s}}return h}}class wt{constructor(){this.decoder=new yt}decode(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r&&r.has(S.PURE_BARCODE)){const r=wt.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(r),n=wt.NO_POINTS}else{const r=new vt(e.getBlackMatrix()).detect();t=this.decoder.decode(r.getBits()),n=r.getPoints()}const a=t.getRawBytes(),i=new z(t.getText(),a,8*a.length,n,H.DATA_MATRIX,m.currentTimeMillis()),o=t.getByteSegments();null!=o&&i.putMetadata(Q.BYTE_SEGMENTS,o);const s=t.getECLevel();return null!=s&&i.putMetadata(Q.ERROR_CORRECTION_LEVEL,s),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new D;const r=this.moduleSize(t,e);let a=t[1];const i=n[1];let o=t[0];const s=(n[0]-o+1)/r,l=(i-a+1)/r;if(s<=0||l<=0)throw new D;const c=r/2;a+=c,o+=c;const u=new x(s,l);for(let d=0;d<l;d++){const t=a+d*r;for(let n=0;n<s;n++)e.get(o+n*r,t)&&u.set(n,d)}return u}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const a=e[1];for(;r<n&&t.get(r,a);)r++;if(r===n)throw new D;const i=r-e[0];if(0===i)throw new D;return i}}wt.NO_POINTS=[];class Ct extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new wt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(G||(G={}));class bt{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,bt.FOR_BITS.set(n,this),bt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return bt.L;case"M":return bt.M;case"Q":return bt.Q;case"H":return bt.H;default:throw new u(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof bt))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=bt.FOR_BITS.size)throw new d;return bt.FOR_BITS.get(e)}}bt.FOR_BITS=new Map,bt.FOR_VALUE=new Map,bt.L=new bt(G.L,"L",1),bt.M=new bt(G.M,"M",0),bt.Q=new bt(G.Q,"Q",3),bt.H=new bt(G.H,"H",2);class St{constructor(e){this.errorCorrectionLevel=bt.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return w.bitCount(e^t)}static decodeFormatInformation(e,t){const n=St.doDecodeFormatInformation(e,t);return null!==n?n:St.doDecodeFormatInformation(e^St.FORMAT_INFO_MASK_QR,t^St.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const a of St.FORMAT_INFO_DECODE_LOOKUP){const i=a[0];if(i===e||i===t)return new St(a[1]);let o=St.numBitsDiffering(e,i);o<n&&(r=a[1],n=o),e!==t&&(o=St.numBitsDiffering(t,i),o<n&&(r=a[1],n=o))}return n<=3?new St(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof St))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}St.FORMAT_INFO_MASK_QR=21522,St.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Et{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class At{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class It{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];this.ecBlocks=r;let i=0;const o=r[0].getECCodewordsPerBlock(),s=r[0].getECBlocks();for(const l of s)i+=l.getCount()*(l.getDataCodewords()+o);this.totalCodewords=i}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new E;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new E}}static getVersionForNumber(e){if(e<1||e>40)throw new d;return It.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<It.VERSION_DECODE_INFO.length;r++){const a=It.VERSION_DECODE_INFO[r];if(a===e)return It.getVersionForNumber(r+7);const i=St.numBitsDiffering(e,a);i<t&&(n=r+7,t=i)}return t<=3?It.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new x(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const e=this.alignmentPatternCenters[r]-2;for(let a=0;a<n;a++)0===r&&(0===a||a===n-1)||r===n-1&&0===a||t.setRegion(this.alignmentPatternCenters[a]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}It.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),It.VERSIONS=[new It(1,new Int32Array(0),new Et(7,new At(1,19)),new Et(10,new At(1,16)),new Et(13,new At(1,13)),new Et(17,new At(1,9))),new It(2,Int32Array.from([6,18]),new Et(10,new At(1,34)),new Et(16,new At(1,28)),new Et(22,new At(1,22)),new Et(28,new At(1,16))),new It(3,Int32Array.from([6,22]),new Et(15,new At(1,55)),new Et(26,new At(1,44)),new Et(18,new At(2,17)),new Et(22,new At(2,13))),new It(4,Int32Array.from([6,26]),new Et(20,new At(1,80)),new Et(18,new At(2,32)),new Et(26,new At(2,24)),new Et(16,new At(4,9))),new It(5,Int32Array.from([6,30]),new Et(26,new At(1,108)),new Et(24,new At(2,43)),new Et(18,new At(2,15),new At(2,16)),new Et(22,new At(2,11),new At(2,12))),new It(6,Int32Array.from([6,34]),new Et(18,new At(2,68)),new Et(16,new At(4,27)),new Et(24,new At(4,19)),new Et(28,new At(4,15))),new It(7,Int32Array.from([6,22,38]),new Et(20,new At(2,78)),new Et(18,new At(4,31)),new Et(18,new At(2,14),new At(4,15)),new Et(26,new At(4,13),new At(1,14))),new It(8,Int32Array.from([6,24,42]),new Et(24,new At(2,97)),new Et(22,new At(2,38),new At(2,39)),new Et(22,new At(4,18),new At(2,19)),new Et(26,new At(4,14),new At(2,15))),new It(9,Int32Array.from([6,26,46]),new Et(30,new At(2,116)),new Et(22,new At(3,36),new At(2,37)),new Et(20,new At(4,16),new At(4,17)),new Et(24,new At(4,12),new At(4,13))),new It(10,Int32Array.from([6,28,50]),new Et(18,new At(2,68),new At(2,69)),new Et(26,new At(4,43),new At(1,44)),new Et(24,new At(6,19),new At(2,20)),new Et(28,new At(6,15),new At(2,16))),new It(11,Int32Array.from([6,30,54]),new Et(20,new At(4,81)),new Et(30,new At(1,50),new At(4,51)),new Et(28,new At(4,22),new At(4,23)),new Et(24,new At(3,12),new At(8,13))),new It(12,Int32Array.from([6,32,58]),new Et(24,new At(2,92),new At(2,93)),new Et(22,new At(6,36),new At(2,37)),new Et(26,new At(4,20),new At(6,21)),new Et(28,new At(7,14),new At(4,15))),new It(13,Int32Array.from([6,34,62]),new Et(26,new At(4,107)),new Et(22,new At(8,37),new At(1,38)),new Et(24,new At(8,20),new At(4,21)),new Et(22,new At(12,11),new At(4,12))),new It(14,Int32Array.from([6,26,46,66]),new Et(30,new At(3,115),new At(1,116)),new Et(24,new At(4,40),new At(5,41)),new Et(20,new At(11,16),new At(5,17)),new Et(24,new At(11,12),new At(5,13))),new It(15,Int32Array.from([6,26,48,70]),new Et(22,new At(5,87),new At(1,88)),new Et(24,new At(5,41),new At(5,42)),new Et(30,new At(5,24),new At(7,25)),new Et(24,new At(11,12),new At(7,13))),new It(16,Int32Array.from([6,26,50,74]),new Et(24,new At(5,98),new At(1,99)),new Et(28,new At(7,45),new At(3,46)),new Et(24,new At(15,19),new At(2,20)),new Et(30,new At(3,15),new At(13,16))),new It(17,Int32Array.from([6,30,54,78]),new Et(28,new At(1,107),new At(5,108)),new Et(28,new At(10,46),new At(1,47)),new Et(28,new At(1,22),new At(15,23)),new Et(28,new At(2,14),new At(17,15))),new It(18,Int32Array.from([6,30,56,82]),new Et(30,new At(5,120),new At(1,121)),new Et(26,new At(9,43),new At(4,44)),new Et(28,new At(17,22),new At(1,23)),new Et(28,new At(2,14),new At(19,15))),new It(19,Int32Array.from([6,30,58,86]),new Et(28,new At(3,113),new At(4,114)),new Et(26,new At(3,44),new At(11,45)),new Et(26,new At(17,21),new At(4,22)),new Et(26,new At(9,13),new At(16,14))),new It(20,Int32Array.from([6,34,62,90]),new Et(28,new At(3,107),new At(5,108)),new Et(26,new At(3,41),new At(13,42)),new Et(30,new At(15,24),new At(5,25)),new Et(28,new At(15,15),new At(10,16))),new It(21,Int32Array.from([6,28,50,72,94]),new Et(28,new At(4,116),new At(4,117)),new Et(26,new At(17,42)),new Et(28,new At(17,22),new At(6,23)),new Et(30,new At(19,16),new At(6,17))),new It(22,Int32Array.from([6,26,50,74,98]),new Et(28,new At(2,111),new At(7,112)),new Et(28,new At(17,46)),new Et(30,new At(7,24),new At(16,25)),new Et(24,new At(34,13))),new It(23,Int32Array.from([6,30,54,78,102]),new Et(30,new At(4,121),new At(5,122)),new Et(28,new At(4,47),new At(14,48)),new Et(30,new At(11,24),new At(14,25)),new Et(30,new At(16,15),new At(14,16))),new It(24,Int32Array.from([6,28,54,80,106]),new Et(30,new At(6,117),new At(4,118)),new Et(28,new At(6,45),new At(14,46)),new Et(30,new At(11,24),new At(16,25)),new Et(30,new At(30,16),new At(2,17))),new It(25,Int32Array.from([6,32,58,84,110]),new Et(26,new At(8,106),new At(4,107)),new Et(28,new At(8,47),new At(13,48)),new Et(30,new At(7,24),new At(22,25)),new Et(30,new At(22,15),new At(13,16))),new It(26,Int32Array.from([6,30,58,86,114]),new Et(28,new At(10,114),new At(2,115)),new Et(28,new At(19,46),new At(4,47)),new Et(28,new At(28,22),new At(6,23)),new Et(30,new At(33,16),new At(4,17))),new It(27,Int32Array.from([6,34,62,90,118]),new Et(30,new At(8,122),new At(4,123)),new Et(28,new At(22,45),new At(3,46)),new Et(30,new At(8,23),new At(26,24)),new Et(30,new At(12,15),new At(28,16))),new It(28,Int32Array.from([6,26,50,74,98,122]),new Et(30,new At(3,117),new At(10,118)),new Et(28,new At(3,45),new At(23,46)),new Et(30,new At(4,24),new At(31,25)),new Et(30,new At(11,15),new At(31,16))),new It(29,Int32Array.from([6,30,54,78,102,126]),new Et(30,new At(7,116),new At(7,117)),new Et(28,new At(21,45),new At(7,46)),new Et(30,new At(1,23),new At(37,24)),new Et(30,new At(19,15),new At(26,16))),new It(30,Int32Array.from([6,26,52,78,104,130]),new Et(30,new At(5,115),new At(10,116)),new Et(28,new At(19,47),new At(10,48)),new Et(30,new At(15,24),new At(25,25)),new Et(30,new At(23,15),new At(25,16))),new It(31,Int32Array.from([6,30,56,82,108,134]),new Et(30,new At(13,115),new At(3,116)),new Et(28,new At(2,46),new At(29,47)),new Et(30,new At(42,24),new At(1,25)),new Et(30,new At(23,15),new At(28,16))),new It(32,Int32Array.from([6,34,60,86,112,138]),new Et(30,new At(17,115)),new Et(28,new At(10,46),new At(23,47)),new Et(30,new At(10,24),new At(35,25)),new Et(30,new At(19,15),new At(35,16))),new It(33,Int32Array.from([6,30,58,86,114,142]),new Et(30,new At(17,115),new At(1,116)),new Et(28,new At(14,46),new At(21,47)),new Et(30,new At(29,24),new At(19,25)),new Et(30,new At(11,15),new At(46,16))),new It(34,Int32Array.from([6,34,62,90,118,146]),new Et(30,new At(13,115),new At(6,116)),new Et(28,new At(14,46),new At(23,47)),new Et(30,new At(44,24),new At(7,25)),new Et(30,new At(59,16),new At(1,17))),new It(35,Int32Array.from([6,30,54,78,102,126,150]),new Et(30,new At(12,121),new At(7,122)),new Et(28,new At(12,47),new At(26,48)),new Et(30,new At(39,24),new At(14,25)),new Et(30,new At(22,15),new At(41,16))),new It(36,Int32Array.from([6,24,50,76,102,128,154]),new Et(30,new At(6,121),new At(14,122)),new Et(28,new At(6,47),new At(34,48)),new Et(30,new At(46,24),new At(10,25)),new Et(30,new At(2,15),new At(64,16))),new It(37,Int32Array.from([6,28,54,80,106,132,158]),new Et(30,new At(17,122),new At(4,123)),new Et(28,new At(29,46),new At(14,47)),new Et(30,new At(49,24),new At(10,25)),new Et(30,new At(24,15),new At(46,16))),new It(38,Int32Array.from([6,32,58,84,110,136,162]),new Et(30,new At(4,122),new At(18,123)),new Et(28,new At(13,46),new At(32,47)),new Et(30,new At(48,24),new At(14,25)),new Et(30,new At(42,15),new At(32,16))),new It(39,Int32Array.from([6,26,54,82,110,138,166]),new Et(30,new At(20,117),new At(4,118)),new Et(28,new At(40,47),new At(7,48)),new Et(30,new At(43,24),new At(22,25)),new Et(30,new At(10,15),new At(67,16))),new It(40,Int32Array.from([6,30,58,86,114,142,170]),new Et(30,new At(19,118),new At(6,119)),new Et(28,new At(18,47),new At(31,48)),new Et(30,new At(34,24),new At(34,25)),new Et(30,new At(20,15),new At(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(Y||(Y={}));class Nt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Nt.values=new Map([[Y.DATA_MASK_000,new Nt(Y.DATA_MASK_000,(e,t)=>0===(e+t&1))],[Y.DATA_MASK_001,new Nt(Y.DATA_MASK_001,(e,t)=>0===(1&e))],[Y.DATA_MASK_010,new Nt(Y.DATA_MASK_010,(e,t)=>t%3===0)],[Y.DATA_MASK_011,new Nt(Y.DATA_MASK_011,(e,t)=>(e+t)%3===0)],[Y.DATA_MASK_100,new Nt(Y.DATA_MASK_100,(e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1))],[Y.DATA_MASK_101,new Nt(Y.DATA_MASK_101,(e,t)=>e*t%6===0)],[Y.DATA_MASK_110,new Nt(Y.DATA_MASK_110,(e,t)=>e*t%6<3)],[Y.DATA_MASK_111,new Nt(Y.DATA_MASK_111,(e,t)=>0===(e+t+e*t%3&1))]]);class _t{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new E;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let a=0;a<6;a++)e=this.copyBit(a,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let a=5;a>=0;a--)e=this.copyBit(8,a,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let a=t-1;a>=r;a--)n=this.copyBit(8,a,n);for(let a=t-8;a<t;a++)n=this.copyBit(a,8,n);if(this.parsedFormatInfo=St.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new E}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return It.getVersionForNumber(t);let n=0;const r=e-11;for(let i=5;i>=0;i--)for(let t=e-9;t>=r;t--)n=this.copyBit(t,i,n);let a=It.decodeVersionInformation(n);if(null!==a&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;n=0;for(let i=5;i>=0;i--)for(let t=e-9;t>=r;t--)n=this.copyBit(i,t,n);if(a=It.decodeVersionInformation(n),null!==a&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new E}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Nt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const a=t.buildFunctionPattern();let i=!0;const o=new Uint8Array(t.getTotalCodewords());let s=0,l=0,c=0;for(let u=r-1;u>0;u-=2){6===u&&u--;for(let e=0;e<r;e++){const t=i?r-1-e:e;for(let e=0;e<2;e++)a.get(u-e,t)||(c++,l<<=1,this.bitMatrix.get(u-e,t)&&(l|=1),8===c&&(o[s++]=l,c=0,l=0))}i=!i}if(s!==t.getTotalCodewords())throw new E;return o}remask(){if(null===this.parsedFormatInfo)return;const e=Nt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,a=e.getHeight();r<a;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Tt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new d;const r=t.getECBlocksForLevel(n);let a=0;const i=r.getECBlocks();for(const d of i)a+=d.getCount();const o=new Array(a);let s=0;for(const d of i)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=r.getECCodewordsPerBlock()+e;o[s++]=new Tt(e,new Uint8Array(t))}const l=o[0].codewords.length;let c=o.length-1;for(;c>=0&&o[c].codewords.length!==l;)c--;c++;const u=l-r.getECCodewordsPerBlock();let h=0;for(let d=0;d<u;d++)for(let t=0;t<s;t++)o[t].codewords[d]=e[h++];for(let d=c;d<s;d++)o[d].codewords[u]=e[h++];const f=o[0].codewords.length;for(let d=u;d<f;d++)for(let t=0;t<s;t++){const n=t<c?d:d+1;o[t].codewords[n]=e[h++]}return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(X||(X={}));class xt{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,xt.FOR_BITS.set(r,this),xt.FOR_VALUE.set(e,this)}static forBits(e){const t=xt.FOR_BITS.get(e);if(void 0===t)throw new d;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof xt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}xt.FOR_BITS=new Map,xt.FOR_VALUE=new Map,xt.TERMINATOR=new xt(X.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),xt.NUMERIC=new xt(X.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),xt.ALPHANUMERIC=new xt(X.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),xt.STRUCTURED_APPEND=new xt(X.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),xt.BYTE=new xt(X.BYTE,"BYTE",Int32Array.from([8,16,16]),4),xt.ECI=new xt(X.ECI,"ECI",Int32Array.from([0,0,0]),7),xt.KANJI=new xt(X.KANJI,"KANJI",Int32Array.from([8,10,12]),8),xt.FNC1_FIRST_POSITION=new xt(X.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),xt.FNC1_SECOND_POSITION=new xt(X.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),xt.HANZI=new xt(X.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Dt{static decode(e,t,n,r){const a=new mt(e);let i=new T;const o=new Array;let s=-1,l=-1;try{let e,n=null,c=!1;do{if(a.available()<4)e=xt.TERMINATOR;else{const t=a.readBits(4);e=xt.forBits(t)}switch(e){case xt.TERMINATOR:break;case xt.FNC1_FIRST_POSITION:case xt.FNC1_SECOND_POSITION:c=!0;break;case xt.STRUCTURED_APPEND:if(a.available()<16)throw new E;s=a.readBits(8),l=a.readBits(8);break;case xt.ECI:const u=Dt.parseECIValue(a);if(n=A.getCharacterSetECIByValue(u),null===n)throw new E;break;case xt.HANZI:const d=a.readBits(4),h=a.readBits(e.getCharacterCountBits(t));d===Dt.GB2312_SUBSET&&Dt.decodeHanziSegment(a,i,h);break;default:const f=a.readBits(e.getCharacterCountBits(t));switch(e){case xt.NUMERIC:Dt.decodeNumericSegment(a,i,f);break;case xt.ALPHANUMERIC:Dt.decodeAlphanumericSegment(a,i,f,c);break;case xt.BYTE:Dt.decodeByteSegment(a,i,f,n,o,r);break;case xt.KANJI:Dt.decodeKanjiSegment(a,i,f);break;default:throw new E}}}while(e!==xt.TERMINATOR)}catch(c){throw new E}return new Z(e,i.toString(),0===o.length?null:o,null===n?null:n.toString(),s,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new E;const r=new Uint8Array(2*n);let a=0;for(;n>0;){const t=e.readBits(13);let i=t/96<<8&4294967295|t%96;i+=i<959?41377:42657,r[a]=i>>8&255,r[a+1]=255&i,a+=2,n--}try{t.append(N.decode(r,_.GB2312))}catch(i){throw new E(i)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new E;const r=new Uint8Array(2*n);let a=0;for(;n>0;){const t=e.readBits(13);let i=t/192<<8&4294967295|t%192;i+=i<7936?33088:49472,r[a]=i>>8,r[a+1]=i,a+=2,n--}try{t.append(N.decode(r,_.SHIFT_JIS))}catch(i){throw new E(i)}}static decodeByteSegment(e,t,n,r,a,i){if(8*n>e.available())throw new E;const o=new Uint8Array(n);for(let c=0;c<n;c++)o[c]=e.readBits(8);let s;s=null===r?_.guessEncoding(o,i):r.getName();try{t.append(N.decode(o,s))}catch(l){throw new E(l)}a.push(o)}static toAlphaNumericChar(e){if(e>=Dt.ALPHANUMERIC_CHARS.length)throw new E;return Dt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const a=t.length();for(;n>1;){if(e.available()<11)throw new E;const r=e.readBits(11);t.append(Dt.toAlphaNumericChar(Math.floor(r/45))),t.append(Dt.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(e.available()<6)throw new E;t.append(Dt.toAlphaNumericChar(e.readBits(6)))}if(r)for(let i=a;i<t.length();i++)"%"===t.charAt(i)&&(i<t.length()-1&&"%"===t.charAt(i+1)?t.deleteCharAt(i+1):t.setCharAt(i,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new E;const r=e.readBits(10);if(r>=1e3)throw new E;t.append(Dt.toAlphaNumericChar(Math.floor(r/100))),t.append(Dt.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(Dt.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(e.available()<7)throw new E;const n=e.readBits(7);if(n>=100)throw new E;t.append(Dt.toAlphaNumericChar(Math.floor(n/10))),t.append(Dt.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new E;const n=e.readBits(4);if(n>=10)throw new E;t.append(Dt.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new E}}Dt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Dt.GB2312_SUBSET=1;class Mt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Rt{constructor(){this.rsDecoder=new re(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(x.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new _t(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(a){r=a}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new Mt(!0)),e}catch(a){if(null!==r)throw r;throw a}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),a=e.readCodewords(),i=Tt.getDataBlocks(a,n,r);let o=0;for(const c of i)o+=c.getNumDataCodewords();const s=new Uint8Array(o);let l=0;for(const c of i){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)s[l++]=e[n]}return Dt.decode(s,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let a=0;a<t;a++)e[a]=n[a]}}class Ot extends se{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,a=(this.getY()+e)/2,i=(this.estimatedModuleSize+n)/2;return new Ot(r,a,i)}}class kt{constructor(e,t,n,r,a,i,o){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=a,this.moduleSize=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,a=new Int32Array(3),i=this.image;for(let o=0;o<t;o++){const t=r+(0===(1&o)?Math.floor((o+1)/2):-Math.floor((o+1)/2));a[0]=0,a[1]=0,a[2]=0;let s=e;for(;s<n&&!i.get(s,t);)s++;let l=0;for(;s<n;){if(i.get(s,t))if(1===l)a[1]++;else if(2===l){if(this.foundPatternCross(a)){const e=this.handlePossibleCenter(a,t,s);if(null!==e)return e}a[0]=a[2],a[1]=1,a[2]=0,l=1}else a[++l]++;else 1===l&&l++,a[l]++;s++}if(this.foundPatternCross(a)){const e=this.handlePossibleCenter(a,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new D}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const a=this.image,i=a.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;let s=e;for(;s>=0&&a.get(t,s)&&o[1]<=n;)o[1]++,s--;if(s<0||o[1]>n)return NaN;for(;s>=0&&!a.get(t,s)&&o[0]<=n;)o[0]++,s--;if(o[0]>n)return NaN;for(s=e+1;s<i&&a.get(t,s)&&o[1]<=n;)o[1]++,s++;if(s===i||o[1]>n)return NaN;for(;s<i&&!a.get(t,s)&&o[2]<=n;)o[2]++,s++;if(o[2]>n)return NaN;const l=o[0]+o[1]+o[2];return 5*Math.abs(l-r)>=2*r?NaN:this.foundPatternCross(o)?kt.centerFromEnd(o,s):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],a=kt.centerFromEnd(e,n),i=this.crossCheckVertical(t,a,2*e[1],r);if(!isNaN(i)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,i,a))return e.combineEstimate(i,a,t);const n=new Ot(a,i,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Pt extends se{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,a=(this.count*this.getX()+t)/r,i=(this.count*this.getY()+e)/r,o=(this.count*this.estimatedModuleSize+n)/r;return new Pt(a,i,o,r)}}class Lt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Bt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(S.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(S.PURE_BARCODE),r=this.image,a=r.getHeight(),i=r.getWidth();let o=Math.floor(3*a/(4*Bt.MAX_MODULES));(o<Bt.MIN_SKIP||t)&&(o=Bt.MIN_SKIP);let s=!1;const l=new Int32Array(5);for(let u=o-1;u<a&&!s;u+=o){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<i;t++)if(r.get(t,u))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Bt.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,t,n)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(o=2,!0===this.hasSkipped)s=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(u+=e-l[2]-o,t=i-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;Bt.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,i,n)&&(o=l[0],this.hasSkipped&&(s=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return se.orderBestPatterns(c),new Lt(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let a=0;a<5;a++){const n=e[a];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const a=this.getCrossCheckStateCount();let i=0;const o=this.image;for(;e>=i&&t>=i&&o.get(t-i,e-i);)a[2]++,i++;if(e<i||t<i)return!1;for(;e>=i&&t>=i&&!o.get(t-i,e-i)&&a[1]<=n;)a[1]++,i++;if(e<i||t<i||a[1]>n)return!1;for(;e>=i&&t>=i&&o.get(t-i,e-i)&&a[0]<=n;)a[0]++,i++;if(a[0]>n)return!1;const s=o.getHeight(),l=o.getWidth();for(i=1;e+i<s&&t+i<l&&o.get(t+i,e+i);)a[2]++,i++;if(e+i>=s||t+i>=l)return!1;for(;e+i<s&&t+i<l&&!o.get(t+i,e+i)&&a[3]<n;)a[3]++,i++;if(e+i>=s||t+i>=l||a[3]>=n)return!1;for(;e+i<s&&t+i<l&&o.get(t+i,e+i)&&a[4]<n;)a[4]++,i++;if(a[4]>=n)return!1;const c=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(c-r)<2*r&&Bt.foundPatternCross(a)}crossCheckVertical(e,t,n,r){const a=this.image,i=a.getHeight(),o=this.getCrossCheckStateCount();let s=e;for(;s>=0&&a.get(t,s);)o[2]++,s--;if(s<0)return NaN;for(;s>=0&&!a.get(t,s)&&o[1]<=n;)o[1]++,s--;if(s<0||o[1]>n)return NaN;for(;s>=0&&a.get(t,s)&&o[0]<=n;)o[0]++,s--;if(o[0]>n)return NaN;for(s=e+1;s<i&&a.get(t,s);)o[2]++,s++;if(s===i)return NaN;for(;s<i&&!a.get(t,s)&&o[3]<n;)o[3]++,s++;if(s===i||o[3]>=n)return NaN;for(;s<i&&a.get(t,s)&&o[4]<n;)o[4]++,s++;if(o[4]>=n)return NaN;const l=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(l-r)>=2*r?NaN:Bt.foundPatternCross(o)?Bt.centerFromEnd(o,s):NaN}crossCheckHorizontal(e,t,n,r){const a=this.image,i=a.getWidth(),o=this.getCrossCheckStateCount();let s=e;for(;s>=0&&a.get(s,t);)o[2]++,s--;if(s<0)return NaN;for(;s>=0&&!a.get(s,t)&&o[1]<=n;)o[1]++,s--;if(s<0||o[1]>n)return NaN;for(;s>=0&&a.get(s,t)&&o[0]<=n;)o[0]++,s--;if(o[0]>n)return NaN;for(s=e+1;s<i&&a.get(s,t);)o[2]++,s++;if(s===i)return NaN;for(;s<i&&!a.get(s,t)&&o[3]<n;)o[3]++,s++;if(s===i||o[3]>=n)return NaN;for(;s<i&&a.get(s,t)&&o[4]<n;)o[4]++,s++;if(o[4]>=n)return NaN;const l=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(l-r)>=r?NaN:Bt.foundPatternCross(o)?Bt.centerFromEnd(o,s):NaN}handlePossibleCenter(e,t,n,r){const a=e[0]+e[1]+e[2]+e[3]+e[4];let i=Bt.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(i),e[2],a);if(!isNaN(o)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(o),e[2],a),!isNaN(i)&&(!r||this.crossCheckDiagonal(Math.floor(o),Math.floor(i),e[2],a)))){const e=a/7;let t=!1;const n=this.possibleCenters;for(let r=0,a=n.length;r<a;r++){const a=n[r];if(a.aboutEquals(e,o,i)){n[r]=a.combineEstimate(o,i,e),t=!0;break}}if(!t){const t=new Pt(i,o,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=Bt.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const i of this.possibleCenters)i.getCount()>=Bt.CENTER_QUORUM&&(e++,t+=i.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let a=0;for(const i of this.possibleCenters)a+=Math.abs(i.getEstimatedModuleSize()-r);return a<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new D;const t=this.possibleCenters;let n;if(e>3){let r=0,a=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();r+=t,a+=t*t}n=r/e;let i=Math.sqrt(a/e-n*n);t.sort((e,t)=>{const r=Math.abs(t.getEstimatedModuleSize()-n),a=Math.abs(e.getEstimatedModuleSize()-n);return r<a?-1:r>a?1:0});const o=Math.max(.2*n,i);for(let e=0;e<t.length&&t.length>3;e++){const r=t[e];Math.abs(r.getEstimatedModuleSize()-n)>o&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const r=Math.abs(t.getEstimatedModuleSize()-n),a=Math.abs(e.getEstimatedModuleSize()-n);return r<a?1:r>a?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Bt.CENTER_QUORUM=2,Bt.MIN_SKIP=3,Bt.MAX_MODULES=57;class jt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(S.NEED_RESULT_POINT_CALLBACK);const t=new Bt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),a=this.calculateModuleSize(t,n,r);if(a<1)throw new D("No pattern found in proccess finder.");const i=jt.computeDimension(t,n,r,a),o=It.getProvisionalVersionForDimension(i),s=o.getDimensionForVersion()-7;let l=null;if(o.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+r.getX(),i=n.getY()-t.getY()+r.getY(),o=1-3/s,c=Math.floor(t.getX()+o*(e-t.getX())),u=Math.floor(t.getY()+o*(i-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(a,c,u,t);break}catch(h){if(!(h instanceof D))throw h}}const c=jt.createTransform(t,n,r,l,i),u=jt.sampleGrid(this.image,c,i);let d;return d=null===l?[r,t,n]:[r,t,n,l],new le(u,d)}static createTransform(e,t,n,r,a){const i=a-3.5;let o,s,l,c;return null!==r?(o=r.getX(),s=r.getY(),l=i-3,c=l):(o=t.getX()-e.getX()+n.getX(),s=t.getY()-e.getY()+n.getY(),l=i,c=i),he.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,l,c,3.5,i,e.getX(),e.getY(),t.getX(),t.getY(),o,s,n.getX(),n.getY())}static sampleGrid(e,t,n){return pe.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const a=ie.round(se.distance(e,t)/r),i=ie.round(se.distance(e,n)/r);let o=Math.floor((a+i)/2)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw new D("Dimensions could be not found.")}return o}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let a=this.sizeOfBlackWhiteBlackRun(e,t,n,r),i=1,o=e-(n-e);o<0?(i=e/(e-o),o=0):o>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);let s=Math.floor(t-(r-t)*i);return i=1,s<0?(i=t/(t-s),s=0):s>=this.image.getHeight()&&(i=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),o=Math.floor(e+(o-e)*i),a+=this.sizeOfBlackWhiteBlackRun(e,t,o,s),a-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const a=Math.abs(r-t)>Math.abs(n-e);if(a){let a=e;e=t,t=a,a=n,n=r,r=a}const i=Math.abs(n-e),o=Math.abs(r-t);let s=-i/2;const l=e<n?1:-1,c=t<r?1:-1;let u=0;const d=n+l;for(let h=e,f=t;h!==d;h+=l){const n=a?f:h,l=a?h:f;if(1===u===this.image.get(n,l)){if(2===u)return ie.distance(h,f,e,t);u++}if(s+=o,s>0){if(f===r)break;f+=c,s-=i}}return 2===u?ie.distance(n+l,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const a=Math.floor(r*e),i=Math.max(0,t-a),o=Math.min(this.image.getWidth()-1,t+a);if(o-i<3*e)throw new D("Alignment top exceeds estimated module size.");const s=Math.max(0,n-a),l=Math.min(this.image.getHeight()-1,n+a);if(l-s<3*e)throw new D("Alignment bottom exceeds estimated module size.");return new kt(this.image,i,s,o-i,l-s,e,this.resultPointCallback).find()}}class Ft{constructor(){this.decoder=new Rt}getDecoder(){return this.decoder}decode(e,t){let n,r;if(void 0!==t&&null!==t&&void 0!==t.get(S.PURE_BARCODE)){const a=Ft.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,t),r=Ft.NO_POINTS}else{const a=new jt(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(a.getBits(),t),r=a.getPoints()}n.getOther()instanceof Mt&&n.getOther().applyMirroredCorrection(r);const a=new z(n.getText(),n.getRawBytes(),void 0,r,H.QR_CODE,void 0),i=n.getByteSegments();null!==i&&a.putMetadata(Q.BYTE_SEGMENTS,i);const o=n.getECLevel();return null!==o&&a.putMetadata(Q.ERROR_CORRECTION_LEVEL,o),n.hasStructuredAppend()&&(a.putMetadata(Q.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),a.putMetadata(Q.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),a}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new D;const r=this.moduleSize(t,e);let a=t[1],i=n[1],o=t[0],s=n[0];if(o>=s||a>=i)throw new D;if(i-a!==s-o&&(s=o+(i-a),s>=e.getWidth()))throw new D;const l=Math.round((s-o+1)/r),c=Math.round((i-a+1)/r);if(l<=0||c<=0)throw new D;if(c!==l)throw new D;const u=Math.floor(r/2);a+=u,o+=u;const d=o+Math.floor((l-1)*r)-s;if(d>0){if(d>u)throw new D;o-=d}const h=a+Math.floor((c-1)*r)-i;if(h>0){if(h>u)throw new D;a-=h}const f=new x(l,c);for(let p=0;p<c;p++){const t=a+Math.floor(p*r);for(let n=0;n<l;n++)e.get(o+Math.floor(n*r),t)&&f.set(n,p)}return f}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let a=e[0],i=e[1],o=!0,s=0;for(;a<r&&i<n;){if(o!==t.get(a,i)){if(5===++s)break;o=!o}a++,i++}if(a===r||i===n)throw new D;return(a-e[0])/7}}Ft.NO_POINTS=new Array;class zt{PDF417Common(){}static getBitCountSum(e){return ie.sum(e)}static toIntArray(e){if(null==e||!e.length)return zt.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=v.binarySearch(zt.SYMBOL_TABLE,262143&e);return t<0?-1:(zt.CODEWORD_TABLE[t]-1)%zt.NUMBER_OF_CODEWORDS}}zt.NUMBER_OF_CODEWORDS=929,zt.MAX_CODEWORDS_IN_BARCODE=zt.NUMBER_OF_CODEWORDS-1,zt.MIN_ROWS_IN_BARCODE=3,zt.MAX_ROWS_IN_BARCODE=90,zt.MODULES_IN_CODEWORD=17,zt.MODULES_IN_STOP_PATTERN=18,zt.BARS_IN_MODULE=8,zt.EMPTY_INT_ARRAY=new Int32Array([]),zt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),zt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ut{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ht{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),a=Ht.detect(n,r);return a.length||(r=r.clone(),r.rotate180(),a=Ht.detect(n,r)),new Ut(r,a)}static detect(e,t){const n=new Array;let r=0,a=0,i=!1;for(;r<t.getHeight();){const o=Ht.findVertices(t,r,a);if(null!=o[0]||null!=o[3]){if(i=!0,n.push(o),!e)break;null!=o[2]?(a=Math.trunc(o[2].getX()),r=Math.trunc(o[2].getY())):(a=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY()))}else{if(!i)break;i=!1,a=0;for(const e of n)null!=e[1]&&(r=Math.trunc(Math.max(r,e[1].getY()))),null!=e[3]&&(r=Math.max(r,Math.trunc(e[3].getY())));r+=Ht.ROW_STEP}}return n}static findVertices(e,t,n){const r=e.getHeight(),a=e.getWidth(),i=new Array(8);return Ht.copyToResult(i,Ht.findRowsWithPattern(e,r,a,t,n,Ht.START_PATTERN),Ht.INDEXES_START_PATTERN),null!=i[4]&&(n=Math.trunc(i[4].getX()),t=Math.trunc(i[4].getY())),Ht.copyToResult(i,Ht.findRowsWithPattern(e,r,a,t,n,Ht.STOP_PATTERN),Ht.INDEXES_STOP_PATTERN),i}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,a,i){const o=new Array(4);let s=!1;const l=new Int32Array(i.length);for(;r<t;r+=Ht.ROW_STEP){let t=Ht.findGuardPattern(e,a,r,n,!1,i,l);if(null!=t){for(;r>0;){const o=Ht.findGuardPattern(e,a,--r,n,!1,i,l);if(null==o){r++;break}t=o}o[0]=new se(t[0],r),o[1]=new se(t[1],r),s=!0;break}}let c=r+1;if(s){let r=0,a=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);for(;c<t;c++){const t=Ht.findGuardPattern(e,a[0],c,n,!1,i,l);if(null!=t&&Math.abs(a[0]-t[0])<Ht.MAX_PATTERN_DRIFT&&Math.abs(a[1]-t[1])<Ht.MAX_PATTERN_DRIFT)a=t,r=0;else{if(r>Ht.SKIPPED_ROW_COUNT_MAX)break;r++}}c-=r+1,o[2]=new se(a[0],c),o[3]=new se(a[1],c)}return c-r<Ht.BARCODE_MIN_HEIGHT&&v.fill(o,null),o}static findGuardPattern(e,t,n,r,a,i,o){v.fillWithin(o,0,o.length,0);let s=t,l=0;for(;e.get(s,n)&&s>0&&l++<Ht.MAX_PIXEL_DRIFT;)s--;let c=s,u=0,d=i.length;for(let h=a;c<r;c++)if(e.get(c,n)!==h)o[u]++;else{if(u===d-1){if(Ht.patternMatchVariance(o,i,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return new Int32Array([s,c]);s+=o[0]+o[1],m.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,h=!h}return u===d-1&&Ht.patternMatchVariance(o,i,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE?new Int32Array([s,c-1]):null}static patternMatchVariance(e,t,n){let r=e.length,a=0,i=0;for(let l=0;l<r;l++)a+=e[l],i+=t[l];if(a<i)return 1/0;let o=a/i;n*=o;let s=0;for(let l=0;l<r;l++){let r=e[l],a=t[l]*o,i=r>a?r-a:a-r;if(i>n)return 1/0;s+=i}return s/a}}Ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ht.MAX_AVG_VARIANCE=.42,Ht.MAX_INDIVIDUAL_VARIANCE=.8,Ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ht.MAX_PIXEL_DRIFT=3,Ht.MAX_PATTERN_DRIFT=5,Ht.SKIPPED_ROW_COUNT_MAX=25,Ht.ROW_STEP=5,Ht.BARCODE_MIN_HEIGHT=10;class Vt{constructor(e,t){if(0===t.length)throw new d;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),m.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),a=n.length-t.length;m.arraycopy(n,0,r,0,a);for(let i=a;i<n.length;i++)r[i]=this.field.add(t[i-a],n[i]);return new Vt(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Vt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Vt(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,a=r.length,i=new Int32Array(n+a-1);for(let o=0;o<n;o++){let e=t[o];for(let t=0;t<a;t++)i[o+t]=this.field.add(i[o+t],this.field.multiply(e,r[t]))}return new Vt(this.field,i)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Vt(this.field,t)}multiplyScalar(e){if(0===e)return new Vt(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Vt(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return new Vt(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let a=0;a<n;a++)r[a]=this.field.multiply(this.coefficients[a],t);return new Vt(this.field,r)}toString(){let e=new T;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Wt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}inverse(e){if(0===e)throw new J;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Gt extends Wt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Vt(this,new Int32Array([0])),this.one=new Vt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Vt(this,n)}}Gt.PDF417_GF=new Gt(zt.NUMBER_OF_CODEWORDS,3);class Yt{constructor(){this.field=Gt.PDF417_GF}decode(e,t,n){let r=new Vt(this.field,e),a=new Int32Array(t),i=!1;for(let f=t;f>0;f--){let e=r.evaluateAt(this.field.exp(f));a[t-f]=e,0!==e&&(i=!0)}if(!i)return 0;let o=this.field.getOne();if(null!=n)for(const f of n){let t=this.field.exp(e.length-1-f),n=new Vt(this.field,new Int32Array([this.field.subtract(0,t),1]));o=o.multiply(n)}let s=new Vt(this.field,a),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),s,t),c=l[0],u=l[1],d=this.findErrorLocations(c),h=this.findErrorMagnitudes(u,c,d);for(let p=0;p<d.length;p++){let t=e.length-1-this.field.log(d[p]);if(t<0)throw f.getChecksumInstance();e[t]=this.field.subtract(e[t],h[p])}return d.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=e,a=t,i=this.field.getZero(),o=this.field.getOne();for(;a.getDegree()>=Math.round(n/2);){let e=r,t=i;if(r=a,i=o,r.isZero())throw f.getChecksumInstance();a=e;let n=this.field.getZero(),s=r.getCoefficient(r.getDegree()),l=this.field.inverse(s);for(;a.getDegree()>=r.getDegree()&&!a.isZero();){let e=a.getDegree()-r.getDegree(),t=this.field.multiply(a.getCoefficient(a.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),a=a.subtract(r.multiplyByMonomial(e,t))}o=n.multiply(i).subtract(t).negative()}let s=o.getCoefficient(0);if(0===s)throw f.getChecksumInstance();let l=this.field.inverse(s);return[o.multiply(l),a.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let a=1;a<this.field.getSize()&&r<t;a++)0===e.evaluateAt(a)&&(n[r]=this.field.inverse(a),r++);if(r!==t)throw f.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),a=new Int32Array(r);for(let l=1;l<=r;l++)a[r-l]=this.field.multiply(l,t.getCoefficient(l));let i=new Vt(this.field,a),o=n.length,s=new Int32Array(o);for(let l=0;l<o;l++){let t=this.field.inverse(n[l]),r=this.field.subtract(0,e.evaluateAt(t)),a=this.field.inverse(i.evaluateAt(t));s[l]=this.field.multiply(r,a)}return s}}class Xt{constructor(e,t,n,r,a){e instanceof Xt?this.constructor_2(e):this.constructor_1(e,t,n,r,a)}constructor_1(e,t,n,r,a){const i=null==t||null==n,o=null==r||null==a;if(i&&o)throw new D;i?(t=new se(0,r.getY()),n=new se(0,a.getY())):o&&(r=new se(e.getWidth()-1,t.getY()),a=new se(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Xt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,a=this.bottomLeft,i=this.topRight,o=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,a=Math.trunc(t.getY()-e);a<0&&(a=0);let o=new se(t.getX(),a);n?r=o:i=o}if(t>0){let e=n?this.bottomLeft:this.bottomRight,r=Math.trunc(e.getY()+t);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let i=new se(e.getX(),r);n?a=i:o=i}return new Xt(this.image,r,a,i,o)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class qt{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qt{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(e,r,a,i,o,s){if("%%"===e)return"%";if(void 0===t[++n])return;e=i?parseInt(i.substr(1)):void 0;let l,c=o?parseInt(o.substr(1)):void 0;switch(s){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(a),d=a&&a[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==r?l+d:d+l;return l}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,r)}format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.buffer+=Qt.form(e,n)}toString(){return this.buffer}}class Zt{constructor(e){this.boundingBox=new Xt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<Zt.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],null!=t))return t;if(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Qt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Zt.MAX_NEARBY_DISTANCE=5;class Kt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const a={getKey:()=>n,getValue:()=>r};a.getValue()>e?(e=a.getValue(),t=[],t.push(a.getKey())):a.getValue()===e&&t.push(a.getKey())}return zt.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class $t extends Zt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),s=-1,l=1,c=0;for(let u=i;u<o;u++){if(null==t[u])continue;let n=t[u],r=n.getRowNumber()-s;if(0===r)c++;else if(1===r)l=Math.max(l,c),c=1,s=n.getRowNumber();else if(r<0||n.getRowNumber()>=e.getRowCount()||r>u)t[u]=null;else{let e;e=l>2?(l-2)*r:r;let a=e>=u;for(let n=1;n<=e&&!a;n++)a=null!=t[u-n];a?t[u]=null:(s=n.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(n.getY())),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.getCodewords(),s=-1;for(let l=a;l<i;l++){if(null==o[l])continue;let t=o[l];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-s;0===n||(1===n?s=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?o[l]=null:s=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Kt,n=new Kt,r=new Kt,a=new Kt;for(let o of e){if(null==o)continue;o.setRowNumberAsRowIndicatorColumn();let e=o.getValue()%30,i=o.getRowNumber();switch(this._isLeft||(i+=2),i%3){case 0:n.setValue(3*e+1);break;case 1:a.setValue(e/3),r.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===a.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<zt.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>zt.MAX_ROWS_IN_BARCODE)return null;let i=new qt(t.getValue()[0],n.getValue()[0],r.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(e,i),i}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let a=r.getValue()%30,i=r.getRowNumber();if(i>t.getRowCount())e[n]=null;else switch(this._isLeft||(i+=2),i%3){case 0:3*a+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(a/3)===t.getErrorCorrectionLevel()&&a%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:a+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Jt{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=zt.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let r=this.detectionResultColumns[t].getCodewords()[n];null!=r&&(r.setRowNumber(e[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),a=0;for(let t=this.barcodeColumnCount+1;t>0&&a<this.ADJUST_ROW_NUMBER_SKIP;t--){let i=this.detectionResultColumns[t].getCodewords()[n];null!=i&&(a=Jt.adjustRowNumberIfValid(r,a,i),i.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),a=0;for(let t=1;t<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;t++){let i=this.detectionResultColumns[t].getCodewords()[n];null!=i&&(a=Jt.adjustRowNumberIfValid(r,a,i),i.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],a=this.detectionResultColumns[e-1].getCodewords(),i=a;null!=this.detectionResultColumns[e+1]&&(i=this.detectionResultColumns[e+1].getCodewords());let o=new Array(14);o[2]=a[t],o[3]=i[t],t>0&&(o[0]=n[t-1],o[4]=a[t-1],o[5]=i[t-1]),t>1&&(o[8]=n[t-2],o[10]=a[t-2],o[11]=i[t-2]),t<n.length-1&&(o[1]=n[t+1],o[6]=a[t+1],o[7]=i[t+1]),t<n.length-2&&(o[9]=n[t+2],o[12]=a[t+2],o[13]=i[t+2]);for(let s of o)if(Jt.adjustRowNumber(r,s))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Qt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let r=this.detectionResultColumns[e].getCodewords()[n];null!=r?t.format(" %3d|%3d",r.getRowNumber(),r.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,r){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<zt.SYMBOL_TABLE.length;e++){let t=zt.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<zt.BARS_IN_MODULE;r++){let a=0;for(;(1&t)===n;)a+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(zt.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][zt.BARS_IN_MODULE-r-1]=Math.fround(a/zt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=ie.sum(e),n=new Int32Array(zt.BARS_IN_MODULE),r=0,a=0;for(let i=0;i<zt.MODULES_IN_CODEWORD;i++){let o=t/(2*zt.MODULES_IN_CODEWORD)+i*t/zt.MODULES_IN_CODEWORD;a+e[r]<=o&&(a+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===zt.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=ie.sum(e),n=new Array(zt.BARS_IN_MODULE);if(t>1)for(let i=0;i<n.length;i++)n[i]=Math.fround(e[i]/t);let r=oe.MAX_VALUE,a=-1;this.bSymbolTableReady||tn.initialize();for(let i=0;i<tn.RATIOS_TABLE.length;i++){let e=0,t=tn.RATIOS_TABLE[i];for(let a=0;a<zt.BARS_IN_MODULE;a++){let i=Math.fround(t[a]-n[a]);if(e+=Math.fround(i*i),e>=r)break}e<r&&(r=e,a=zt.SYMBOL_TABLE[i])}return a}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(zt.SYMBOL_TABLE.length).map(e=>new Array(zt.BARS_IN_MODULE));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class an extends c{}an.kind="NullPointerException";class on{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new an;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new g;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class sn extends c{}class ln extends on{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new d("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new sn;t=w.MAX_VALUE}this.buf=v.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new g;this.ensureCapacity(this.count+n),m.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return v.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function cn(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let un;function dn(e){if("undefined"===typeof un&&(un=cn()),null===un)throw new Error("BigInt is not supported!");return un(e)}function hn(){let e=[];e[0]=dn(1);let t=dn(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(q||(q={}));class fn{static decode(e,t){let n=new T(""),r=A.ISO8859_1;n.enableDecoding(r);let a=1,i=e[a++],o=new nn;for(;a<e[0];){switch(i){case fn.TEXT_COMPACTION_MODE_LATCH:a=fn.textCompaction(e,a,n);break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:a=fn.byteCompaction(i,e,r,a,n);break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case fn.NUMERIC_COMPACTION_MODE_LATCH:a=fn.numericCompaction(e,a,n);break;case fn.ECI_CHARSET:A.getCharacterSetECIByValue(e[a++]);break;case fn.ECI_GENERAL_PURPOSE:a+=2;break;case fn.ECI_USER_DEFINED:a++;break;case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=fn.decodeMacroBlock(e,a,o);break;case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:throw new E;default:a--,a=fn.textCompaction(e,a,n)}if(!(a<e.length))throw E.getFormatInstance();i=e[a++]}if(0===n.length())throw E.getFormatInstance();let s=new Z(null,n.toString(),null,t);return s.setOther(o),s}static decodeMacroBlock(e,t,n){if(t+fn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw E.getFormatInstance();let r=new Int32Array(fn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let o=0;o<fn.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)r[o]=e[t];n.setSegmentIndex(w.parseInt(fn.decodeBase900toBase10(r,fn.NUMBER_OF_SEQUENCE_CODEWORDS)));let a=new T;t=fn.textCompaction(e,t,a),n.setFileId(a.toString());let i=-1;for(e[t]===fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(i=t+1);t<e[0];)switch(e[t]){case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new T;t=fn.textCompaction(e,t+1,r),n.setFileName(r.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let a=new T;t=fn.textCompaction(e,t+1,a),n.setSender(a.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let i=new T;t=fn.textCompaction(e,t+1,i),n.setAddressee(i.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let o=new T;t=fn.numericCompaction(e,t+1,o),n.setSegmentCount(w.parseInt(o.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let s=new T;t=fn.numericCompaction(e,t+1,s),n.setTimestamp(rn.parseLong(s.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new T;t=fn.numericCompaction(e,t+1,l),n.setChecksum(w.parseInt(l.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new T;t=fn.numericCompaction(e,t+1,c),n.setFileSize(rn.parseLong(c.toString()));break;default:throw E.getFormatInstance()}break;case fn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw E.getFormatInstance()}if(-1!==i){let r=t-i;n.isLastSegment()&&r--,n.setOptionalData(v.copyOfRange(e,i,i+r))}return t}static textCompaction(e,t,n){let r=new Int32Array(2*(e[0]-t)),a=new Int32Array(2*(e[0]-t)),i=0,o=!1;for(;t<e[0]&&!o;){let n=e[t++];if(n<fn.TEXT_COMPACTION_MODE_LATCH)r[i]=n/30,r[i+1]=n%30,i+=2;else switch(n){case fn.TEXT_COMPACTION_MODE_LATCH:r[i++]=fn.TEXT_COMPACTION_MODE_LATCH;break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[i]=fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],a[i]=n,i++}}return fn.decodeTextCompaction(r,a,i,n),t}static decodeTextCompaction(e,t,n,r){let a=q.ALPHA,i=q.ALPHA,o=0;for(;o<n;){let n=e[o],s="";switch(a){case q.ALPHA:if(n<26)s=String.fromCharCode(65+n);else switch(n){case 26:s=" ";break;case fn.LL:a=q.LOWER;break;case fn.ML:a=q.MIXED;break;case fn.PS:i=a,a=q.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:a=q.ALPHA}break;case q.LOWER:if(n<26)s=String.fromCharCode(97+n);else switch(n){case 26:s=" ";break;case fn.AS:i=a,a=q.ALPHA_SHIFT;break;case fn.ML:a=q.MIXED;break;case fn.PS:i=a,a=q.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:a=q.ALPHA}break;case q.MIXED:if(n<fn.PL)s=fn.MIXED_CHARS[n];else switch(n){case fn.PL:a=q.PUNCT;break;case 26:s=" ";break;case fn.LL:a=q.LOWER;break;case fn.AL:a=q.ALPHA;break;case fn.PS:i=a,a=q.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:a=q.ALPHA}break;case q.PUNCT:if(n<fn.PAL)s=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:a=q.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:a=q.ALPHA}break;case q.ALPHA_SHIFT:if(a=i,n<26)s=String.fromCharCode(65+n);else switch(n){case 26:s=" ";break;case fn.TEXT_COMPACTION_MODE_LATCH:a=q.ALPHA}break;case q.PUNCT_SHIFT:if(a=i,n<fn.PAL)s=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:a=q.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case fn.TEXT_COMPACTION_MODE_LATCH:a=q.ALPHA}}""!==s&&r.append(s),o++}}static byteCompaction(e,t,n,r,a){let i=new ln,o=0,s=0,l=!1;switch(e){case fn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[r++];for(;r<t[0]&&!l;)switch(e[o++]=n,s=900*s+n,n=t[r++],n){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(o%5===0&&o>0){for(let e=0;e<6;++e)i.write(Number(dn(s)>>dn(8*(5-e))));s=0,o=0}}r===t[0]&&n<fn.TEXT_COMPACTION_MODE_LATCH&&(e[o++]=n);for(let t=0;t<o;t++)i.write(e[t]);break;case fn.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!l;){let e=t[r++];if(e<fn.TEXT_COMPACTION_MODE_LATCH)o++,s=900*s+e;else switch(e){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0}if(o%5===0&&o>0){for(let e=0;e<6;++e)i.write(Number(dn(s)>>dn(8*(5-e))));s=0,o=0}}}return a.append(N.decode(i.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,a=!1,i=new Int32Array(fn.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!a;){let o=e[t++];if(t===e[0]&&(a=!0),o<fn.TEXT_COMPACTION_MODE_LATCH)i[r]=o,r++;else switch(o){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,a=!0}(r%fn.MAX_NUMERIC_CODEWORDS===0||o===fn.NUMERIC_COMPACTION_MODE_LATCH||a)&&r>0&&(n.append(fn.decodeBase900toBase10(i,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=dn(0);for(let a=0;a<t;a++)n+=fn.EXP900[t-a-1]*dn(e[a]);let r=n.toString();if("1"!==r.charAt(0))throw new E;return r.substring(1)}}fn.TEXT_COMPACTION_MODE_LATCH=900,fn.BYTE_COMPACTION_MODE_LATCH=901,fn.NUMERIC_COMPACTION_MODE_LATCH=902,fn.BYTE_COMPACTION_MODE_LATCH_6=924,fn.ECI_USER_DEFINED=925,fn.ECI_GENERAL_PURPOSE=926,fn.ECI_CHARSET=927,fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fn.MACRO_PDF417_TERMINATOR=922,fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fn.MAX_NUMERIC_CODEWORDS=15,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fn.PL=25,fn.LL=27,fn.AS=27,fn.ML=28,fn.AL=28,fn.PS=29,fn.PAL=29,fn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",fn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",fn.EXP900=cn()?hn():[],fn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class pn{constructor(){}static decode(e,t,n,r,a,i,o){let s,l=new Xt(e,t,n,r,a),c=null,u=null;for(let f=!0;;f=!1){if(null!=t&&(c=pn.getRowIndicatorColumn(e,l,t,!0,i,o)),null!=r&&(u=pn.getRowIndicatorColumn(e,l,r,!1,i,o)),s=pn.merge(c,u),null==s)throw D.getNotFoundInstance();let n=s.getBoundingBox();if(!f||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}s.setBoundingBox(l);let d=s.getBarcodeColumnCount()+1;s.setDetectionResultColumn(0,c),s.setDetectionResultColumn(d,u);let h=null!=c;for(let f=1;f<=d;f++){let t,n=h?f:d-f;if(void 0!==s.getDetectionResultColumn(n))continue;t=0===n||n===d?new $t(l,0===n):new Zt(l),s.setDetectionResultColumn(n,t);let r=-1,a=r;for(let c=l.getMinY();c<=l.getMaxY();c++){if(r=pn.getStartColumn(s,n,c,h),r<0||r>l.getMaxX()){if(-1===a)continue;r=a}let u=pn.detectCodeword(e,l.getMinX(),l.getMaxX(),h,r,c,i,o);null!=u&&(t.setCodeword(c,u),a=r,i=Math.min(i,u.getWidth()),o=Math.max(o,u.getWidth()))}}return pn.createDecoderResult(s)}static merge(e,t){if(null==e&&null==t)return null;let n=pn.getBarcodeMetadata(e,t);if(null==n)return null;let r=Xt.merge(pn.adjustBoundingBox(e),pn.adjustBoundingBox(t));return new Jt(n,r)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=pn.getMax(t),r=0;for(let o of t)if(r+=n-o,o>0)break;let a=e.getCodewords();for(let o=0;r>0&&null==a[o];o++)r--;let i=0;for(let o=t.length-1;o>=0&&(i+=n-t[o],!(t[o]>0));o--);for(let o=a.length-1;i>0&&null==a[o];o--)i--;return e.getBoundingBox().addMissingRows(r,i,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,a,i){let o=new $t(t,r);for(let s=0;s<2;s++){let l=0===s?1:-1,c=Math.trunc(Math.trunc(n.getX()));for(let s=Math.trunc(Math.trunc(n.getY()));s<=t.getMaxY()&&s>=t.getMinY();s+=l){let t=pn.detectCodeword(e,0,e.getWidth(),r,c,s,a,i);null!=t&&(o.setCodeword(s,t),c=r?t.getStartX():t.getEndX())}}return o}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-pn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(a<1||a>zt.MAX_CODEWORDS_IN_BARCODE)throw D.getNotFoundInstance();n.setValue(a)}else r[0]!==a&&n.setValue(a)}static createDecoderResult(e){let t=pn.createBarcodeMatrix(e);pn.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],i=new Array;for(let s=0;s<e.getBarcodeRowCount();s++)for(let o=0;o<e.getBarcodeColumnCount();o++){let l=t[s][o+1].getValue(),c=s*e.getBarcodeColumnCount()+o;0===l.length?n.push(c):1===l.length?r[c]=l[0]:(i.push(c),a.push(l))}let o=new Array(a.length);for(let s=0;s<o.length;s++)o[s]=a[s];return pn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,zt.toIntArray(n),zt.toIntArray(i),o)}static createDecoderResultFromAmbiguousValues(e,t,n,r,a){let i=new Int32Array(r.length),o=100;for(;o-- >0;){for(let e=0;e<i.length;e++)t[r[e]]=a[e][i[e]];try{return pn.decodeCodewords(t,e,n)}catch(s){if(!(s instanceof f))throw s}if(0===i.length)throw f.getChecksumInstance();for(let e=0;e<i.length;e++){if(i[e]<a[e].length-1){i[e]++;break}if(i[e]=0,e===i.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let e=0;e<t[r].length;e++)t[r][e]=new Kt;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r)for(let e of r.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=0){if(r>=t.length)continue;t[r][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let a=r?1:-1,i=null;if(pn.isValidBarcodeColumn(e,t-a)&&(i=e.getDetectionResultColumn(t-a).getCodeword(n)),null!=i)return r?i.getEndX():i.getStartX();if(i=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=i)return r?i.getStartX():i.getEndX();if(pn.isValidBarcodeColumn(e,t-a)&&(i=e.getDetectionResultColumn(t-a).getCodewordNearby(n)),null!=i)return r?i.getEndX():i.getStartX();let o=0;for(;pn.isValidBarcodeColumn(e,t-a);){t-=a;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+a*o*(n.getEndX()-n.getStartX());o++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,a,i,o,s){a=pn.adjustCodewordStartColumn(e,t,n,r,a,i);let l,c=pn.getModuleBitCount(e,t,n,r,a,i);if(null==c)return null;let u=ie.sum(c);if(r)l=a+u;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=a,a=l-u}if(!pn.checkCodewordSkew(u,o,s))return null;let d=tn.getDecodedValue(c),h=zt.getCodeword(d);return-1===h?null:new en(a,l,pn.getCodewordBucketNumber(d),h)}static getModuleBitCount(e,t,n,r,a,i){let o=a,s=new Int32Array(8),l=0,c=r?1:-1,u=r;for(;(r?o<n:o>=t)&&l<s.length;)e.get(o,i)===u?(s[l]++,o+=c):(l++,u=!u);return l===s.length||o===(r?n:t)&&l===s.length-1?s:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,a,i){let o=a,s=r?-1:1;for(let l=0;l<2;l++){for(;(r?o>=t:o<n)&&r===e.get(o,i);){if(Math.abs(a-o)>pn.CODEWORD_SKEW_SIZE)return a;o+=s}s=-s,r=!r}return o}static checkCodewordSkew(e,t,n){return t-pn.CODEWORD_SKEW_SIZE<=e&&e<=n+pn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw E.getFormatInstance();let r=1<<t+1,a=pn.correctErrors(e,n,r);pn.verifyCodewordCount(e,r);let i=fn.decode(e,""+t);return i.setErrorsCorrected(a),i.setErasures(n.length),i}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+pn.MAX_ERRORS||n<0||n>pn.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return pn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw E.getFormatInstance();let n=e[0];if(n>e.length)throw E.getFormatInstance();if(0===n){if(!(t<e.length))throw E.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return pn.getCodewordBucketNumber(pn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Qt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let a=e[n][r];0===a.getValue().length?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()}}pn.CODEWORD_SKEW_SIZE=2,pn.MAX_ERRORS=3,pn.MAX_EC_CODEWORDS=512,pn.errorCorrection=new Yt;class mn{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=mn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw D.getNotFoundInstance();return n[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return mn.decode(e,t,!0)}catch(n){if(n instanceof E||n instanceof f)throw D.getNotFoundInstance();throw n}}static decode(e,t,n){const r=new Array,a=Ht.detectMultiple(e,t,n);for(const i of a.getPoints()){const e=pn.decode(a.getBits(),i[4],i[5],i[6],i[7],mn.getMinCodewordWidth(i),mn.getMaxCodewordWidth(i)),t=new z(e.getText(),e.getRawBytes(),void 0,i,H.PDF_417);t.putMetadata(Q.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(Q.PDF417_EXTRA_METADATA,n),r.push(t)}return r.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?w.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(mn.getMaxWidth(e[0],e[4]),mn.getMaxWidth(e[6],e[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.max(mn.getMaxWidth(e[1],e[5]),mn.getMaxWidth(e[7],e[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(mn.getMinWidth(e[0],e[4]),mn.getMinWidth(e[6],e[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.min(mn.getMinWidth(e[1],e[5]),mn.getMinWidth(e[7],e[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))}reset(){}}class gn extends c{}gn.kind="ReaderException";class yn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(S.TRY_HARDER),r=t(e)?null:e.get(S.POSSIBLE_FORMATS),a=new Array;if(!t(r)){const t=r.some(e=>e===H.UPC_A||e===H.UPC_E||e===H.EAN_13||e===H.EAN_8||e===H.CODABAR||e===H.CODE_39||e===H.CODE_93||e===H.CODE_128||e===H.ITF||e===H.RSS_14||e===H.RSS_EXPANDED);t&&!n&&a.push(new lt(e,this.verbose)),r.includes(H.QR_CODE)&&a.push(new Ft),r.includes(H.DATA_MATRIX)&&a.push(new wt),r.includes(H.AZTEC)&&a.push(new ye),r.includes(H.PDF_417)&&a.push(new mn),t&&n&&a.push(new lt(e,this.verbose))}0===a.length&&(n||a.push(new lt(e,this.verbose)),a.push(new Ft),a.push(new wt),a.push(new ye),a.push(new mn),n&&a.push(new lt(e,this.verbose))),this.readers=a}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new gn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof gn)continue}throw new D("No MultiFormat Readers were able to detect the code.")}}class vn extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=new yn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class wn extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new mn,e)}}class Cn extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Ft,e)}}var bn;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(bn||(bn={}));var Sn=bn;class En{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new $(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let a=t.length;a<=e;a++){const e=n.multiply(new $(r,Int32Array.from([1,r.exp(a-1+r.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new d("No error correction bytes");const n=e.length-t;if(n<=0)throw new d("No data bytes provided");const r=this.buildGenerator(t),a=new Int32Array(n);m.arraycopy(e,0,a,0,n);let i=new $(this.field,a);i=i.multiplyByMonomial(t,1);const o=i.divide(r)[1].getCoefficients(),s=t-o.length;for(let l=0;l<s;l++)e[n+l]=0;m.arraycopy(o,0,e,n+s,o.length)}}class An{constructor(){}static applyMaskPenaltyRule1(e){return An.applyMaskPenaltyRule1Internal(e,!0)+An.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),a=e.getHeight();for(let i=0;i<a-1;i++){const e=n[i];for(let a=0;a<r-1;a++){const r=e[a];r===e[a+1]&&r===n[i+1][a]&&r===n[i+1][a+1]&&t++}}return An.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),a=e.getHeight();for(let i=0;i<a;i++)for(let e=0;e<r;e++){const o=n[i];e+6<r&&1===o[e]&&0===o[e+1]&&1===o[e+2]&&1===o[e+3]&&1===o[e+4]&&0===o[e+5]&&1===o[e+6]&&(An.isWhiteHorizontal(o,e-4,e)||An.isWhiteHorizontal(o,e+7,e+11))&&t++,i+6<a&&1===n[i][e]&&0===n[i+1][e]&&1===n[i+2][e]&&1===n[i+3][e]&&1===n[i+4][e]&&0===n[i+5][e]&&1===n[i+6][e]&&(An.isWhiteVertical(n,e,i-4,i)||An.isWhiteVertical(n,e,i+7,i+11))&&t++}return t*An.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(1===e[r])return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let a=n;a<r;a++)if(1===e[a][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),a=e.getHeight();for(let o=0;o<a;o++){const e=n[o];for(let n=0;n<r;n++)1===e[n]&&t++}const i=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-i)/i)*An.N4}static getDataMaskBit(e,t,n){let r,a;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:a=n*t,r=(1&a)+a%3;break;case 6:a=n*t,r=(1&a)+a%3&1;break;case 7:a=n*t,r=a%3+(n+t&1)&1;break;default:throw new d("Invalid mask pattern: "+e)}return 0===r}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),i=e.getArray();for(let o=0;o<r;o++){let e=0,r=-1;for(let s=0;s<a;s++){const a=t?i[o][s]:i[s][o];a===r?e++:(e>=5&&(n+=An.N1+(e-5)),e=1,r=a)}e>=5&&(n+=An.N1+(e-5))}return n}}An.N1=3,An.N2=3,An.N3=40,An.N4=10;class In{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)v.fill(t,e)}equals(e){if(!(e instanceof In))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const e=this.bytes[n],r=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==r[t])return!1}return!0}toString(){const e=new T;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,r=this.width;t<r;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class Nn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new T;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Nn.NUM_MASK_PATTERNS}}Nn.NUM_MASK_PATTERNS=8;class _n extends c{}_n.kind="WriterException";class Tn{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,a){Tn.clearMatrix(a),Tn.embedBasicPatterns(n,a),Tn.embedTypeInfo(t,r,a),Tn.maybeEmbedVersionInfo(n,a),Tn.embedDataBits(e,r,a)}static embedBasicPatterns(e,t){Tn.embedPositionDetectionPatternsAndSeparators(t),Tn.embedDarkDotAtLeftBottomCorner(t),Tn.maybeEmbedPositionAdjustmentPatterns(e,t),Tn.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new C;Tn.makeTypeInfoBits(e,t,r);for(let a=0,i=r.getSize();a<i;++a){const e=r.get(r.getSize()-1-a),t=Tn.TYPE_INFO_COORDINATES[a],i=t[0],o=t[1];if(n.setBoolean(i,o,e),a<8){const t=n.getWidth()-a-1,r=8;n.setBoolean(t,r,e)}else{const t=8,r=n.getHeight()-7+(a-8);n.setBoolean(t,r,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new C;Tn.makeVersionInfoBits(e,n);let r=17;for(let a=0;a<6;++a)for(let e=0;e<3;++e){const i=n.get(r);r--,t.setBoolean(a,t.getHeight()-11+e,i),t.setBoolean(t.getHeight()-11+e,a,i)}}static embedDataBits(e,t,n){let r=0,a=-1,i=n.getWidth()-1,o=n.getHeight()-1;for(;i>0;){for(6===i&&(i-=1);o>=0&&o<n.getHeight();){for(let a=0;a<2;++a){const s=i-a;if(!Tn.isEmpty(n.get(s,o)))continue;let l;r<e.getSize()?(l=e.get(r),++r):l=!1,255!==t&&An.getDataMaskBit(t,s,o)&&(l=!l),n.setBoolean(s,o,l)}o+=a}a=-a,o+=a,i-=2}if(r!==e.getSize())throw new _n("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-w.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new d("0 polynomial");const n=Tn.findMSBSet(t);for(e<<=n-1;Tn.findMSBSet(e)>=n;)e^=t<<Tn.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Nn.isValidMaskPattern(t))throw new _n("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const a=Tn.calculateBCHCode(r,Tn.TYPE_INFO_POLY);n.appendBits(a,10);const i=new C;if(i.appendBits(Tn.TYPE_INFO_MASK_PATTERN,15),n.xor(i),15!==n.getSize())throw new _n("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=Tn.calculateBCHCode(e.getVersionNumber(),Tn.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new _n("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;Tn.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),Tn.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new _n;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!Tn.isEmpty(n.get(e+r,t)))throw new _n;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!Tn.isEmpty(n.get(e,t+r)))throw new _n;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const a=Tn.POSITION_ADJUSTMENT_PATTERN[r];for(let i=0;i<5;++i)n.setNumber(e+i,t+r,a[i])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const a=Tn.POSITION_DETECTION_PATTERN[r];for(let i=0;i<7;++i)n.setNumber(e+i,t+r,a[i])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Tn.POSITION_DETECTION_PATTERN[0].length;Tn.embedPositionDetectionPattern(0,0,e),Tn.embedPositionDetectionPattern(e.getWidth()-t,0,e),Tn.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;Tn.embedHorizontalSeparationPattern(0,n-1,e),Tn.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),Tn.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;Tn.embedVerticalSeparationPattern(r,0,e),Tn.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),Tn.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let a=0,i=r.length;a!==i;a++){const e=r[a];if(e>=0)for(let n=0;n!==i;n++){const a=r[n];a>=0&&Tn.isEmpty(t.get(a,e))&&Tn.embedPositionAdjustmentPattern(a-2,e-2,t)}}}}Tn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Tn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Tn.VERSION_INFO_POLY=7973,Tn.TYPE_INFO_POLY=1335,Tn.TYPE_INFO_MASK_PATTERN=21522;class xn{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Dn{constructor(){}static calculateMaskPenalty(e){return An.applyMaskPenaltyRule1(e)+An.applyMaskPenaltyRule2(e)+An.applyMaskPenaltyRule3(e)+An.applyMaskPenaltyRule4(e)}static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Dn.DEFAULT_BYTE_MODE_ENCODING;const a=null!==n&&void 0!==n.get(Sn.CHARACTER_SET);a&&(r=n.get(Sn.CHARACTER_SET).toString());const i=this.chooseMode(e,r),o=new C;if(i===xt.BYTE&&(a||Dn.DEFAULT_BYTE_MODE_ENCODING!==r)){const e=A.getCharacterSetECIByName(r);void 0!==e&&this.appendECI(e,o)}this.appendModeInfo(i,o);const s=new C;let l;if(this.appendBytes(e,i,s,r),null!==n&&void 0!==n.get(Sn.QR_VERSION)){const e=Number.parseInt(n.get(Sn.QR_VERSION).toString(),10);l=It.getVersionForNumber(e);const r=this.calculateBitsNeeded(i,o,s,l);if(!this.willFit(r,l,t))throw new _n("Data too big for requested version")}else l=this.recommendVersion(t,i,o,s);const c=new C;c.appendBitArray(o);const u=i===xt.BYTE?s.getSizeInBytes():e.length;this.appendLengthInfo(u,l,i,c),c.appendBitArray(s);const d=l.getECBlocksForLevel(t),h=l.getTotalCodewords()-d.getTotalECCodewords();this.terminateBits(h,c);const f=this.interleaveWithECBytes(c,l.getTotalCodewords(),h,d.getNumBlocks()),p=new Nn;p.setECLevel(t),p.setMode(i),p.setVersion(l);const m=l.getDimensionForVersion(),g=new In(m,m),y=this.chooseMaskPattern(f,t,l,g);return p.setMaskPattern(y),Tn.buildMatrix(f,t,l,y,g),p.setMatrix(g),p}static recommendVersion(e,t,n,r){const a=this.calculateBitsNeeded(t,n,r,It.getVersionForNumber(1)),i=this.chooseVersion(a,e),o=this.calculateBitsNeeded(t,n,r,i);return this.chooseVersion(o,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<Dn.ALPHANUMERIC_TABLE.length?Dn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(A.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return xt.KANJI;let n=!1,r=!1;for(let a=0,i=e.length;a<i;++a){const t=e.charAt(a);if(Dn.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return xt.BYTE;r=!0}}return r?xt.ALPHANUMERIC:n?xt.NUMERIC:xt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=N.encode(e,A.SJIS)}catch(r){return!1}const n=t.length;if(n%2!==0)return!1;for(let a=0;a<n;a+=2){const e=255&t[a];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let a=Number.MAX_SAFE_INTEGER,i=-1;for(let o=0;o<Nn.NUM_MASK_PATTERNS;o++){Tn.buildMatrix(e,t,n,o,r);let s=this.calculateMaskPenalty(r);s<a&&(a=s,i=o)}return i}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=It.getVersionForNumber(n);if(Dn.willFit(e,r,t))return r}throw new _n("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new _n("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let i=0;i<4&&t.getSize()<n;++i)t.appendBit(!1);const r=7&t.getSize();if(r>0)for(let i=r;i<8;i++)t.appendBit(!1);const a=e-t.getSizeInBytes();for(let i=0;i<a;++i)t.appendBits(0===(1&i)?236:17,8);if(t.getSize()!==n)throw new _n("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,a,i){if(r>=n)throw new _n("Block ID too large");const o=e%n,s=n-o,l=Math.floor(e/n),c=l+1,u=Math.floor(t/n),d=u+1,h=l-u,f=c-d;if(h!==f)throw new _n("EC bytes mismatch");if(n!==s+o)throw new _n("RS blocks mismatch");if(e!==(u+h)*s+(d+f)*o)throw new _n("Total bytes mismatch");r<s?(a[0]=u,i[0]=h):(a[0]=d,i[0]=f)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new _n("Number of bits and data bytes does not match");let a=0,i=0,o=0;const s=new Array;for(let c=0;c<r;++c){const l=new Int32Array(1),u=new Int32Array(1);Dn.getNumDataBytesAndNumECBytesForBlockID(t,n,r,c,l,u);const d=l[0],h=new Uint8Array(d);e.toBytes(8*a,h,0,d);const f=Dn.generateECBytes(h,u[0]);s.push(new xn(h,f)),i=Math.max(i,d),o=Math.max(o,f.length),a+=l[0]}if(n!==a)throw new _n("Data bytes does not match offset");const l=new C;for(let c=0;c<i;++c)for(const e of s){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<o;++c)for(const e of s){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new _n("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let i=0;i<n;i++)r[i]=255&e[i];new En(ee.QR_CODE_FIELD_256).encode(r,t);const a=new Uint8Array(t);for(let i=0;i<t;i++)a[i]=r[n+i];return a}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const a=n.getCharacterCountBits(t);if(e>=1<<a)throw new _n(e+" is bigger than "+((1<<a)-1));r.appendBits(e,a)}static appendBytes(e,t,n,r){switch(t){case xt.NUMERIC:Dn.appendNumericBytes(e,n);break;case xt.ALPHANUMERIC:Dn.appendAlphanumericBytes(e,n);break;case xt.BYTE:Dn.append8BitBytes(e,n,r);break;case xt.KANJI:Dn.appendKanjiBytes(e,n);break;default:throw new _n("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Dn.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const a=Dn.getDigit(e.charAt(r));if(r+2<n){const n=Dn.getDigit(e.charAt(r+1)),i=Dn.getDigit(e.charAt(r+2));t.appendBits(100*a+10*n+i,10),r+=3}else if(r+1<n){const n=Dn.getDigit(e.charAt(r+1));t.appendBits(10*a+n,7),r+=2}else t.appendBits(a,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const a=Dn.getAlphanumericCode(e.charCodeAt(r));if(-1===a)throw new _n;if(r+1<n){const n=Dn.getAlphanumericCode(e.charCodeAt(r+1));if(-1===n)throw new _n;t.appendBits(45*a+n,11),r+=2}else t.appendBits(a,6),r++}}static append8BitBytes(e,t,n){let r;try{r=N.encode(e,n)}catch(a){throw new _n(a)}for(let i=0,o=r.length;i!==o;i++){const e=r[i];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=N.encode(e,A.SJIS)}catch(a){throw new _n(a)}const r=n.length;for(let i=0;i<r;i+=2){const e=(255&n[i])<<8&4294967295|255&n[i+1];let r=-1;if(e>=33088&&e<=40956?r=e-33088:e>=57408&&e<=60351&&(r=e-49472),-1===r)throw new _n("Invalid byte sequence");const a=192*(r>>8)+(255&r);t.appendBits(a,13)}}static appendECI(e,t){t.appendBits(xt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Dn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Dn.DEFAULT_BYTE_MODE_ENCODING=A.UTF8.getName();class Mn{write(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new d("Found empty contents");if(t<0||n<0)throw new d("Requested dimensions are too small: "+t+"x"+n);let a=bt.L,i=Mn.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(Sn.ERROR_CORRECTION)&&(a=bt.fromString(r.get(Sn.ERROR_CORRECTION).toString())),void 0!==r.get(Sn.MARGIN)&&(i=Number.parseInt(r.get(Sn.MARGIN).toString(),10)));const o=Dn.encode(e,a,r);return this.renderResult(o,t,n,i)}writeToDom(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const i=this.write(t,n,r,a);e&&e.appendChild(i)}renderResult(e,t,n,r){const a=e.getMatrix();if(null===a)throw new ne;const i=a.getWidth(),o=a.getHeight(),s=i+2*r,l=o+2*r,c=Math.max(t,s),u=Math.max(n,l),d=Math.min(Math.floor(c/s),Math.floor(u/l)),h=Math.floor((c-i*d)/2),f=Math.floor((u-o*d)/2),p=this.createSVGElement(c,u);for(let m=0,g=f;m<o;m++,g+=d)for(let e=0,t=h;e<i;e++,t+=d)if(1===a.get(e,m)){const e=this.createSvgRectElement(t,g,d,d);p.appendChild(e)}return p}createSVGElement(e,t){const n=document.createElementNS(Mn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const a=document.createElementNS(Mn.SVG_NS,"rect");return a.setAttributeNS(null,"x",e.toString()),a.setAttributeNS(null,"y",t.toString()),a.setAttributeNS(null,"height",n.toString()),a.setAttributeNS(null,"width",r.toString()),a.setAttributeNS(null,"fill","#000000"),a}}Mn.QUIET_ZONE_SIZE=4,Mn.SVG_NS="http://www.w3.org/2000/svg";class Rn{encode(e,t,n,r,a){if(0===e.length)throw new d("Found empty contents");if(t!==H.QR_CODE)throw new d("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new d("Requested dimensions are too small: ".concat(n,"x").concat(r));let i=bt.L,o=Rn.QUIET_ZONE_SIZE;null!==a&&(void 0!==a.get(Sn.ERROR_CORRECTION)&&(i=bt.fromString(a.get(Sn.ERROR_CORRECTION).toString())),void 0!==a.get(Sn.MARGIN)&&(o=Number.parseInt(a.get(Sn.MARGIN).toString(),10)));const s=Dn.encode(e,i,a);return Rn.renderResult(s,n,r,o)}static renderResult(e,t,n,r){const a=e.getMatrix();if(null===a)throw new ne;const i=a.getWidth(),o=a.getHeight(),s=i+2*r,l=o+2*r,c=Math.max(t,s),u=Math.max(n,l),d=Math.min(Math.floor(c/s),Math.floor(u/l)),h=Math.floor((c-i*d)/2),f=Math.floor((u-o*d)/2),p=new x(c,u);for(let m=0,g=f;m<o;m++,g+=d)for(let e=0,t=h;e<i;e++,t+=d)1===a.get(e,m)&&p.setRegion(t,g,d,d);return p}}Rn.QUIET_ZONE_SIZE=4;class On{encode(e,t,n,r,a){let i;if(t!==H.QR_CODE)throw new d("No encoder available for format "+t);return i=new Rn,i.encode(e,t,n,r,a)}}class kn extends O{constructor(e,t,n,r,a,i,o,s){if(super(i,o),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=a,r+i>t||a+o>n)throw new d("Crop rectangle does not fit within image data.");s&&this.reverseHorizontal(i,o)}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return m.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return m.arraycopy(this.yuvData,a,r,0,n),r;for(let i=0;i<t;i++){const t=i*e;m.arraycopy(this.yuvData,a,r,t,e),a+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new kn(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/kn.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/kn.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let a=this.top*this.dataWidth+this.left;for(let i=0;i<t;i++){const t=i*e;for(let i=0;i<e;i++){const e=255&r[a+i*kn.THUMBNAIL_SCALE_FACTOR];n[t+i]=4278190080|65793*e}a+=this.dataWidth*kn.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/kn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/kn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,a=this.top*this.dataWidth+this.left;r<t;r++,a+=this.dataWidth){const t=a+e/2;for(let r=a,i=a+e-1;r<t;r++,i--){const e=n[r];n[r]=n[i],n[i]=e}}}invert(){return new k(this)}}kn.THUMBNAIL_SCALE_FACTOR=2;class Pn extends O{constructor(e,t,n,r,a,i,o){if(super(t,n),this.dataWidth=r,this.dataHeight=a,this.left=i,this.top=o,4===e.BYTES_PER_ELEMENT){const r=t*n,a=new Uint8ClampedArray(r);for(let t=0;t<r;t++){const n=e[t],r=n>>16&255,i=n>>7&510,o=255&n;a[t]=(r+i+o)/4&255}this.luminances=a}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===a&&(this.dataHeight=n),void 0===i&&(this.left=0),void 0===o&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new d("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return m.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return m.arraycopy(this.luminances,a,r,0,n),r;for(let i=0;i<t;i++){const t=i*e;m.arraycopy(this.luminances,a,r,t,e),a+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Pn(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new k(this)}}class Ln extends A{static forName(e){return this.getCharacterSetECIByName(e)}}class Bn{}Bn.ISO_8859_1=A.ISO8859_1;class jn{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Fn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class zn{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Un extends zn{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Un(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Un(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+w.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Hn extends Un{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Hn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Vn(e,t,n){return new Hn(e,t,n)}function Wn(e,t,n){return new Un(e,t,n)}const Gn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Yn=0,Xn=1,qn=2,Qn=3,Zn=4,Kn=new Un(null,0,0),$n=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Jn(e){for(let t of e)v.fill(t,-1);return e[Yn][Zn]=0,e[Xn][Zn]=0,e[Xn][Yn]=28,e[Qn][Zn]=0,e[qn][Zn]=0,e[qn][Yn]=15,e}const er=Jn(v.createInt32Array(6,6));class tr{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let t=$n[this.mode][e];r=Wn(r,65535&t,t>>16),n+=t>>16}let a=e===qn?4:5;return r=Wn(r,t,a),new tr(r,e,0,n+a)}shiftAndAppend(e,t){let n=this.token,r=this.mode===qn?4:5;return n=Wn(n,er[this.mode][e],r),n=Wn(n,t,5),new tr(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Zn||this.mode===qn){let e=$n[n][Yn];t=Wn(t,65535&e,e>>16),r+=e>>16,n=Yn}let a=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,i=new tr(t,n,this.binaryShiftByteCount+1,r+a);return 2078===i.binaryShiftByteCount&&(i=i.endBinaryShift(e+1)),i}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=Vn(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new tr(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+($n[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=tr.calculateBinaryShiftCost(e)-tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new C;for(const r of t)r.appendTo(n,e);return n}toString(){return _.format("%s bits=%d bytes=%d",Gn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function nr(e){const t=_.getCharCode(" "),n=_.getCharCode("."),r=_.getCharCode(",");e[Yn][t]=1;const a=_.getCharCode("Z"),i=_.getCharCode("A");for(let h=i;h<=a;h++)e[Yn][h]=h-i+2;e[Xn][t]=1;const o=_.getCharCode("z"),s=_.getCharCode("a");for(let h=s;h<=o;h++)e[Xn][h]=h-s+2;e[qn][t]=1;const l=_.getCharCode("9"),c=_.getCharCode("0");for(let h=c;h<=l;h++)e[qn][h]=h-c+2;e[qn][r]=12,e[qn][n]=13;const u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let h=0;h<u.length;h++)e[Qn][_.getCharCode(u[h])]=h;const d=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<d.length;h++)_.getCharCode(d[h])>0&&(e[Zn][_.getCharCode(d[h])]=h);return e}tr.INITIAL_STATE=new tr(Kn,Yn,0,0);const rr=nr(v.createInt32Array(5,256));class ar{constructor(e){this.text=e}encode(){const e=_.getCharCode(" "),t=_.getCharCode("\n");let n=Fn.singletonList(tr.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let a,i=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case _.getCharCode("\r"):a=i===t?2:0;break;case _.getCharCode("."):a=i===e?3:0;break;case _.getCharCode(","):a=i===e?4:0;break;case _.getCharCode(":"):a=i===e?5:0;break;default:a=0}a>0?(n=ar.updateStateListForPair(n,r,a),r++):n=this.updateStateListForChar(n,r)}return Fn.min(n,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return ar.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],a=rr[e.getMode()][r]>0,i=null;for(let o=0;o<=Zn;o++){let s=rr[o][r];if(s>0){if(null==i&&(i=e.endBinaryShift(t)),!a||o===e.getMode()||o===qn){const e=i.latchAndAppend(o,s);n.push(e)}if(!a&&er[e.getMode()][o]>=0){const e=i.shiftAndAppend(o,s);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rr[e.getMode()][r]){let r=e.addBinaryShiftChar(t);n.push(r)}}static updateStateListForPair(e,t,n){const r=[];for(let a of e)this.updateStateForPair(a,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let a=e.endBinaryShift(t);if(r.push(a.latchAndAppend(Zn,n)),e.getMode()!==Zn&&r.push(a.shiftAndAppend(Zn,n)),3===n||4===n){let e=a.latchAndAppend(qn,16-n).latchAndAppend(qn,1);r.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const r of t){if(r.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(r)&&(t=t.filter(e=>e!==r))}e&&t.push(n)}return t}}class ir{constructor(){}static encodeBytes(e){return ir.encode(e,ir.DEFAULT_EC_PERCENT,ir.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r,a,i,o,s,l=new ar(e).encode(),c=w.truncDivision(l.getSize()*t,100)+11,u=l.getSize()+c;if(n!==ir.DEFAULT_AZTEC_LAYERS){if(r=n<0,a=Math.abs(n),a>(r?ir.MAX_NB_BITS_COMPACT:ir.MAX_NB_BITS))throw new d(_.format("Illegal value %s for layers",n));i=ir.totalBitsInLayer(a,r),o=ir.WORD_SIZE[a];let e=i-i%o;if(s=ir.stuffBits(l,o),s.getSize()+c>e)throw new d("Data to large for user specified layer");if(r&&s.getSize()>64*o)throw new d("Data to large for user specified layer")}else{o=0,s=null;for(let e=0;;e++){if(e>ir.MAX_NB_BITS)throw new d("Data too large for an Aztec code");if(r=e<=3,a=r?e+1:e,i=ir.totalBitsInLayer(a,r),u>i)continue;null!=s&&o===ir.WORD_SIZE[a]||(o=ir.WORD_SIZE[a],s=ir.stuffBits(l,o));let t=i-i%o;if(!(r&&s.getSize()>64*o)&&s.getSize()+c<=t)break}}let h,f=ir.generateCheckWords(s,i,o),p=s.getSize()/o,m=ir.generateModeMessage(r,a,p),g=(r?11:14)+4*a,y=new Int32Array(g);if(r){h=g;for(let e=0;e<y.length;e++)y[e]=e}else{h=g+1+2*w.truncDivision(w.truncDivision(g,2)-1,15);let e=w.truncDivision(g,2),t=w.truncDivision(h,2);for(let n=0;n<e;n++){let r=n+w.truncDivision(n,15);y[e-n-1]=t-r-1,y[e+n]=t+r+1}}let v=new x(h);for(let d=0,w=0;d<a;d++){let e=4*(a-d)+(r?9:12);for(let t=0;t<e;t++){let n=2*t;for(let r=0;r<2;r++)f.get(w+n+r)&&v.set(y[2*d+r],y[2*d+t]),f.get(w+2*e+n+r)&&v.set(y[2*d+t],y[g-1-2*d-r]),f.get(w+4*e+n+r)&&v.set(y[g-1-2*d-r],y[g-1-2*d-t]),f.get(w+6*e+n+r)&&v.set(y[g-1-2*d-t],y[2*d+r])}w+=8*e}if(ir.drawModeMessage(v,r,h,m),r)ir.drawBullsEye(v,w.truncDivision(h,2),5);else{ir.drawBullsEye(v,w.truncDivision(h,2),7);for(let e=0,t=0;e<w.truncDivision(g,2)-1;e+=15,t+=16)for(let n=1&w.truncDivision(h,2);n<h;n+=2)v.set(w.truncDivision(h,2)-t,n),v.set(w.truncDivision(h,2)+t,n),v.set(n,w.truncDivision(h,2)-t),v.set(n,w.truncDivision(h,2)+t)}let C=new jn;return C.setCompact(r),C.setSize(h),C.setLayers(a),C.setCodeWords(p),C.setMatrix(v),C}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let n=t-r;n<=t+r;n++)e.set(n,t-r),e.set(n,t+r),e.set(t-r,n),e.set(t+r,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new C;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=ir.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=ir.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let a=w.truncDivision(n,2);if(t)for(let i=0;i<7;i++){let t=a-3+i;r.get(i)&&e.set(t,a-5),r.get(i+7)&&e.set(a+5,t),r.get(20-i)&&e.set(t,a+5),r.get(27-i)&&e.set(a-5,t)}else for(let i=0;i<10;i++){let t=a-5+i+w.truncDivision(i,5);r.get(i)&&e.set(t,a-7),r.get(i+10)&&e.set(a+7,t),r.get(29-i)&&e.set(t,a+7),r.get(39-i)&&e.set(a-7,t)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,a=new En(ir.getGF(n)),i=w.truncDivision(t,n),o=ir.bitsToWords(e,n,i);a.encode(o,i-r);let s=t%n,l=new C;l.appendBits(0,s);for(const c of Array.from(o))l.appendBits(c,n);return l}static bitsToWords(e,t,n){let r,a,i=new Int32Array(n);for(r=0,a=e.getSize()/t;r<a;r++){let n=0;for(let a=0;a<t;a++)n|=e.get(r*t+a)?1<<t-a-1:0;i[r]=n}return i}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new d("Unsupported word size "+e)}}static stuffBits(e,t){let n=new C,r=e.getSize(),a=(1<<t)-2;for(let i=0;i<r;i+=t){let o=0;for(let n=0;n<t;n++)(i+n>=r||e.get(i+n))&&(o|=1<<t-1-n);(o&a)===a?(n.appendBits(o&a,t),i--):0===(o&a)?(n.appendBits(1|o,t),i--):n.appendBits(o,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ir.DEFAULT_EC_PERCENT=33,ir.DEFAULT_AZTEC_LAYERS=0,ir.MAX_NB_BITS=32,ir.MAX_NB_BITS_COMPACT=4,ir.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class or{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,a){let i=Bn.ISO_8859_1,o=ir.DEFAULT_EC_PERCENT,s=ir.DEFAULT_AZTEC_LAYERS;return null!=a&&(a.has(Sn.CHARACTER_SET)&&(i=Ln.forName(a.get(Sn.CHARACTER_SET).toString())),a.has(Sn.ERROR_CORRECTION)&&(o=w.parseInt(a.get(Sn.ERROR_CORRECTION).toString())),a.has(Sn.AZTEC_LAYERS)&&(s=w.parseInt(a.get(Sn.AZTEC_LAYERS).toString()))),or.encodeLayers(e,t,n,r,i,o,s)}static encodeLayers(e,t,n,r,a,i,o){if(t!==H.AZTEC)throw new d("Can only encode AZTEC, but got "+t);let s=ir.encode(_.getBytes(e,a),i,o);return or.renderResult(s,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new ne;let a=r.getWidth(),i=r.getHeight(),o=Math.max(t,a),s=Math.max(n,i),l=Math.min(o/a,s/i),c=(o-a*l)/2,u=(s-i*l)/2,d=new x(o,s);for(let h=0,f=u;h<i;h++,f+=l)for(let e=0,t=c;e<a;e++,t+=l)r.get(e,h)&&d.setRegion(t,f,l,l);return d}}e.AbstractExpandedDecoder=Ge,e.ArgumentException=u,e.ArithmeticException=J,e.AztecCode=jn,e.AztecCodeReader=ye,e.AztecCodeWriter=or,e.AztecDecoder=ae,e.AztecDetector=ge,e.AztecDetectorResult=ce,e.AztecEncoder=ir,e.AztecHighLevelEncoder=ar,e.AztecPoint=me,e.BarcodeFormat=H,e.Binarizer=p,e.BinaryBitmap=h,e.BitArray=C,e.BitMatrix=x,e.BitSource=mt,e.BrowserAztecCodeReader=ve,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=F,e.BrowserDatamatrixCodeReader=Ct,e.BrowserMultiFormatReader=vn,e.BrowserPDF417Reader=wn,e.BrowserQRCodeReader=Cn,e.BrowserQRCodeSvgWriter=Mn,e.CharacterSetECI=A,e.ChecksumException=f,e.Code128Reader=Ce,e.Code39Reader=be,e.DataMatrixDecodedBitStreamParser=gt,e.DataMatrixReader=wt,e.DecodeHintType=S,e.DecoderResult=Z,e.DefaultGridSampler=fe,e.DetectorResult=le,e.EAN13Reader=Te,e.EncodeHintType=Sn,e.Exception=c,e.FormatException=E,e.GenericGF=ee,e.GenericGFPoly=$,e.GlobalHistogramBinarizer=M,e.GridSampler=de,e.GridSamplerInstance=pe,e.HTMLCanvasElementLuminanceSource=P,e.HybridBinarizer=R,e.ITFReader=Se,e.IllegalArgumentException=d,e.IllegalStateException=ne,e.InvertedLuminanceSource=k,e.LuminanceSource=O,e.MathUtils=ie,e.MultiFormatOneDReader=lt,e.MultiFormatReader=yn,e.MultiFormatWriter=On,e.NotFoundException=D,e.OneDReader=we,e.PDF417DecodedBitStreamParser=fn,e.PDF417DecoderErrorCorrection=Yt,e.PDF417Reader=mn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=kn,e.QRCodeByteMatrix=In,e.QRCodeDataMask=Nt,e.QRCodeDecodedBitStreamParser=Dt,e.QRCodeDecoderErrorCorrectionLevel=bt,e.QRCodeDecoderFormatInformation=St,e.QRCodeEncoder=Dn,e.QRCodeEncoderQRCode=Nn,e.QRCodeMaskUtil=An,e.QRCodeMatrixUtil=Tn,e.QRCodeMode=xt,e.QRCodeReader=Ft,e.QRCodeVersion=It,e.QRCodeWriter=Rn,e.RGBLuminanceSource=Pn,e.RSS14Reader=st,e.RSSExpandedReader=it,e.ReaderException=gn,e.ReedSolomonDecoder=re,e.ReedSolomonEncoder=En,e.ReedSolomonException=te,e.Result=z,e.ResultMetadataType=Q,e.ResultPoint=se,e.StringUtils=_,e.UnsupportedOperationException=I,e.VideoInputDevice=L,e.WhiteRectangleDetector=ue,e.WriterException=_n,e.ZXingArrays=v,e.ZXingCharset=Ln,e.ZXingInteger=w,e.ZXingStandardCharsets=Bn,e.ZXingStringBuilder=T,e.ZXingStringEncoding=N,e.ZXingSystem=m,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function w(){}function C(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=v.prototype;var b=C.prototype=new w;b.constructor=C,g(b,v.prototype),b.isPureReactComponent=!0;var S=Array.isArray;function E(){}var A={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function N(e,t,r){var a=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==a?a:null,props:r}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function D(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return D((u=e._init)(e._payload),t,a,i,o)}}if(u)return o=o(e),u=""===i?"."+x(e,0):i,S(o)?(a="",null!=u&&(a=u.replace(T,"$&/")+"/"),D(o,t,a,"",function(e){return e})):null!=o&&(_(o)&&(l=o,c=a+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+u,o=N(l.type,c,l.props)),t.push(o)),1;u=0;var d,f=""===i?".":i+":";if(S(e))for(var m=0;m<e.length;m++)u+=D(i=e[m],t,a,s=f+x(i,m),o);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=D(i=i.value,t,a,s=f+x(i,m++),o);else if("object"===s){if("function"===typeof e.then)return D(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function M(e,t,n){if(null==e)return e;var r=[],a=0;return D(e,r,"","",function(e){return t.call(n,e,a++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},k={map:M,forEach:function(e,t,n){M(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return M(e,function(){t++}),t},toArray:function(e){return M(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=k,t.Component=v,t.Fragment=a,t.Profiler=o,t.PureComponent=C,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return A.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),a=e.key;if(null!=t)for(i in void 0!==t.key&&(a=""+t.key),t)!I.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var o=Array(i),s=0;s<i;s++)o[s]=arguments[s+2];r.children=o}return N(e.type,a,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,a={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)I.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var o=arguments.length-2;if(1===o)a.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];a.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===a[r]&&(a[r]=o[r]);return N(e,i,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.T,n={};A.T=n;try{var r=e(),a=A.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(E,O)}catch(i){O(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),A.T=t}},t.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},t.use=function(e){return A.H.use(e)},t.useActionState=function(e,t,n){return A.H.useActionState(e,t,n)},t.useCallback=function(e,t){return A.H.useCallback(e,t)},t.useContext=function(e){return A.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return A.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return A.H.useEffect(e,t)},t.useEffectEvent=function(e){return A.H.useEffectEvent(e)},t.useId=function(){return A.H.useId()},t.useImperativeHandle=function(e,t,n){return A.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.H.useMemo(e,t)},t.useOptimistic=function(e,t){return A.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return A.H.useReducer(e,t,n)},t.useRef=function(e){return A.H.useRef(e)},t.useState=function(e){return A.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.H.useTransition()},t.version="19.2.1"},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:i}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.1"},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<a&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,C="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,A||(A=!0,E());else{var t=r(u);null!==t&&R(S,t.startTime-e)}}var E,A=!1,I=-1,N=5,_=-1;function T(){return!!y||!(t.unstable_now()-_<N)}function x(){if(y=!1,A){var e=t.unstable_now();_=e;var n=!0;try{e:{m=!1,g&&(g=!1,w(I),I=-1),p=!0;var i=f;try{t:{for(b(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var s=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,b(e),n=!0;break t}h===r(c)&&a(c),b(e)}else a(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&R(S,l.startTime-e),n=!1}}break e}finally{h=null,f=i,p=!1}n=void 0}}finally{n?E():A=!1}}}if("function"===typeof C)E=function(){C(x)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,M=D.port2;D.port1.onmessage=x,E=function(){M.postMessage(null)}}else E=function(){v(x,0)};function R(e,n){I=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(w(I),I=-1):g=!0,R(S,i-o))):(e.sortIndex=s,n(c,e),m||p||(m=!0,A||(A=!0,E()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(i,o),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".98c06f4e.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="tormenta20-app:";n.l=(r,a,i,o)=>{if(e[r])e[r].push(a);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Tormenta20-App/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,i,[o,s,l]=r,c=0;if(o.some(t=>0!==e[t])){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)l(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunktormenta20_app=self.webpackChunktormenta20_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n.t(e,2),r=n(391);function a(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function s(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=["sri"],d=["page"],h=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],m=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var g="popstate";function y(){return A(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return b("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:S(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function v(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function w(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function C(e,t){return{usr:e.state,key:e.key,idx:t}}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?E(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function E(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function A(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,s="POP",l=null,u=d();function d(){return(o.state||{idx:null}).idx}function h(){s="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:s,location:p.location,delta:t})}function f(e){return I(e)}null==u&&(u=0,o.replaceState(c(c({},o.state),{},{idx:u}),""));let p={get action(){return s},get location(){return e(a,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(g,h),l=e,()=>{a.removeEventListener(g,h),l=null}},createHref:e=>t(a,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let r=b(p.location,e,t);n&&n(r,e),u=d()+1;let c=C(r,u),h=p.createHref(r);try{o.pushState(c,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;a.location.assign(h)}i&&l&&l({action:s,location:p.location,delta:1})},replace:function(e,t){s="REPLACE";let r=b(p.location,e,t);n&&n(r,e),u=d();let a=C(r,u),c=p.createHref(r);o.replaceState(a,"",c),i&&l&&l({action:s,location:p.location,delta:0})},go:e=>o.go(e)};return p}function I(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),v(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:S(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function N(e,t){return _(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function _(e,t,n,r){let a=H(("string"===typeof t?E(t):t).pathname||"/",n);if(null==a)return null;let i=T(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s){let e=U(a);o=j(i[s],e,r)}return o}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,s=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&o)return;v(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=Z([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(v(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),T(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:B(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of x(e.path))i(e,t,!0,r);else i(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return a?[i,""]:[i];let o=x(r.join("/")),s=[];return s.push(...o.map(e=>""===e?i:[i,e].join("/"))),a&&s.push(...o),s.map(t=>e.startsWith("/")&&""===t?"/":t)}var D=/^:[\w-]+$/,M=3,R=2,O=1,k=10,P=-2,L=e=>"*"===e;function B(e,t){let n=e.split("/"),r=n.length;return n.some(L)&&(r+=P),t&&(r+=R),n.filter(e=>!L(e)).reduce((e,t)=>e+(D.test(t)?M:""===t?O:k),r)}function j(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,a={},i="/",o=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:Z([i,u.pathname]),pathnameBase:K(Z([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=Z([i,u.pathnameBase]))}return o}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=z(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=s[n]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:o,pattern:e}}function z(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return w(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var V=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,W=e=>V.test(e);function G(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function Y(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function X(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function q(e){let t=X(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Q(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=E(e):(r=c({},e),v(!r.pathname||!r.pathname.includes("?"),Y("?","pathname","search",r)),v(!r.pathname||!r.pathname.includes("#"),Y("#","pathname","hash",r)),v(!r.search||!r.search.includes("#"),Y("#","search","hash",r)));let i,o=""===e||""===r.pathname,s=o?"/":r.pathname;if(null==s)i=n;else{let e=t.length-1;if(!a&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:a="",hash:i=""}="string"===typeof e?E(e):e;if(r)if(W(r))t=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),w(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(r))}t=r.startsWith("/")?G(r.substring(1),"/"):G(r,n)}else t=n;return{pathname:t,search:$(a),hash:J(i)}}(r,i),u=s&&"/"!==s&&s.endsWith("/"),d=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var Z=e=>e.join("/").replace(/\/\/+/g,"/"),K=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function ee(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function te(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ne=["POST","PUT","PATCH","DELETE"],re=(new Set(ne),["GET",...ne]);new Set(re),Symbol("ResetLoaderData");var ae=e.createContext(null);ae.displayName="DataRouter";var ie=e.createContext(null);ie.displayName="DataRouterState";var oe=e.createContext(!1);var se=e.createContext({isTransitioning:!1});se.displayName="ViewTransition";var le=e.createContext(new Map);le.displayName="Fetchers";var ce=e.createContext(null);ce.displayName="Await";var ue=e.createContext(null);ue.displayName="Navigation";var de=e.createContext(null);de.displayName="Location";var he=e.createContext({outlet:null,matches:[],isDataRoute:!1});he.displayName="Route";var fe=e.createContext(null);fe.displayName="RouteError";function pe(){return null!=e.useContext(de)}function me(){return v(pe(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(de).location}var ge="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ye(t){e.useContext(ue).static||e.useLayoutEffect(t)}function ve(){let{isDataRoute:t}=e.useContext(he);return t?function(){let{router:t}=Te("useNavigate"),n=De("useNavigate"),r=e.useRef(!1);ye(()=>{r.current=!0});let a=e.useCallback(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(r.current,ge),r.current&&("number"===typeof e?await t.navigate(e):await t.navigate(e,c({fromRouteId:n},a)))},[t,n]);return a}():function(){v(pe(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(ae),{basename:n,navigator:r}=e.useContext(ue),{matches:a}=e.useContext(he),{pathname:i}=me(),o=JSON.stringify(q(a)),s=e.useRef(!1);ye(()=>{s.current=!0});let l=e.useCallback(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(w(s.current,ge),!s.current)return;if("number"===typeof e)return void r.go(e);let l=Q(e,JSON.parse(o),i,"path"===a.relative);null==t&&"/"!==n&&(l.pathname="/"===l.pathname?n:Z([n,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)},[n,r,o,i,t]);return l}()}e.createContext(null);function we(){let{matches:t}=e.useContext(he),n=t[t.length-1];return n?n.params:{}}function Ce(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(he),{pathname:a}=me(),i=JSON.stringify(q(r));return e.useMemo(()=>Q(t,JSON.parse(i),a,"path"===n),[t,i,a,n])}function be(t,n,r,a,i){v(pe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=e.useContext(ue),{matches:s}=e.useContext(he),l=s[s.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Oe(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=me();if(n){var g;let e="string"===typeof n?E(n):n;v("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let y=p.pathname||"/",C=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");C="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=N(t,{pathname:C});w(f||null!=b,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),w(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let S=Ne(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Z([h,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Z([h,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),s,r,a,i);return n&&S?e.createElement(de.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},S):S}function Se(){let t=Me(),n=ee(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:o},"ErrorBoundary")," or"," ",e.createElement("code",{style:o},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:i},r):null,s)}var Ee=e.createElement(Se,null),Ae=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?e.createElement(he.Provider,{value:this.props.routeContext},e.createElement(fe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ie(t){let{routeContext:n,match:r,children:a}=t,i=e.useContext(ae);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(he.Provider,{value:n},a)}function Ne(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let i=t,o=null===r||void 0===r?void 0:r.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));v(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),i=i.slice(0,Math.min(i.length,e+1))}let s=!1,l=-1;if(r)for(let e=0;e<i.length;e++){let t=i[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,a=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||a){s=!0,i=l>=0?i.slice(0,l+1):[i[0]];break}}}let c=r&&a?(e,t)=>{var n,i;a(e,{location:r.location,params:null!==(n=null===(i=r.matches)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.params)&&void 0!==n?n:{},unstable_pattern:te(r.matches),errorInfo:t})}:void 0;return i.reduceRight((t,a,u)=>{let d,h=!1,f=null,p=null;r&&(d=o&&a.route.id?o[a.route.id]:void 0,f=a.route.errorElement||Ee,s&&(l<0&&0===u?(Oe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===u&&(h=!0,p=a.route.hydrateFallbackElement||null)));let m=n.concat(i.slice(0,u+1)),g=()=>{let n;return n=d?f:h?p:a.route.Component?e.createElement(a.route.Component,null):a.route.element?a.route.element:t,e.createElement(Ie,{match:a,routeContext:{outlet:t,matches:m,isDataRoute:null!=r},children:n})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===u)?e.createElement(Ae,{location:r.location,revalidation:r.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}function _e(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Te(t){let n=e.useContext(ae);return v(n,_e(t)),n}function xe(t){let n=e.useContext(ie);return v(n,_e(t)),n}function De(t){let n=function(t){let n=e.useContext(he);return v(n,_e(t)),n}(t),r=n.matches[n.matches.length-1];return v(r.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),r.route.id}function Me(){var t;let n=e.useContext(fe),r=xe("useRouteError"),a=De("useRouteError");return void 0!==n?n:null===(t=r.errors)||void 0===t?void 0:t[a]}var Re={};function Oe(e,t,n){t||Re[e]||(Re[e]=!0,w(!1,n))}var ke={};function Pe(e,t){e||ke[t]||(ke[t]=!0,console.warn(t))}t.useOptimistic;e.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:a}=e;return be(t,void 0,r,a,n)});function Le(e){v(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Be(t){let{basename:n="/",children:r=null,location:a,navigationType:i="POP",navigator:o,static:s=!1,unstable_useTransitions:l}=t;v(!pe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=e.useMemo(()=>({basename:c,navigator:o,static:s,unstable_useTransitions:l,future:{}}),[c,o,s,l]);"string"===typeof a&&(a=E(a));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=a,g=e.useMemo(()=>{let e=H(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:p,key:m},navigationType:i}},[c,d,h,f,p,m,i]);return w(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:e.createElement(ue.Provider,{value:u},e.createElement(de.Provider,{children:r,value:g}))}function je(e){let{children:t,location:n}=e;return be(Fe(t),n)}e.Component;function Fe(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,(t,a)=>{if(!e.isValidElement(t))return;let i=[...n,a];if(t.type===e.Fragment)return void r.push.apply(r,Fe(t.props.children,i));v(t.type===Le,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),v(!t.props.index||!t.props.children,"An index route cannot have child routes.");let o={id:t.props.id||i.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=Fe(t.props.children,i)),r.push(o)}),r}var ze="get",Ue="application/x-www-form-urlencoded";function He(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var Ve=null;var We=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ge(e){return null==e||We.has(e)?e:(w(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ue,'"')),null)}function Ye(e,t){let n,r,a,i,o;if(He(s=e)&&"form"===s.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?H(o,t):null,n=e.getAttribute("method")||ze,a=Ge(e.getAttribute("enctype"))||Ue,i=new FormData(e)}else if(function(e){return He(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return He(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||o.getAttribute("action");if(r=s?H(s,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||ze,a=Ge(e.getAttribute("formenctype"))||Ge(o.getAttribute("enctype"))||Ue,i=new FormData(o,e),!function(){if(null===Ve)try{new FormData(document.createElement("form"),0),Ve=!1}catch(e){Ve=!0}return Ve}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";i.append("".concat(e,"x"),"0"),i.append("".concat(e,"y"),"0")}else t&&i.append(t,r)}}else{if(He(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ze,r=null,a=Ue,o=e}var s;return i&&"text/plain"===a&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Xe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function qe(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===H(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Qe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ze(e){return null!=e&&"string"===typeof e.page}function Ke(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function $e(e,t,n,r,a,i){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter((e,t)=>o(e,t)||s(e,t)):"data"===i?t.filter((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,i)||s(t,i))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Je(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1),[...new Set(r)];var r}function et(e,t){let n=new Set,r=new Set(t);return e.reduce((e,a)=>{if(t&&!Ze(a)&&"script"===a.as&&a.href&&r.has(a.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(a));return n.has(i)||(n.add(i),e.push({key:i,link:a})),e},[])}function tt(e,t){return"lazy"===e.mode&&!0===t}function nt(){let t=e.useContext(ae);return Xe(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function rt(){let t=e.useContext(ie);return Xe(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var at=e.createContext(void 0);function it(){let t=e.useContext(at);return Xe(t,"You must render this element inside a <HydratedRouter> element"),t}function ot(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function st(e,t,n){if(n&&!dt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}at.displayName="FrameworkContext";function lt(t){let{page:n}=t,r=a(t,d),{router:i}=nt(),o=e.useMemo(()=>N(i.routes,n,i.basename),[i.routes,n,i.basename]);return o?e.createElement(ut,c({page:n,matches:o},r)):null}function ct(t){let{manifest:n,routeModules:r}=it(),[a,i]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return et((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Qe(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ke).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(t,n,r).then(t=>{e||i(t)}),()=>{e=!0}},[t,n,r]),a}function ut(t){let{page:n,matches:r}=t,i=a(t,h),o=me(),{manifest:s,routeModules:l}=it(),{basename:u}=nt(),{loaderData:d,matches:f}=rt(),p=e.useMemo(()=>$e(n,r,f,s,o,"data"),[n,r,f,s,o]),m=e.useMemo(()=>$e(n,r,f,s,o,"assets"),[n,r,f,s,o]),g=e.useMemo(()=>{if(n===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{var r;let a=s.routes[n.route.id];a&&a.hasLoader&&(!p.some(e=>e.route.id===n.route.id)&&n.route.id in d&&null!==(r=l[n.route.id])&&void 0!==r&&r.shouldRevalidate||a.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let a=qe(n,u,"data");return t&&e.size>0&&a.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[u,d,o,s,p,r,n,l]),y=e.useMemo(()=>Je(m,s),[m,s]),v=ct(m);return e.createElement(e.Fragment,null,g.map(t=>e.createElement("link",c({key:t,rel:"prefetch",as:"fetch",href:t},i))),y.map(t=>e.createElement("link",c({key:t,rel:"modulepreload",href:t},i))),v.map(t=>{let{key:n,link:r}=t;return e.createElement("link",c({key:n,nonce:i.nonce},r))}))}var dt=!1;function ht(t){let{manifest:n,serverHandoffString:r,isSpaMode:i,renderMeta:o,routeDiscovery:s,ssr:l}=it(),{router:d,static:h,staticContext:f}=nt(),{matches:p}=rt(),m=e.useContext(oe),g=tt(s,l);o&&(o.didRenderScripts=!0);let y=st(p,null,i);e.useEffect(()=>{0},[]);let v=e.useMemo(()=>{var i;if(m)return null;let o=f?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=h?"".concat(null!==n.hmr&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(y.map((e,t)=>{let r="route".concat(t),a=n.routes[e.route.id];Xe(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:i,clientLoaderModule:o,clientMiddlewareModule:s,hydrateFallbackModule:l,module:c}=a,u=[...i?[{module:i,varName:"".concat(r,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(r,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=a(e,u),i=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(o.pop();o.length>0;)s.push("/".concat(o.join("/"))),o.pop();s.forEach(e=>{let n=N(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let l=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:l,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",c(c({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),e.createElement("script",c(c({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:"module",async:!0})))},[]),w=dt||m?[]:(n.entry.imports.concat(Je(y,n,{includeHydrateFallback:!0})),[...new Set(C)]);var C;let b="object"===typeof n.sri?n.sri:{};return Pe(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),dt||m?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:b})}}):null,g?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:b[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:b[n.entry.module],suppressHydrationWarning:!0}),w.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:b[n],suppressHydrationWarning:!0})),v)}function ft(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}e.Component;function pt(t){let{error:n,isOutsideRemixApp:r}=t;console.error(n);let a,i=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ee(n))return e.createElement(mt,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),i);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(mt,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),i)}function mt(t){var n;let{title:r,renderScripts:a,isOutsideRemixApp:i,children:o}=t,{routeModules:s}=it();return null!==s.root&&void 0!==n&&n.Layout&&!i?o:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,a?e.createElement(ht,null):null)))}var gt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{gt&&(window.__reactRouterVersion="7.10.1")}catch(Gi){}function yt(t){let{basename:n,children:r,unstable_useTransitions:a,window:i}=t,o=e.useRef();null==o.current&&(o.current=y({window:i,v5Compat:!0}));let s=o.current,[l,c]=e.useState({action:s.action,location:s.location}),u=e.useCallback(t=>{!1===a?c(t):e.startTransition(()=>c(t))},[a]);return e.useLayoutEffect(()=>s.listen(u),[s,u]),e.createElement(Be,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:s,unstable_useTransitions:!0===a})}var vt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wt=e.forwardRef(function(t,n){let r,{onClick:i,discover:o="render",prefetch:s="none",relative:l,reloadDocument:u,replace:d,state:h,target:p,to:m,preventScrollReset:g,viewTransition:y}=t,C=a(t,f),{basename:b,unstable_useTransitions:E}=e.useContext(ue),A="string"===typeof m&&vt.test(m),I=!1;if("string"===typeof m&&A&&(r=m,gt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=H(t.pathname,b);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:I=!0}catch(Gi){w(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let N=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(pe(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=e.useContext(ue),{hash:i,pathname:o,search:s}=Ce(t,{relative:n}),l=o;return"/"!==r&&(l="/"===o?r:Z([r,o])),a.createHref({pathname:l,search:s,hash:i})}(m,{relative:l}),[_,T,x]=function(t,n){let r=e.useContext(at),[a,i]=e.useState(!1),[o,s]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&s(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(a){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[a]);let p=()=>{i(!0)},m=()=>{i(!1),s(!1)};return r?"intent"!==t?[o,f,{}]:[o,f,{onFocus:ot(l,p),onBlur:ot(c,m),onMouseEnter:ot(u,p),onMouseLeave:ot(d,m),onTouchStart:ot(h,p)}]:[!1,f,{}]}(s,C),D=function(t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:s,unstable_useTransitions:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=ve(),u=me(),d=Ce(t,{relative:o});return e.useCallback(h=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(h,n)){h.preventDefault();let n=void 0!==r?r:S(u)===S(d),f=()=>c(t,{replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:s});l?e.startTransition(()=>f()):f()}},[u,c,d,r,a,n,t,i,o,s,l])}(m,{replace:d,state:h,target:p,preventScrollReset:g,relative:l,viewTransition:y,unstable_useTransitions:E});let M=e.createElement("a",c(c(c({},C),x),{},{href:r||N,onClick:I||u?i:function(e){i&&i(e),e.defaultPrevented||D(e)},ref:ft(n,T),target:p,"data-discover":A||"render"!==o?void 0:"true"}));return _&&!A?e.createElement(e.Fragment,null,M,e.createElement(lt,{page:N})):M});wt.displayName="Link",e.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:s=!1,style:l,to:u,viewTransition:d,children:h}=t,f=a(t,p),m=Ce(u,{relative:f.relative}),g=me(),y=e.useContext(ie),{navigator:w,basename:C}=e.useContext(ue),b=null!=y&&function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(se);v(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=St("useViewTransitionState"),i=Ce(t,{relative:n});if(!r.isTransitioning)return!1;let o=H(r.currentLocation.pathname,a)||r.currentLocation.pathname,s=H(r.nextLocation.pathname,a)||r.nextLocation.pathname;return null!=F(i.pathname,s)||null!=F(i.pathname,o)}(m)&&!0===d,S=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,E=g.pathname,A=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(E=E.toLowerCase(),A=A?A.toLowerCase():null,S=S.toLowerCase()),A&&C&&(A=H(A,C)||A);const I="/"!==S&&S.endsWith("/")?S.length-1:S.length;let N,_=E===S||!s&&E.startsWith(S)&&"/"===E.charAt(I),T=null!=A&&(A===S||!s&&A.startsWith(S)&&"/"===A.charAt(S.length)),x={isActive:_,isPending:T,isTransitioning:b},D=_?r:void 0;N="function"===typeof o?o(x):[o,_?"active":null,T?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let M="function"===typeof l?l(x):l;return e.createElement(wt,c(c({},f),{},{"aria-current":D,className:N,ref:n,style:M,to:u,viewTransition:d}),"function"===typeof h?h(x):h)}).displayName="NavLink";var Ct=e.forwardRef((t,n)=>{let{discover:r="render",fetcherKey:i,navigate:o,reloadDocument:s,replace:l,state:u,method:d=ze,action:h,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:y}=t,w=a(t,m),{unstable_useTransitions:C}=e.useContext(ue),b=It(),E=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(ue),a=e.useContext(he);v(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),o=c({},Ce(t||".",{relative:n})),s=me();if(null==t){o.search=s.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();o.search=n?"?".concat(n):""}}t&&"."!==t||!i.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(o.pathname="/"===o.pathname?r:Z([r,o.pathname]));return S(o)}(h,{relative:p}),A="get"===d.toLowerCase()?"get":"post",I="string"===typeof h&&vt.test(h);return e.createElement("form",c(c({ref:n,method:A,action:E,onSubmit:s?f:t=>{if(f&&f(t),t.defaultPrevented)return;t.preventDefault();let n=t.nativeEvent.submitter,r=(null===n||void 0===n?void 0:n.getAttribute("formmethod"))||d,a=()=>b(n||t.currentTarget,{fetcherKey:i,method:r,navigate:o,replace:l,state:u,relative:p,preventScrollReset:g,viewTransition:y});C&&!1!==o?e.startTransition(()=>a()):a()}},w),{},{"data-discover":I||"render"!==r?void 0:"true"}))});function bt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function St(t){let n=e.useContext(ae);return v(n,bt(t)),n}Ct.displayName="Form";var Et=0,At=()=>"__".concat(String(++Et),"__");function It(){let{router:t}=St("useSubmit"),{basename:n}=e.useContext(ue),r=De("useRouteId"),a=t.fetch,i=t.navigate;return e.useCallback(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:s,encType:l,formData:c,body:u}=Ye(e,n);if(!1===t.navigate){let e=t.fetcherKey||At();await a(e,r,t.action||o,{preventScrollReset:t.preventScrollReset,formData:c,body:u,formMethod:t.method||s,formEncType:t.encType||l,flushSync:t.flushSync})}else await i(t.action||o,{preventScrollReset:t.preventScrollReset,formData:c,body:u,formMethod:t.method||s,formEncType:t.encType||l,replace:t.replace,state:t.state,fromRouteId:r,flushSync:t.flushSync,viewTransition:t.viewTransition})},[a,i,n,r])}const Nt=n.p+"static/media/d20.e4936bb12d7485172256.png";var _t=n(579);const Tt=[{path:"/",icon:"\ud83c\udfe0",label:"In\xedcio"},{path:"/characters",icon:"\ud83d\udccb",label:"Fichas"},{path:"/dice",icon:"\ud83c\udfb2",label:"D20",isMiddle:!0},{path:"/dice",icon:"\ud83c\udfb2",label:"Dados"},{path:"/settings",icon:"\u2699\ufe0f",label:"Config"}];const xt=function(){const e=ve(),t=me();return(0,_t.jsx)("nav",{className:"bottom-nav",children:Tt.map((n,r)=>(0,_t.jsxs)("button",{className:"nav-item ".concat(t.pathname===n.path?"active":""," ").concat(n.isMiddle?"middle":""),onClick:()=>e(n.path),children:[n.isMiddle?(0,_t.jsx)("img",{src:Nt,alt:"D20",className:"nav-icon"}):(0,_t.jsx)("span",{className:"nav-icon",children:n.icon}),!n.isMiddle&&(0,_t.jsx)("span",{className:"nav-label",children:n.label})]},r))})};const Dt=function(t){let{message:n,type:r="info",duration:a=3e3,onClose:i}=t;const[o,s]=(0,e.useState)(!0);return(0,e.useEffect)(()=>{const e=setTimeout(()=>{s(!1),setTimeout(i,a)},a);return()=>clearTimeout(e)},[a,i]),(0,_t.jsxs)("div",{className:"toast toast-".concat(r," ").concat(o?"visible":""),children:[(0,_t.jsx)("i",{className:"toast-icon ".concat({success:"bi bi-check-circle",error:"bi bi-x-circle",info:"bi bi-info-circle",warning:"bi bi-exclamation-triangle"}[r])}),(0,_t.jsx)("span",{className:"toast-message",children:n})]})},Mt={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Rt;const Ot=new Uint8Array(16);const kt=[];for(let n=0;n<256;++n)kt.push((n+256).toString(16).slice(1));function Pt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(kt[e[t+0]]+kt[e[t+1]]+kt[e[t+2]]+kt[e[t+3]]+"-"+kt[e[t+4]]+kt[e[t+5]]+"-"+kt[e[t+6]]+kt[e[t+7]]+"-"+kt[e[t+8]]+kt[e[t+9]]+"-"+kt[e[t+10]]+kt[e[t+11]]+kt[e[t+12]]+kt[e[t+13]]+kt[e[t+14]]+kt[e[t+15]]).toLowerCase()}function Lt(e,t,n){var r,a,i,o;const s=null!==(r=null!==(a=(e=e||{}).random)&&void 0!==a?a:null===(i=(o=e).rng)||void 0===i?void 0:i.call(o))&&void 0!==r?r:function(){if(!Rt){if("undefined"===typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Rt=crypto.getRandomValues.bind(crypto)}return Rt(Ot)}();if(s.length<16)throw new Error("Random bytes length must be >= 16");if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError("UUID byte range ".concat(n,":").concat(n+15," is out of buffer bounds"));for(let e=0;e<16;++e)t[n+e]=s[e];return t}return Pt(s)}const Bt=function(e,t,n){return!Mt.randomUUID||t||e?Lt(e,t,n):Mt.randomUUID()},jt=[{id:"humano",name:"Humano",bonus:{any:2}},{id:"anao",name:"An\xe3o",bonus:{constituicao:2},penalty:{destreza:-1}},{id:"elfo",name:"Elfo",bonus:{destreza:2},penalty:{constituicao:-1}},{id:"goblin",name:"Goblin",bonus:{destreza:2},penalty:{carisma:-1}},{id:"lefou",name:"Lefou",bonus:{inteligencia:1,sabedoria:1}},{id:"minotauro",name:"Minotauro",bonus:{forca:2},penalty:{sabedoria:-1}},{id:"qareen",name:"Qareen",bonus:{carisma:2},penalty:{sabedoria:-1}},{id:"golem",name:"Golem",bonus:{forca:2},penalty:{carisma:-1}},{id:"hynne",name:"Hynne",bonus:{destreza:1,carisma:1}},{id:"kliren",name:"Kliren",bonus:{inteligencia:2},penalty:{forca:-1}},{id:"medusa",name:"Medusa",bonus:{destreza:1,carisma:1}},{id:"osteon",name:"Osteon",bonus:{constituicao:1,sabedoria:1}},{id:"sereia",name:"Sereia/Trit\xe3o",bonus:{carisma:2},penalty:{forca:-1}},{id:"trog",name:"Trog",bonus:{constituicao:2},penalty:{inteligencia:-1}},{id:"aggelus",name:"Aggelus",bonus:{sabedoria:2,carisma:1}},{id:"sulfure",name:"Sulfure",bonus:{destreza:1,inteligencia:2}}],Ft=[{id:"arcanista",name:"Arcanista",hitDie:6,mainAttr:"inteligencia",hp:{initial:8,perLevel:2},mpPerLevel:6,skillTraining:{mandatory:["misticismo","vontade"],choiceGroups:[{choose:2,options:["conhecimento","diplomacia","enganacao","guerra","iniciativa","intimidacao","intuicao","investigacao","nobreza","oficio","percepcao"]}]},proficiencies:[]},{id:"barbaro",name:"B\xe1rbaro",hitDie:12,mainAttr:"forca",hp:{initial:24,perLevel:6},mpPerLevel:3,skillTraining:{mandatory:["fortitude","luta"],choiceGroups:[{choose:4,options:["adestramento","atletismo","cavalgar","iniciativa","intimidacao","oficio","percepcao","pontaria","sobrevivencia","vontade"]}]},proficiencies:["armas marciais","escudos"]},{id:"bardo",name:"Bardo",hitDie:8,mainAttr:"carisma",hp:{initial:12,perLevel:3},mpPerLevel:4,skillTraining:{mandatory:["atuacao","reflexos"],choiceGroups:[{choose:6,options:["acrobacia","cavalgar","conhecimento","diplomacia","enganacao","furtividade","iniciativa","intuicao","investigacao","jogatina","ladinagem","luta","misticismo","nobreza","percepcao","pontaria","vontade"]}]},proficiencies:["armas marciais"]},{id:"bucaneiro",name:"Bucaneiro",hitDie:10,mainAttr:"destreza",hp:{initial:16,perLevel:4},mpPerLevel:3,skillTraining:{mandatory:["reflexos"],choiceGroups:[{choose:1,options:["luta","pontaria"]},{choose:4,options:["acrobacia","atletismo","atuacao","enganacao","fortitude","furtividade","iniciativa","intimidacao","jogatina","luta","oficio","percepcao","pilotagem","pontaria"]}]},proficiencies:["armas marciais"]},{id:"cacador",name:"Ca\xe7ador",hitDie:10,mainAttr:"destreza",hp:{initial:16,perLevel:4},mpPerLevel:4,skillTraining:{mandatory:["sobrevivencia"],choiceGroups:[{choose:1,options:["luta","pontaria"]},{choose:6,options:["adestramento","atletismo","cavalgar","cura","fortitude","furtividade","iniciativa","investigacao","luta","oficio","percepcao","pontaria","reflexos"]}]},proficiencies:["armas marciais","escudos"]},{id:"cavaleiro",name:"Cavaleiro",hitDie:10,mainAttr:"forca",hp:{initial:20,perLevel:5},mpPerLevel:3,skillTraining:{mandatory:["fortitude","luta"],choiceGroups:[{choose:2,options:["adestramento","atletismo","cavalgar","diplomacia","guerra","iniciativa","intimidacao","nobreza","percepcao","vontade"]}]},proficiencies:["armas marciais","armaduras pesadas","escudos"]},{id:"clerigo",name:"Cl\xe9rigo",hitDie:8,mainAttr:"sabedoria",hp:{initial:16,perLevel:4},mpPerLevel:5,skillTraining:{mandatory:["religiao","vontade"],choiceGroups:[{choose:2,options:["conhecimento","cura","diplomacia","fortitude","iniciativa","intuicao","luta","misticismo","nobreza","oficio","percepcao"]}]},proficiencies:["armaduras pesadas","escudos"]},{id:"druida",name:"Druida",hitDie:8,mainAttr:"sabedoria",hp:{initial:16,perLevel:4},mpPerLevel:4,skillTraining:{mandatory:["sobrevivencia","vontade"],choiceGroups:[{choose:4,options:["adestramento","atletismo","cavalgar","conhecimento","cura","fortitude","iniciativa","intuicao","luta","misticismo","oficio","percepcao","religiao"]}]},proficiencies:["escudos"]},{id:"guerreiro",name:"Guerreiro",hitDie:10,mainAttr:"forca",hp:{initial:20,perLevel:5},mpPerLevel:3,skillTraining:{mandatory:["fortitude"],choiceGroups:[{choose:1,options:["luta","pontaria"]},{choose:2,options:["adestramento","atletismo","cavalgar","guerra","iniciativa","intimidacao","luta","oficio","percepcao","pontaria","reflexos"]}]},proficiencies:["armas marciais","armaduras pesadas","escudos"]},{id:"inventor",name:"Inventor",hitDie:8,mainAttr:"inteligencia",hp:{initial:12,perLevel:3},mpPerLevel:4,skillTraining:{mandatory:["oficio","vontade"],choiceGroups:[{choose:4,options:["conhecimento","cura","diplomacia","fortitude","iniciativa","investigacao","luta","misticismo","oficio","pilotagem","percepcao","pontaria"]}]},proficiencies:[]},{id:"ladino",name:"Ladino",hitDie:8,mainAttr:"destreza",hp:{initial:12,perLevel:3},mpPerLevel:4,skillTraining:{mandatory:["ladinagem","reflexos"],choiceGroups:[{choose:8,options:["acrobacia","atletismo","atuacao","cavalgar","conhecimento","diplomacia","enganacao","furtividade","iniciativa","intimidacao","intuicao","investigacao","jogatina","luta","oficio","percepcao","pilotagem","pontaria"]}]},proficiencies:[]},{id:"lutador",name:"Lutador",hitDie:10,mainAttr:"destreza",hp:{initial:20,perLevel:5},mpPerLevel:3,skillTraining:{mandatory:["fortitude","luta"],choiceGroups:[{choose:4,options:["acrobacia","adestramento","atletismo","enganacao","furtividade","iniciativa","intimidacao","oficio","percepcao","pontaria","reflexos"]}]},proficiencies:[]},{id:"nobre",name:"Nobre",hitDie:8,mainAttr:"carisma",hp:{initial:16,perLevel:4},mpPerLevel:4,skillTraining:{mandatory:["vontade"],choiceGroups:[{choose:1,options:["diplomacia","intimidacao"]},{choose:4,options:["adestramento","atuacao","cavalgar","conhecimento","diplomacia","enganacao","fortitude","guerra","iniciativa","intimidacao","intuicao","investigacao","jogatina","luta","nobreza","oficio","percepcao","pontaria"]}]},proficiencies:["armas marciais","armaduras pesadas","escudos"]},{id:"paladino",name:"Paladino",hitDie:10,mainAttr:"carisma",hp:{initial:20,perLevel:5},mpPerLevel:3,skillTraining:{mandatory:["luta","vontade"],choiceGroups:[{choose:2,options:["adestramento","atletismo","cavalgar","cura","diplomacia","fortitude","guerra","iniciativa","intuicao","nobreza","percepcao","religiao"]}]},proficiencies:["armas marciais","armaduras pesadas","escudos"]}],zt=[{id:"acrobacia",name:"Acrobacia",attr:"destreza"},{id:"adestramento",name:"Adestramento",attr:"carisma"},{id:"atletismo",name:"Atletismo",attr:"forca"},{id:"atuacao",name:"Atua\xe7\xe3o",attr:"carisma"},{id:"cavalgar",name:"Cavalgar",attr:"destreza"},{id:"conhecimento",name:"Conhecimento",attr:"inteligencia"},{id:"cura",name:"Cura",attr:"sabedoria"},{id:"diplomacia",name:"Diplomacia",attr:"carisma"},{id:"enganacao",name:"Engana\xe7\xe3o",attr:"carisma"},{id:"fortitude",name:"Fortitude",attr:"constituicao"},{id:"furtividade",name:"Furtividade",attr:"destreza"},{id:"guerra",name:"Guerra",attr:"inteligencia"},{id:"iniciativa",name:"Iniciativa",attr:"destreza"},{id:"intimidacao",name:"Intimida\xe7\xe3o",attr:"carisma"},{id:"intuicao",name:"Intui\xe7\xe3o",attr:"sabedoria"},{id:"investigacao",name:"Investiga\xe7\xe3o",attr:"inteligencia"},{id:"jogatina",name:"Jogatina",attr:"carisma"},{id:"ladinagem",name:"Ladinagem",attr:"destreza"},{id:"luta",name:"Luta",attr:"forca"},{id:"misticismo",name:"Misticismo",attr:"inteligencia"},{id:"nobreza",name:"Nobreza",attr:"inteligencia"},{id:"oficio",name:"Of\xedcio",attr:"inteligencia"},{id:"percepcao",name:"Percep\xe7\xe3o",attr:"sabedoria"},{id:"pilotagem",name:"Pilotagem",attr:"destreza"},{id:"pontaria",name:"Pontaria",attr:"destreza"},{id:"reflexos",name:"Reflexos",attr:"destreza"},{id:"religiao",name:"Religi\xe3o",attr:"sabedoria"},{id:"sobrevivencia",name:"Sobreviv\xeancia",attr:"sabedoria"}],Ut={cacador:[{id:"marca_presa",name:"Marca da Presa",type:"Habilidade base",level:1,description:"Voc\xea pode gastar uma a\xe7\xe3o de movimento e 1 PM para analisar uma criatura em alcance curto. At\xe9 o fim da cena, voc\xea recebe +1d4 nas rolagens de dano contra essa criatura. A cada quatro n\xedveis, voc\xea pode gastar +1 PM para aumentar o b\xf4nus de dano (veja a tabela da classe).",prerequisites:[]},{id:"rastreador",name:"Rastreador",type:"Habilidade base",level:1,description:"Voc\xea recebe +2 em Sobreviv\xeancia. Al\xe9m disso, pode se mover com seu deslocamento normal enquanto rastreia sem sofrer penalidades no teste de Sobreviv\xeancia.",prerequisites:[]},{id:"explorador",name:"Explorador",type:"Habilidade base",level:3,description:"No 3\xba n\xedvel, escolha um tipo de terreno entre aqu\xe1tico, \xe1rtico, colina, deserto, floresta, montanha, p\xe2ntano, plan\xedcie, subterr\xe2neo ou urbano. A partir do 11\xba n\xedvel, voc\xea tamb\xe9m pode escolher \xe1rea de Tormenta. Quando estiver no tipo de terreno escolhido, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia. A cada quatro n\xedveis, escolha outro tipo de terreno para receber o b\xf4nus ou aumente o b\xf4nus em um tipo de terreno j\xe1 escolhido em +2.",prerequisites:[{type:"level",value:3}],grantsSelection:"Terreno"},{id:"explorador_7",name:"Explorador (Aprimoramento)",type:"Habilidade base",level:7,description:"Escolha outro tipo de terreno para receber o b\xf4nus ou aumente o b\xf4nus em um tipo de terreno j\xe1 escolhido em +2.",prerequisites:[{type:"level",value:7}],grantsSelection:"Terreno"},{id:"explorador_11",name:"Explorador (Aprimoramento)",type:"Habilidade base",level:11,description:"Escolha outro tipo de terreno para receber o b\xf4nus ou aumente o b\xf4nus em um tipo de terreno j\xe1 escolhido em +2.",prerequisites:[{type:"level",value:11}],grantsSelection:"Terreno"},{id:"explorador_15",name:"Explorador (Aprimoramento)",type:"Habilidade base",level:15,description:"Escolha outro tipo de terreno para receber o b\xf4nus ou aumente o b\xf4nus em um tipo de terreno j\xe1 escolhido em +2.",prerequisites:[{type:"level",value:15}],grantsSelection:"Terreno"},{id:"explorador_19",name:"Explorador (Aprimoramento)",type:"Habilidade base",level:19,description:"Escolha outro tipo de terreno para receber o b\xf4nus ou aumente o b\xf4nus em um tipo de terreno j\xe1 escolhido em +2.",prerequisites:[{type:"level",value:19}],grantsSelection:"Terreno"},{id:"ambidestria",name:"Ambidestria",type:"Poder",description:"Se estiver empunhando duas armas (e pelo menos uma delas for leve) e fizer a a\xe7\xe3o agredir, voc\xea pode fazer dois ataques, um com cada arma. Se fizer isso, sofre \u20132 em todos os testes de ataque at\xe9 o seu pr\xf3ximo turno.",prerequisites:[{type:"attribute",key:"destreza",value:2}]},{id:"armadilha_arataca",name:"Armadilha: Arataca",type:"Poder",tags:["armadilha"],description:"A v\xedtima sofre 2d6 pontos de dano de perfura\xe7\xe3o e fica agarrada. Uma criatura agarrada pode escapar com uma a\xe7\xe3o padr\xe3o e um teste de For\xe7a ou Acrobacia (CD Sab).",prerequisites:[]},{id:"armadilha_espinhos",name:"Armadilha: Espinhos",type:"Poder",tags:["armadilha"],description:"A v\xedtima sofre 6d6 pontos de dano de perfura\xe7\xe3o. Um teste de Reflexos (CD Sab) reduz o dano \xe0 metade.",prerequisites:[]},{id:"armadilha_laco",name:"Armadilha: La\xe7o",type:"Poder",tags:["armadilha"],description:"A v\xedtima deve fazer um teste de Reflexos (CD Sab). Se passar, fica ca\xedda. Se falhar, fica agarrada. Uma criatura agarrada pode se soltar com uma a\xe7\xe3o padr\xe3o e um teste de For\xe7a ou Acrobacia (CD Sab).",prerequisites:[]},{id:"armadilha_rede",name:"Armadilha: Rede",type:"Poder",tags:["armadilha"],description:"Todas as criaturas na \xe1rea ficam enredadas e n\xe3o podem sair da \xe1rea. Uma v\xedtima pode se libertar com uma a\xe7\xe3o padr\xe3o e um teste de For\xe7a ou Acrobacia (CD 25). Al\xe9m disso, a \xe1rea ocupada pela rede \xe9 considerada terreno dif\xedcil. Nesta armadilha voc\xea escolhe quantas criaturas precisam estar na \xe1rea para ativ\xe1-la.",prerequisites:[]},{id:"armadilheiro",name:"Armadilheiro",type:"Poder",description:"Voc\xea soma sua Sabedoria no dano e na CD de suas armadilhas (cumulativo).",prerequisites:[{type:"tag",value:"armadilha"},{type:"level",value:5}]},{id:"arqueiro",name:"Arqueiro",type:"Poder",description:"Se estiver usando uma arma de ataque \xe0 dist\xe2ncia, voc\xea soma sua Sabedoria nas rolagens de dano (limitado pelo seu n\xedvel).",prerequisites:[{type:"attribute",key:"sabedoria",value:1}]},{id:"aumento_atributo",name:"Aumento de Atributo",type:"Poder",description:"Voc\xea recebe +1 em um atributo. Voc\xea pode escolher este poder v\xe1rias vezes, mas apenas uma vez por patamar para um mesmo atributo.",prerequisites:[]},{id:"bote",name:"Bote",type:"Poder",description:"Se estiver empunhando duas armas e fizer uma investida, voc\xea pode pagar 1 PM para fazer um ataque adicional com sua arma secund\xe1ria.",prerequisites:[{type:"Poder",value:"ambidestria"},{type:"level",value:6}]},{id:"caminhos_natureza",name:"Caminhos da Natureza",type:"Poder",description:"Voc\xea aprende e pode lan\xe7ar Caminhos da Natureza (atributo-chave Sabedoria).",prerequisites:[{type:"attribute",key:"sabedoria",value:1},{type:"level",value:3}]},{id:"camuflagem",name:"Camuflagem",type:"Poder",description:"Voc\xea pode gastar 2 PM para se esconder mesmo sem camuflagem ou cobertura dispon\xedvel.",prerequisites:[{type:"level",value:6}]},{id:"chuva_laminas",name:"Chuva de L\xe2minas",type:"Poder",description:"Uma vez por rodada, quando usa Ambidestria, voc\xea pode pagar 2 PM para fazer um ataque adicional com sua arma prim\xe1ria.",prerequisites:[{type:"attribute",key:"destreza",value:4},{type:"Poder",value:"ambidestria"},{type:"level",value:12}]},{id:"companheiro_animal",name:"Companheiro Animal",type:"Poder",description:"Voc\xea recebe um companheiro animal.",prerequisites:[{type:"attribute",key:"carisma",value:1},{type:"skill",value:"adestramento"}]},{id:"elo_natureza",name:"Elo com a Natureza",type:"Poder",description:"Voc\xea soma sua Sabedoria em seu total de pontos de mana e aprende e pode lan\xe7ar Caminhos da Natureza (atributo-chave Sabedoria).",prerequisites:[{type:"attribute",key:"sabedoria",value:1},{type:"level",value:3}]},{id:"emboscar",name:"Emboscar",type:"Poder",description:"Voc\xea pode gastar 2 PM para realizar uma a\xe7\xe3o padr\xe3o adicional em seu turno. Voc\xea s\xf3 pode usar este poder na primeira rodada de um combate.",prerequisites:[{type:"skill",value:"furtividade"}]},{id:"empatia_selvagem",name:"Empatia Selvagem",type:"Poder",description:"Voc\xea pode se comunicar com animais por meio de linguagem corporal e vocaliza\xe7\xf5es. Voc\xea pode usar Adestramento com animais para mudar atitude e persuas\xe3o (veja Diplomacia).",prerequisites:[]},{id:"escalamuca",name:"Escaramu\xe7a",type:"Poder",description:"Quando se move 6m ou mais, voc\xea recebe +2 na Defesa e Reflexos e +1d8 nas rolagens de dano de ataques corpo a corpo e \xe0 dist\xe2ncia em alcance curto at\xe9 o in\xedcio de seu pr\xf3ximo turno. Voc\xea n\xe3o pode usar esta habilidade se estiver vestindo armadura pesada.",prerequisites:[{type:"attribute",key:"destreza",value:2},{type:"level",value:6}]},{id:"escalamuca_superior",name:"Escaramu\xe7a Superior",type:"Poder",description:"Quando usa Escaramu\xe7a, seus b\xf4nus aumentam para +5 na Defesa e Reflexos e +1d12 em rolagens de dano.",prerequisites:[{type:"Poder",value:"escalamuca"},{type:"level",value:12}]},{id:"espreitar",name:"Espreitar",type:"Poder",description:"Quando usa a habilidade Marca da Presa, voc\xea recebe um b\xf4nus de +1 em testes de per\xedcia contra a criatura marcada. Esse b\xf4nus aumenta em +1 para cada PM adicional gasto na habilidade e tamb\xe9m dobra com a habilidade Inimigo.",prerequisites:[]},{id:"ervas_curativas",name:"Ervas Curativas",type:"Poder",description:"Voc\xea pode gastar uma a\xe7\xe3o completa e uma quantidade de PM a sua escolha (limitado por sua Sabedoria) para aplicar ervas que curam ou desintoxicam em voc\xea ou num aliado adjacente. Para cada PM que gastar, cura 2d6 PV ou remove uma condi\xe7\xe3o envenenado afetando o alvo.",prerequisites:[]},{id:"impeto",name:"\xcdmpeto",type:"Poder",description:"Voc\xea pode gastar 1 PM para aumentar seu deslocamento em +6m por uma rodada.",prerequisites:[]},{id:"inimigo_animal",name:"Inimigo de Animal",type:"Poder",description:"Quando voc\xea usa a habilidade Marca da Presa contra uma criatura do tipo animal, dobra os dados de b\xf4nus no dano.",prerequisites:[]},{id:"inimigo_construto",name:"Inimigo de Construto",type:"Poder",description:"Quando voc\xea usa a habilidade Marca da Presa contra uma criatura do tipo construto, dobra os dados de b\xf4nus no dano.",prerequisites:[]},{id:"inimigo_espirito",name:"Inimigo de Esp\xedrito",type:"Poder",description:"Quando voc\xea usa a habilidade Marca da Presa contra uma criatura do tipo esp\xedrito, dobra os dados de b\xf4nus no dano.",prerequisites:[]},{id:"inimigo_monstro",name:"Inimigo de Monstro",type:"Poder",description:"Quando voc\xea usa a habilidade Marca da Presa contra uma criatura do tipo monstro, dobra os dados de b\xf4nus no dano.",prerequisites:[]},{id:"inimigo_morto_vivo",name:"Inimigo de Morto-Vivo",type:"Poder",description:"Quando voc\xea usa a habilidade Marca da Presa contra uma criatura do tipo morto-vivo, dobra os dados de b\xf4nus no dano.",prerequisites:[]},{id:"olho_falcao",name:"Olho do Falc\xe3o",type:"Poder",description:"Voc\xea pode usar a habilidade Marca da Presa em criaturas em alcance longo.",prerequisites:[]},{id:"ponto_fraco",name:"Ponto Fraco",type:"Poder",description:"Quando usa a habilidade Marca da Presa, seus ataques contra a criatura marcada recebem +2 na margem de amea\xe7a. Esse b\xf4nus dobra com a habilidade Inimigo.",prerequisites:[]},{id:"explorador_aquatico",name:"Explorador (Aqu\xe1tico)",type:"Terreno",description:"Quando estiver no tipo de terreno aqu\xe1tico, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[]},{id:"explorador_artico",name:"Explorador (\xc1rtico)",type:"Terreno",description:"Quando estiver no tipo de terreno \xe1rtico, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[]},{id:"explorador_colina",name:"Explorador (Colina)",type:"Terreno",description:"Quando estiver no tipo de terreno colina, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[]},{id:"explorador_deserto",name:"Explorador (Deserto)",type:"Terreno",description:"Quando estiver no tipo de terreno deserto, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[]},{id:"explorador_floresta",name:"Explorador (Floresta)",type:"Terreno",description:"Quando estiver no tipo de terreno floresta, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[]},{id:"explorador_montanha",name:"Explorador (Montanha)",type:"Terreno",description:"Quando estiver no tipo de terreno montanha, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[]},{id:"explorador_pantano",name:"Explorador (P\xe2ntano)",type:"Terreno",description:"Quando estiver no tipo de terreno p\xe2ntano, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[]},{id:"explorador_planicie",name:"Explorador (Plan\xedcie)",type:"Terreno",description:"Quando estiver no tipo de terreno plan\xedcie, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[]},{id:"explorador_subterraneo",name:"Explorador (Subterr\xe2neo)",type:"Terreno",description:"Quando estiver no tipo de terreno subterr\xe2neo, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[]},{id:"explorador_urbano",name:"Explorador (Urbano)",type:"Terreno",description:"Quando estiver no tipo de terreno urbano, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[]},{id:"explorador_tormenta",name:"Explorador (Tormenta)",type:"Terreno",description:"Quando estiver em \xe1rea de Tormenta, voc\xea soma sua Sabedoria (m\xednimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep\xe7\xe3o e Sobreviv\xeancia.",prerequisites:[{type:"level",value:11}]},{id:"caminho_explorador",name:"Caminho do Explorador",type:"Habilidade base",description:"Voc\xea pode atravessar terrenos dif\xedceis sem sofrer redu\xe7\xe3o em seu deslocamento e a CD para rastrear voc\xea aumenta em +10. Esta habilidade s\xf3 funciona em terrenos nos quais voc\xea tenha a habilidade Explorador.",prerequisites:[{type:"level",value:5}]},{id:"mestre_cacador",name:"Mestre Ca\xe7ador",type:"Habilidade base",description:"Voc\xea pode usar a habilidade Marca da Presa como uma a\xe7\xe3o livre. Al\xe9m disso, quando usa a habilidade, pode pagar 5 PM para aumentar sua margem de amea\xe7a contra a criatura em +2. Se voc\xea reduzir uma criatura contra a qual usou Marca da Presa a 0 pontos de vida, recupera 5 PM.",prerequisites:[{type:"level",value:20}]}],arcanista:[],barbaro:[],bardo:[],bucaneiro:[],cavaleiro:[],clerigo:[],druida:[],guerreiro:[],inventor:[],ladino:[],lutador:[],nobre:[],paladino:[]},Ht=10,Vt=10,Wt=0,Gt=0,Yt=0,Xt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Number(e);return Number.isFinite(n)?n:t},qt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.max(0,Xt(e,t))},Qt=e=>Math.max(1,Xt(e,1)),Zt=e=>e?"string"===typeof e?e||null:"object"===typeof e&&"string"===typeof e.id?e.id:null:null,Kt=e=>e&&jt.find(t=>t.id===e)||null,$t=e=>{if(!e)return null;if("object"===typeof e&&"race"in e)return $t(e.race);const t=Zt(e);if(t){const e=Kt(t);if(e)return e}return"object"===typeof e?e:null},Jt=(e,t)=>{var n,r;const a=$t(e);if(!a)return 0;return Xt(null===(n=a.bonus)||void 0===n?void 0:n[t],0)+Xt(null===(r=a.penalty)||void 0===r?void 0:r[t],0)},en=(e,t)=>{var n;return Xt(null===e||void 0===e||null===(n=e.attributes)||void 0===n?void 0:n[t],0)+Jt(e,t)},tn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?[...e]:[]},nn=e=>e?"string"===typeof e?e||null:"object"===typeof e&&"string"===typeof e.id?e.id:null:null,rn=e=>e&&Ft.find(t=>t.id===e)||null,an=e=>{if(!e)return null;const t=e.characterClass,n=rn(nn(t));return n||(t&&"object"===typeof t?t:null)},on=e=>{const t=an(e);if(null===t||void 0===t||!t.hp){if(null!==t&&void 0!==t&&t.hitDie){const n=en(e,"constituicao");return Math.max(1,t.hitDie+n)}return Vt}const n=en(e,"constituicao"),r=Qt(null===e||void 0===e?void 0:e.level),a=t.hp.initial+n;if(r<=1)return Math.max(1,a);const i=t.hp.perLevel+n;return Math.max(1,a+(r-1)*i)},sn=e=>{const t=an(e),n=null===t||void 0===t?void 0:t.mpPerLevel;if(!n)return Yt;const r=Qt(null===e||void 0===e?void 0:e.level);return Math.max(0,n*r)},ln=[{level:1,experience:0,skillBonus:{trained:2,untrained:0}},{level:2,experience:1e3,skillBonus:{trained:3,untrained:1}},{level:3,experience:3e3,skillBonus:{trained:3,untrained:1}},{level:4,experience:6e3,skillBonus:{trained:4,untrained:2}},{level:5,experience:1e4,skillBonus:{trained:4,untrained:2}},{level:6,experience:15e3,skillBonus:{trained:5,untrained:3}},{level:7,experience:21e3,skillBonus:{trained:7,untrained:3}},{level:8,experience:28e3,skillBonus:{trained:8,untrained:4}},{level:9,experience:36e3,skillBonus:{trained:8,untrained:4}},{level:10,experience:45e3,skillBonus:{trained:9,untrained:5}},{level:11,experience:55e3,skillBonus:{trained:9,untrained:5}},{level:12,experience:66e3,skillBonus:{trained:10,untrained:6}},{level:13,experience:78e3,skillBonus:{trained:10,untrained:6}},{level:14,experience:91e3,skillBonus:{trained:11,untrained:7}},{level:15,experience:105e3,skillBonus:{trained:13,untrained:7}},{level:16,experience:12e4,skillBonus:{trained:14,untrained:8}},{level:17,experience:136e3,skillBonus:{trained:14,untrained:8}},{level:18,experience:153e3,skillBonus:{trained:15,untrained:9}},{level:19,experience:171e3,skillBonus:{trained:15,untrained:9}},{level:20,experience:19e4,skillBonus:{trained:16,untrained:10}}];class cn{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(new Date).toISOString();this.id=t.id||Bt(),this.name=(null===(e=t.name)||void 0===e?void 0:e.trim())||"Novo Personagem",this.icon=t.icon||"\u2694\ufe0f",this.level=Qt(t.level),this.experience=qt(t.experience,0),this.race=Zt(t.race),this.characterClass=nn(t.characterClass),this.attributes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{forca:Xt(e.forca,0),destreza:Xt(e.destreza,0),constituicao:Xt(e.constituicao,0),inteligencia:Xt(e.inteligencia,0),sabedoria:Xt(e.sabedoria,0),carisma:Xt(e.carisma,0)}}(t.attributes),this.hp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{current:qt(e.current,Ht),max:qt(e.max,Vt),temp:qt(e.temp,Wt)}}(t.hp),this.mp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{current:qt(e.current,Gt),max:qt(e.max,Yt)}}(t.mp),this.defense=Xt(t.defense,10),this.movement=qt(t.movement,9),this.skills=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e.map(e=>String(e)):[]}(t.skills),this.habilidades=tn(t.habilidades),this.inventory=tn(t.inventory),this.money=qt(t.money,0),this.notes="string"===typeof t.notes?t.notes:"",this.isFavorite=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("boolean"===typeof e)return e;if("number"===typeof e)return 1===e;if("string"===typeof e){const t=e.trim().toLowerCase();if("true"===t)return!0;if("false"===t)return!1}return t}(t.isFavorite,!1),this.createdAt=t.createdAt||n,this.updatedAt=t.updatedAt||n;const r=on(this),a=sn(this);this.hp.max=r,this.hp.current=Math.min(this.hp.current,r),this.mp.max=a,this.mp.max=a,this.mp.current=Math.min(this.mp.current,a)}get className(){const e=rn(this.characterClass);return e?e.name:this.characterClass||"Desconhecida"}get raceName(){const e=Kt(this.race);return e?e.name:this.race||"Desconhecida"}toJSON(){return{id:this.id,name:this.name,icon:this.icon,level:this.level,experience:this.experience,race:this.race,characterClass:this.characterClass,attributes:c({},this.attributes),hp:c({},this.hp),mp:c({},this.mp),defense:this.defense,movement:this.movement,skills:[...this.skills],habilidades:[...this.habilidades],inventory:[...this.inventory],money:this.money,notes:this.notes,isFavorite:this.isFavorite,createdAt:this.createdAt,updatedAt:this.updatedAt}}static fromJSON(){return new cn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}const un=e=>e instanceof cn?e.toJSON():new cn(e).toJSON(),dn=e=>cn.fromJSON(e),hn=e=>on(e),fn=e=>sn(e),pn=e=>$t(e),mn=e=>an(e),gn=(e,t)=>en(e,t),yn=e=>{var t,n;const r=(null===e||void 0===e?void 0:e.level)||1,a=(null===e||void 0===e?void 0:e.experience)||0,i=(null===(t=ln.find(e=>e.level===r))||void 0===t?void 0:t.experience)||0;null===(n=ln.find(e=>e.level===r+1))||void 0===n||n.experience;return Math.max(0,a-i)},vn=e=>{var t,n;const r=(null===e||void 0===e?void 0:e.level)||1,a=(null===(t=ln.find(e=>e.level===r))||void 0===t?void 0:t.experience)||0,i=(null===(n=ln.find(e=>e.level===r+1))||void 0===n?void 0:n.experience)||null;return 20===r?0:i-a},wn=e=>{const t=Math.max(0,e||0);for(let n=ln.length-1;n>=0;n--)if(t>=ln[n].experience)return ln[n].level;return 1},Cn=e=>Ut[e]||[],bn=(e,t)=>Cn(e).find(e=>e.id===t)||null,Sn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!t||0===t.length||t.every(t=>{if("string"===typeof t)return!0;switch(t.type){case"attribute":return en(e,t.key)>=t.value;case"skill":return e.skills.includes(t.value);case"level":return e.level>=t.value;case"Poder":return e.habilidades.some(e=>e.id===t.value);case"tag":return e.habilidades.map(t=>bn(e.characterClass,t.id)).filter(Boolean).filter(e=>e.tags&&e.tags.includes(t.value)).length>=(t.count||1);default:return!0}})},En=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Number(e);return Number.isFinite(n)?n:t},An=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.max(0,En(e,t))},In=function(e){return"string"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""};class Nn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=e.id||Bt();const t=In(e.name,"Novo Item").trim();this.name=t||"Novo Item",this.description=In(e.description,""),this.quantity=Math.max(0,Math.round(An(e.quantity,1))),this.weight=An(e.weight,0),this.price=An(e.price,0),this.type=In(e.type,"misc"),this.rarity=In(e.rarity,"common"),this.equipped=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("boolean"===typeof e)return e;if("number"===typeof e)return 1===e;if("string"===typeof e){const t=e.trim().toLowerCase();if("true"===t)return!0;if("false"===t)return!1}return t}(e.equipped,!1),this.notes=In(e.notes,"")}toJSON(){return{id:this.id,name:this.name,description:this.description,quantity:this.quantity,weight:this.weight,price:this.price,type:this.type,rarity:this.rarity,equipped:this.equipped,notes:this.notes}}static fromJSON(){return new Nn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}const _n=[{id:"weapon",name:"Arma",icon:"\u2694\ufe0f"},{id:"armor",name:"Armadura",icon:"\ud83d\udee1\ufe0f"},{id:"consumable",name:"Consum\xedvel",icon:"\ud83e\uddea"},{id:"tool",name:"Ferramenta",icon:"\ud83d\udd27"},{id:"magic",name:"M\xe1gico",icon:"\u2728"},{id:"misc",name:"Diversos",icon:"\ud83d\udce6"}],Tn=[{id:"common",name:"Comum",color:"#9e9e9e"},{id:"uncommon",name:"Incomum",color:"#4caf50"},{id:"rare",name:"Raro",color:"#2196f3"},{id:"epic",name:"\xc9pico",color:"#9c27b0"},{id:"legendary",name:"Lend\xe1rio",color:"#ff9800"}],xn=[{id:"d4",sides:4,icon:"\ud83c\udfb2"},{id:"d6",sides:6,icon:"\ud83c\udfb2"},{id:"d8",sides:8,icon:"\ud83c\udfb2"},{id:"d10",sides:10,icon:"\ud83c\udfb2"},{id:"d12",sides:12,icon:"\ud83c\udfb2"},{id:"d20",sides:20,icon:"\ud83c\udfaf"},{id:"d100",sides:100,icon:"\ud83d\udcaf"}],Dn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Number(e);return Number.isFinite(n)?n:t},Mn=new Set(["normal","advantage","disadvantage"]);class Rn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;this.id=e.id||Bt(),this.timestamp=e.timestamp||(new Date).toISOString(),this.diceType=e.diceType||"d20",this.diceCount=Math.max(1,Dn(e.diceCount,1)),this.modifier=Dn(e.modifier,0),this.rolls=Array.isArray(e.rolls)?e.rolls.map(e=>Dn(e,0)):[],this.total=Dn(e.total,0),this.description="string"===typeof e.description?e.description:"",this.rollType=(t=e.rollType,Mn.has(t)?t:"normal"),this.isCriticalSuccess=Boolean(e.isCriticalSuccess),this.isCriticalFailure=Boolean(e.isCriticalFailure),this.playerId=e.playerId||null}toJSON(){return{id:this.id,timestamp:this.timestamp,diceType:this.diceType,diceCount:this.diceCount,modifier:this.modifier,rolls:[...this.rolls],total:this.total,description:this.description,rollType:this.rollType,isCriticalSuccess:this.isCriticalSuccess,isCriticalFailure:this.isCriticalFailure,playerId:this.playerId}}static fromJSON(){return new Rn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}const On=e=>Rn.fromJSON(e),kn=e=>Math.floor(Math.random()*e)+1,Pn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=[];for(let r=0;r<t;r++)n.push(kn(e));return n},Ln=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"normal",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const o=(null===(t=xn.find(t=>t.id===e))||void 0===t?void 0:t.sides)||20;let s,l;if("advantage"===a){const e=(()=>{const e=Pn(20,2);return{rolls:e,result:Math.max(...e),type:"advantage"}})();s=e.rolls,l=e.result}else if("disadvantage"===a){const e=(()=>{const e=Pn(20,2);return{rolls:e,result:Math.min(...e),type:"disadvantage"}})();s=e.rolls,l=e.result}else s=Pn(o,n),l=s.reduce((e,t)=>e+t,0);const c=l+r,u="d20"===e?20===(d=s[0])?{type:"critical_success",message:"Sucesso Cr\xedtico! \ud83c\udf89"}:1===d?{type:"critical_failure",message:"Falha Cr\xedtica! \ud83d\udc80"}:{type:"normal",message:""}:{type:"normal",message:""};var d;return function(){return new Rn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({diceType:e,diceCount:n,modifier:r,rolls:s,total:c,rollType:a,description:i,isCriticalSuccess:"critical_success"===u.type,isCriticalFailure:"critical_failure"===u.type})},Bn="tormenta20_characters",jn="tormenta20_roll_history",Fn="tormenta20_settings",zn="undefined"!==typeof navigator&&navigator.storage?navigator.storage:null,Un="t20_settings_updated",Hn=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("boolean"===typeof e)return e;if("string"===typeof e){const t=e.trim().toLowerCase();if("true"===t)return!0;if("false"===t)return!1}if("number"===typeof e){if(1===e)return!0;if(0===e)return!1}return t},Vn=(e,t)=>{try{const n=JSON.stringify(t);return localStorage.setItem(e,n),!0}catch(n){return console.error("Erro ao salvar dados:",n),!1}},Wn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=localStorage.getItem(e);return null===n?t:JSON.parse(n)}catch(n){return console.error("Erro ao carregar dados:",n),t}},Gn=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>un(e))},Yn=function(){return Vn(Bn,Gn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]))},Xn=()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(Array.isArray(e)?e:[]).map(e=>dn(e))}(Wn(Bn,[])||[]),qn=e=>{const t=Xn(),n=t.findIndex(t=>t.id===e.id),r=dn(c(c({},un(e)),{},{updatedAt:(new Date).toISOString()}));return n>=0?t[n]=r:t.push(r),Yn(t)},Qn=e=>Xn().find(t=>t.id===e)||null,Zn=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>{return(t=e)instanceof Rn?t.toJSON():new Rn(t).toJSON();var t})},Kn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(Array.isArray(e)?e:[]).map(e=>On(e))},$n=e=>{const t=Kn(e).slice(-50);return Vn(jn,Zn(t))},Jn=()=>{const e=Wn(jn,[]);return Kn(e||[])},er={theme:"dark",soundEnabled:!0,vibrationEnabled:!0,debugNotificationsEnabled:!1},tr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=c(c({},er),e);return c(c({},t),{},{theme:(n=t.theme,"light"===n?"light":"dark"),soundEnabled:Hn(t.soundEnabled,!0),vibrationEnabled:Hn(t.vibrationEnabled,!0),debugNotificationsEnabled:Hn(t.debugNotificationsEnabled,!1)});var n},nr=e=>{const t=tr(e),n=Vn(Fn,t);return n&&(e=>{"undefined"!==typeof window&&"function"===typeof window.dispatchEvent&&window.dispatchEvent(new CustomEvent(Un,{detail:e}))})(t),n},rr=()=>{const e=Wn(Fn,er)||{};return tr(e)},ar=async()=>{if(!zn)return{supported:!1,persisted:!1};try{if(await(async()=>{if(!zn||"function"!==typeof zn.persisted)return!1;try{return await zn.persisted()}catch(e){return console.error("Erro ao verificar storage persistente:",e),!1}})())return{supported:!0,persisted:!0};if("function"===typeof zn.persist){return{supported:!0,persisted:await zn.persist()}}return{supported:!0,persisted:!1}}catch(e){return console.error("Erro ao solicitar storage persistente:",e),{supported:!0,persisted:!1}}},ir=e=>{try{const t=JSON.stringify(e),n=btoa(unescape(encodeURIComponent(t)));return n.length>4e3&&console.warn("Payload QR muito grande: ".concat(n.length," bytes (m\xe1x: ").concat(4e3,")")),n}catch(t){return console.error("Erro ao serializar para QR:",t),null}},or=()=>!(!window.RTCPeerConnection||!window.RTCSessionDescription),sr=()=>/android/i.test(navigator.userAgent),lr={NODE_ENV:"production",PUBLIC_URL:"/Tormenta20-App",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"1.0.3"}.REACT_APP_API_BASE_URL||"https://gabrielgga.pythonanywhere.com";async function cr(e,t){const n=await fetch("".concat(lr,"/rooms/").concat(e,"/signal"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Erro ao enviar sinal: ".concat(n.status))}async function ur(e,t){const n=await fetch("".concat(lr,"/rooms/").concat(e,"/signal?device_id=").concat(t));if(!n.ok)throw new Error("Erro ao buscar sinais: ".concat(n.status));return n.json()}async function dr(e,t){const n=await fetch("".concat(lr,"/rooms/").concat(e,"/heartbeat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:t})});if(!n.ok)throw new Error("Erro ao enviar heartbeat: ".concat(n.status))}const hr={iceServers:[{urls:"stun:stun.l.google.com:19302"}]};class fr{constructor(e,t,n,r){this.roomId=e,this.deviceId=t,this.onStateChange=n,this.onMessage=r,this.connections=new Map,this.state="DISCONNECTED"}setState(e){var t;this.state=e,null===(t=this.onStateChange)||void 0===t||t.call(this,e)}async addPeer(e){if(this.connections.has(e))return;this.setState("SIGNALING");const t=new RTCPeerConnection(hr),n=t.createDataChannel("sync_channel");n.onopen=()=>{console.log("DataChannel aberto com ".concat(e)),this.connections.get(e).state="CONNECTED",this.checkOverallState()},n.onmessage=t=>{var n;const r=JSON.parse(t.data);null===(n=this.onMessage)||void 0===n||n.call(this,e,r)},n.onclose=()=>{console.log("DataChannel fechado com ".concat(e)),this.connections.get(e).state="DISCONNECTED",this.checkOverallState()},t.onicecandidate=async t=>{t.candidate&&await cr(this.roomId,{type:"ice",from:this.deviceId,to:e,payload:{candidate:t.candidate}})},t.onconnectionstatechange=()=>{"connected"===t.connectionState?(this.connections.get(e).state="CONNECTED",this.checkOverallState()):"failed"===t.connectionState&&(this.connections.get(e).state="FAILED",this.checkOverallState())},this.connections.set(e,{pc:t,dataChannel:n,state:"SIGNALING",pendingIceCandidates:[],hasRemoteDescription:!1});const r=await t.createOffer();await t.setLocalDescription(r),console.log("[HostConnection] Enviando offer para peer:",e),await cr(this.roomId,{type:"offer",from:this.deviceId,to:e,payload:{sdp:r.sdp}})}async handleAnswer(e,t){console.log("[HostConnection] Recebeu answer de:",e);const n=this.connections.get(e);if(n){if(await n.pc.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:t.sdp})),n.hasRemoteDescription=!0,n.state="CONNECTING",console.log("[HostConnection] Answer processado, estado: CONNECTING"),n.pendingIceCandidates&&n.pendingIceCandidates.length>0){console.log("[HostConnection] Processando",n.pendingIceCandidates.length,"ICE candidates pendentes");for(const e of n.pendingIceCandidates)try{await n.pc.addIceCandidate(new RTCIceCandidate(e))}catch(r){console.warn("[HostConnection] Erro ao adicionar ICE pendente:",r)}n.pendingIceCandidates.length=0}this.checkOverallState()}else console.warn("[HostConnection] Conex\xe3o n\xe3o encontrada para:",e)}async handleIce(e,t){console.log("[HostConnection] Recebeu ICE de:",e);const n=this.connections.get(e);if(n)return n.hasRemoteDescription?void await n.pc.addIceCandidate(new RTCIceCandidate(t)):(console.log("[HostConnection] ICE enfileirado (aguardando answer)"),void n.pendingIceCandidates.push(t));console.warn("[HostConnection] Conex\xe3o n\xe3o encontrada para ICE:",e)}checkOverallState(){const e=Array.from(this.connections.values()).map(e=>e.state);e.every(e=>"CONNECTED"===e)?this.setState("CONNECTED"):e.some(e=>"FAILED"===e)?this.setState("FAILED"):e.some(e=>"CONNECTING"===e)?this.setState("CONNECTING"):this.setState("SIGNALING")}sendMessage(e,t){const n=this.connections.get(e);n&&"open"===n.dataChannel.readyState&&n.dataChannel.send(JSON.stringify(t))}broadcastMessage(e){for(const[t,n]of this.connections)"open"===n.dataChannel.readyState&&n.dataChannel.send(JSON.stringify(e))}close(){for(const e of this.connections.values())e.pc.close();this.connections.clear(),this.setState("DISCONNECTED")}}const pr={iceServers:[{urls:"stun:stun.l.google.com:19302"}]};class mr{constructor(e,t,n,r,a){this.roomId=e,this.deviceId=t,this.hostId=n,this.onStateChange=r,this.onMessage=a,this.pc=null,this.dataChannel=null,this.state="DISCONNECTED",this.pendingIceCandidates=[]}setState(e){var t;this.state=e,null===(t=this.onStateChange)||void 0===t||t.call(this,e)}async handleOffer(e){this.setState("SIGNALING"),this.pc=new RTCPeerConnection(pr),this.pc.ondatachannel=e=>{this.dataChannel=e.channel,this.dataChannel.onopen=()=>{console.log("DataChannel aberto como Peer"),this.setState("CONNECTED")},this.dataChannel.onmessage=e=>{var t;const n=JSON.parse(e.data);null===(t=this.onMessage)||void 0===t||t.call(this,n)},this.dataChannel.onclose=()=>{console.log("DataChannel fechado como Peer"),this.setState("DISCONNECTED")}},this.pc.onicecandidate=async e=>{e.candidate&&(console.log("[PeerConnection] Enviando ICE candidate para host:",this.hostId),await cr(this.roomId,{type:"ice",from:this.deviceId,to:this.hostId,payload:{candidate:e.candidate}}))},this.pc.onconnectionstatechange=()=>{"connected"===this.pc.connectionState?this.setState("CONNECTED"):"connecting"===this.pc.connectionState?this.setState("CONNECTING"):"failed"===this.pc.connectionState&&this.setState("FAILED")},await this.pc.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:e.sdp}));const t=await this.pc.createAnswer();if(await this.pc.setLocalDescription(t),console.log("[PeerConnection] Enviando answer para host:",this.hostId),await cr(this.roomId,{type:"answer",from:this.deviceId,to:this.hostId,payload:{sdp:t.sdp}}),this.pendingIceCandidates.length>0){console.log("[PeerConnection] Processando",this.pendingIceCandidates.length,"ICE candidates pendentes");for(const e of this.pendingIceCandidates)try{await this.pc.addIceCandidate(new RTCIceCandidate(e))}catch(n){console.warn("[PeerConnection] Erro ao adicionar ICE pendente:",n)}this.pendingIceCandidates.length=0}}async handleIce(e){if(!this.pc)return console.log("[PeerConnection] ICE enfileirado (aguardando offer)"),void this.pendingIceCandidates.push(e.candidate);try{await this.pc.addIceCandidate(new RTCIceCandidate(e.candidate))}catch(t){console.warn("[PeerConnection] Erro ao adicionar ICE:",t)}}sendMessage(e){this.dataChannel&&"open"===this.dataChannel.readyState&&this.dataChannel.send(JSON.stringify(e))}close(){this.pc&&(this.pc.close(),this.pc=null),this.dataChannel=null,this.setState("DISCONNECTED")}}const gr=(0,e.createContext)(null);function yr(t){let{children:n}=t;const[r,a]=(0,e.useState)(()=>localStorage.getItem("t20_role")),[i,o]=(0,e.useState)(()=>localStorage.getItem("t20_roomId")),[s,l]=(0,e.useState)(()=>localStorage.getItem("t20_apiToken")),[c,u]=(0,e.useState)(()=>{const e=localStorage.getItem("deviceId");if(e)return e;const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return localStorage.setItem("deviceId",t),t}),d={role:r,setRole:e=>{a(e),e?localStorage.setItem("t20_role",e):localStorage.removeItem("t20_role")},roomId:i,setRoomId:e=>{o(e),e?localStorage.setItem("t20_roomId",e):localStorage.removeItem("t20_roomId")},deviceId:c,apiToken:s,setApiToken:e=>{l(e),e?localStorage.setItem("t20_apiToken",e):localStorage.removeItem("t20_apiToken")}};return(0,_t.jsx)(gr.Provider,{value:d,children:n})}function vr(){const t=(0,e.useContext)(gr);if(!t)throw new Error("useRoom must be used within a RoomProvider");return t}const wr=(0,e.createContext)(null),Cr="host",br="player",Sr="idle",Er="creating",Ar="active",Ir="connected",Nr="disconnected",_r="error";function Tr(t){let{children:n}=t;const[r,a]=(0,e.useState)(null),[i,o]=(0,e.useState)(Sr),[s,l]=(0,e.useState)([]),[u,d]=(0,e.useState)([]),[h,f]=(0,e.useState)(null),[p,m]=(0,e.useState)(null),[g,y]=(0,e.useState)({}),v=(0,e.useRef)(null),w=(0,e.useRef)({}),C=(0,e.useRef)(null),b=(0,e.useRef)(null),S=(0,e.useRef)(new Set),E=(0,e.useRef)(null),{setRole:A,setRoomId:I,setApiToken:N,deviceId:_}=vr(),T=(0,e.useCallback)(()=>{a(null),o(Sr),l([]),d([]),f(null),m(null),y({}),w.current={}},[]),x=(0,e.useCallback)(()=>{var e,t;if(v.current){try{v.current.pollInterval&&clearInterval(v.current.pollInterval),v.current.heartbeatInterval&&clearInterval(v.current.heartbeatInterval),v.current.close()}catch(n){console.error("[ConnectionProvider] Erro ao fechar sess\xe3o:",n)}v.current=null}C.current&&(C.current.close(),C.current=null),b.current&&(b.current.close(),b.current=null),null!==(e=v.current)&&void 0!==e&&e.pollInterval&&clearInterval(v.current.pollInterval),null!==(t=v.current)&&void 0!==t&&t.heartbeatInterval&&clearInterval(v.current.heartbeatInterval),T(),A(null),I(null),N(null)},[T,A,I,N]);(0,e.useEffect)(()=>()=>{if(v.current){try{v.current.close()}catch(e){console.error("[ConnectionProvider] Erro no cleanup:",e)}v.current=null}},[]);(0,e.useCallback)((e,t)=>{var n,r;console.log("[ConnectionProvider] Jogador conectado:",e),l(n=>n.find(t=>t.playerId===e)?n.map(n=>n.playerId===e?c(c(c({},n),t),{},{status:"connected",restartReason:void 0}):n):[...n,c(c({playerId:e},t),{},{status:"connected"})]),d(t=>t.filter(t=>t.playerId!==e)),y(t=>{const n=c({},t);return delete n[e],n}),null===(n=(r=w.current).onPlayerConnected)||void 0===n||n.call(r,e,t)},[]),(0,e.useCallback)((e,t)=>{var n,r;console.log("[ConnectionProvider] Jogador desconectado:",e),l(t=>t.map(t=>t.playerId===e?c(c({},t),{},{status:"disconnected"}):t)),null===(n=(r=w.current).onPlayerDisconnected)||void 0===n||n.call(r,e,t)},[]);const D=(0,e.useCallback)((e,t)=>{var n,r,a,i;(console.log("[ConnectionProvider] Mensagem de jogador:",e,t.type),"hello"===t.type&&(console.log("[ConnectionProvider] Recebeu hello de:",e,t.characterInfo),l(n=>n.map(n=>n.playerId===e?c(c({},n),{},{info:t.characterInfo,status:"connected"}):n))),"characterUpdate"===t.type&&l(n=>n.map(n=>n.playerId===e?c(c({},n),{},{info:c(c({},n.info),t.data)}):n)),"chatMessage"===t.type)&&(console.log("[ConnectionProvider] Chat recebido de:",e),null===(a=(i=w.current).onChatMessage)||void 0===a||a.call(i,e,t.payload));null===(n=(r=w.current).onMessage)||void 0===n||n.call(r,e,t)},[]),M=((0,e.useCallback)(e=>{var t,n;console.error("[ConnectionProvider] Erro na sess\xe3o Host:",e),m(e.error||"Erro na conex\xe3o"),null===(t=(n=w.current).onError)||void 0===t||t.call(n,e)},[]),(0,e.useCallback)((e,t)=>{var n,r;console.log("[ConnectionProvider] ICE restart solicitado:",e);const a=ir(t),i="manual"===(null===t||void 0===t?void 0:t.reason)?"Rein\xedcio manual":"ice-failed"===(null===t||void 0===t?void 0:t.reason)?"Falha na conex\xe3o":"Reconex\xe3o autom\xe1tica";y(t=>c(c({},t),{},{[e]:{qr:a,reason:i}})),l(t=>t.map(t=>t.playerId===e?c(c({},t),{},{status:"reconnecting",restartReason:i}):t)),null===(n=(r=w.current).onIceRestart)||void 0===n||n.call(r,e,t)},[]),(0,e.useCallback)(()=>{var e,t;console.log("[ConnectionProvider] Conectado ao Mestre!"),o(Ir),null===(e=(t=w.current).onConnected)||void 0===e||e.call(t)},[]),(0,e.useCallback)(()=>{var e,t;console.log("[ConnectionProvider] Desconectado do Mestre"),o(Nr),null===(e=(t=w.current).onDisconnected)||void 0===e||e.call(t)},[]),(0,e.useCallback)(e=>{var t,n,r,a;(console.log("[ConnectionProvider] Mensagem do Mestre:",e.type),"chatMessage"===e.type)&&(console.log("[ConnectionProvider] Chat recebido do mestre"),null===(r=(a=w.current).onChatMessage)||void 0===r||r.call(a,null,e.payload));null===(t=(n=w.current).onMessage)||void 0===t||t.call(n,e)},[]),(0,e.useCallback)(e=>{var t,n;console.error("[ConnectionProvider] Erro na sess\xe3o Player:",e),m(e.error||"Erro na conex\xe3o"),null===(t=(n=w.current).onError)||void 0===t||t.call(n,e)},[]),(0,e.useCallback)(()=>{var e,t;console.log("[ConnectionProvider] Mestre solicitou rein\xedcio de ICE"),o(Nr),f(null),null===(e=(t=w.current).onIceRestartRequired)||void 0===e||e.call(t)},[]),(0,e.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v.current&&x(),w.current=e,a(Cr),o(Er),m(null);try{const{room_id:e,token:t}=await async function(e){const t=await fetch("".concat(lr,"/rooms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:e})});if(!t.ok)throw new Error("Erro ao criar sala: ".concat(t.status));return t.json()}(_);I(e),N(t),A("host");const n=new fr(e,_,e=>{o({DISCONNECTED:Nr,SIGNALING:Ar,CONNECTING:Ir,CONNECTED:Ir,FAILED:_r}[e]||Sr)},(e,t)=>{D(e,t)});C.current=n,v.current=n,o(Ar),l([]),S.current=new Set;const r=setInterval(async()=>{try{const t=await async function(e){const t=await fetch("".concat(lr,"/rooms/").concat(e,"/participants"));if(!t.ok)throw new Error("Erro ao buscar participantes: ".concat(t.status));return t.json()}(e);for(const e of t){const t=e.device_id;S.current.has(t)||(console.log("[ConnectionProvider] Host detectou novo peer:",t),S.current.add(t),await n.addPeer(t),l(e=>[...e,{playerId:t,status:"connecting"}]))}const r=(await ur(e,_)).filter(e=>"answer"===e.type||"ice"===e.type);r.length>0&&console.log("[ConnectionProvider] Host recebeu signals relevantes:",r.length);for(const e of r)console.log("[ConnectionProvider] Host processando signal:",e.type,"de:",e.from),"answer"===e.type?(await n.handleAnswer(e.from,e.payload),l(t=>t.map(t=>t.playerId===e.from?c(c({},t),{},{status:"connected"}):t))):"ice"===e.type&&await n.handleIce(e.from,e.payload.candidate)}catch(t){console.error("Erro no polling:",t)}},2e3);v.current.pollInterval=r;const a=setInterval(async()=>{try{await dr(e,_)}catch(t){console.error("Erro no heartbeat:",t)}},1e4);v.current.heartbeatInterval=a,console.log("[ConnectionProvider] Sess\xe3o Host iniciada:",e)}catch(t){throw console.error("[ConnectionProvider] Erro ao criar sess\xe3o Host:",t),m(t.message||"Erro ao criar sess\xe3o"),o(_r),t}},[_,I,N,A])),R=(0,e.useCallback)(async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v.current&&x(),w.current=n,E.current=t,a(br),o(Er),m(null);try{const{token:t,host_id:n}=await async function(e,t){const n=await fetch("".concat(lr,"/rooms/").concat(e,"/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:t})});if(!n.ok)throw new Error("Erro ao entrar na sala: ".concat(n.status));return n.json()}(e,_);console.log("[ConnectionProvider] Player entrou na sala. Host ID:",n),I(e),N(t),A("peer");const r=new mr(e,_,n,e=>{o({DISCONNECTED:Nr,SIGNALING:Ar,CONNECTING:Ir,CONNECTED:Ir,FAILED:_r}[e]||Sr),"CONNECTED"===e&&E.current&&r.sendMessage({type:"hello",characterInfo:E.current,timestamp:Date.now()})},e=>{var t,n;null===(t=(n=w.current).onMessage)||void 0===t||t.call(n,e)});b.current=r,v.current=r,o(Ar);const a=async()=>{try{const t=await ur(e,_);t.length>0&&console.log("[ConnectionProvider] Player recebeu signals:",t.length);for(const e of t)console.log("[ConnectionProvider] Processando signal:",e.type,"de:",e.from),"offer"===e.type?await r.handleOffer(e.payload):"ice"===e.type&&await r.handleIce(e.payload)}catch(t){console.error("Erro no polling de signals:",t)}};a();const i=setInterval(a,2e3);v.current.pollInterval=i;const s=setInterval(async()=>{try{await dr(e,_)}catch(t){console.error("Erro no heartbeat:",t)}},1e4);v.current.heartbeatInterval=s,console.log("[ConnectionProvider] Sess\xe3o Player iniciada:",e)}catch(r){throw console.error("[ConnectionProvider] Erro ao criar sess\xe3o Player:",r),m(r.message||"Erro ao entrar na sess\xe3o"),o(_r),r}},[_,I,N,A]),O=(0,e.useCallback)(async(e,t)=>{if(!v.current||r!==Cr)throw new Error("Sess\xe3o de Host n\xe3o est\xe1 ativa");await v.current.addAnswer(e,t),d(t=>t.filter(t=>t.playerId!==e)),l(t=>t.find(t=>t.playerId===e)?t:[...t,{playerId:e,status:"pending",info:null}]),y(t=>{const n=c({},t);return delete n[e],n})},[r]),k=(0,e.useCallback)(async()=>{if(!v.current||r!==Cr)throw new Error("Sess\xe3o de Host n\xe3o est\xe1 ativa");const e=await v.current.createInvite(),t={playerId:e.playerId,offerCode:e.offerCode,createdAt:Date.now()};return d(e=>[...e,t]),console.log("[ConnectionProvider] Convite criado:",e.playerId),t},[r]),P=(0,e.useCallback)(e=>{d(t=>t.filter(t=>t.playerId!==e)),console.log("[ConnectionProvider] Convite cancelado:",e)},[]),L=(0,e.useCallback)(async e=>{var t;if(null===(t=v.current)||void 0===t||!t.handleOffer)throw new Error("Sess\xe3o de Player n\xe3o est\xe1 ativa ou n\xe3o suporta reconex\xe3o");const{answerQR:n}=await v.current.handleOffer(e);return f(n),n},[]),B=(0,e.useCallback)((e,t)=>v.current&&r===Cr?v.current.sendToPlayer(e,t):(console.warn("[ConnectionProvider] Sess\xe3o de Host n\xe3o ativa"),!1),[r]),j=(0,e.useCallback)(e=>v.current&&r===Cr?v.current.broadcast(e):(console.warn("[ConnectionProvider] Sess\xe3o de Host n\xe3o ativa"),0),[r]),F=(0,e.useCallback)(e=>v.current&&r===br?(console.log("[ConnectionProvider] Enviando atualiza\xe7\xe3o de personagem:",e),v.current.sendMessage({type:"characterUpdate",data:e,timestamp:Date.now()})):(console.warn("[ConnectionProvider] Sess\xe3o de Player n\xe3o ativa"),!1),[r]),z=(0,e.useCallback)(e=>v.current&&r===br?v.current.sendMessage(c(c({type:"diceRoll"},e),{},{timestamp:Date.now()})):(console.warn("[ConnectionProvider] Sess\xe3o de Player n\xe3o ativa"),!1),[r]),U=(0,e.useCallback)(function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e||!e.trim())return console.warn("[ConnectionProvider] Mensagem de chat vazia ignorada"),!1;const i={type:"chatMessage",payload:{id:"chat-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),text:e.trim().substring(0,500),senderName:t||"An\xf4nimo",senderIcon:n||"\ud83d\udcac",timestamp:Date.now()}};return r===Cr?a?C.current?(C.current.sendMessage(a,i),console.log("[ConnectionProvider] Chat enviado para jogador:",a),!0):(console.warn("[ConnectionProvider] HostConnection n\xe3o dispon\xedvel"),!1):(console.warn("[ConnectionProvider] Host precisa especificar targetPlayerId"),!1):r===br?b.current?(b.current.sendMessage(i),console.log("[ConnectionProvider] Chat enviado para mestre"),!0):(console.warn("[ConnectionProvider] PeerConnection n\xe3o dispon\xedvel"),!1):(console.warn("[ConnectionProvider] Nenhuma sess\xe3o ativa para enviar chat"),!1)},[r]),H=(0,e.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manual";if(!v.current||r!==Cr)throw new Error("Sess\xe3o de Host n\xe3o est\xe1 ativa");return v.current.requestIceRestart(e,t)},[r]),V=(0,e.useCallback)(e=>{w.current=c(c({},w.current),e)},[]),W=(0,e.useMemo)(()=>({sessionType:r,status:i,players:s,pendingInvites:u,answerQR:h,errorMessage:p,restartOffers:g,isActive:i===Ar||i===Ir,isHost:r===Cr,isPlayer:r===br,startHostSession:M,startPlayerSession:R,endSession:x,createInvite:k,cancelInvite:P,addAnswer:O,handleOffer:L,sendToPlayer:B,broadcast:j,sendCharacterUpdate:F,sendDiceRoll:z,sendChatMessage:U,requestIceRestart:H,updateCallbacks:V,getSession:()=>v.current}),[r,i,s,u,h,p,g,M,R,x,k,P,O,L,B,j,F,z,U,H,V]);return(0,_t.jsx)(wr.Provider,{value:W,children:n})}function xr(){const t=(0,e.useContext)(wr);if(!t)throw new Error("useConnection deve ser usado dentro de um ConnectionProvider");return t}const Dr=["log","info","warn","error","debug"],Mr=()=>{if("undefined"===typeof window)return!1;try{const e=rr();return!0===(null===e||void 0===e?void 0:e.debugNotificationsEnabled)}catch(e){return!1}},Rr={log:"info",info:"info",warn:"warning",error:"error",debug:"info"},Or=e=>{if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e||null===e||void 0===e)return String(e);if(e instanceof Error)return e.stack||e.message||e.toString();try{return JSON.stringify(e)}catch(t){return Object.prototype.toString.call(e)}},kr=(e,t)=>{const n=t.map(Or).join(" "),r="[".concat(e.toUpperCase(),"] ").concat(n).trim();return r.length<=280?r:"".concat(r.slice(0,279),"\u2026")};const Pr=function(){const[t,n]=(0,e.useState)(Mr),[r,a]=(0,e.useState)([]),[i,o]=(0,e.useState)(null);return(0,e.useEffect)(()=>{"undefined"!==typeof window&&n(Mr())},[]),(0,e.useEffect)(()=>{if("undefined"===typeof window)return;const e=e=>{e&&Object.prototype.hasOwnProperty.call(e,"debugNotificationsEnabled")?n(!0===e.debugNotificationsEnabled):n(Mr())},t=t=>e(null===t||void 0===t?void 0:t.detail),r=()=>e();return window.addEventListener(Un,t),window.addEventListener("storage",r),()=>{window.removeEventListener(Un,t),window.removeEventListener("storage",r)}},[]),(0,e.useEffect)(()=>{if(!t)return;const e={};Dr.forEach(t=>{e[t]="function"===typeof console[t]?console[t]:null});const n=e.log||console.log||(()=>{}),r=(e,t)=>{const n=((e,t)=>({id:"undefined"!==typeof crypto&&crypto.randomUUID?crypto.randomUUID():"".concat(Date.now(),"-").concat(Math.random()),level:e,message:kr(e,t)}))(e,t);a(e=>{const t=[...e,n];return t.length>10?t.slice(t.length-10):t})};return Dr.forEach(t=>{const a=e[t]||n;console[t]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];try{a.apply(console,n)}catch(o){}r(t,n)}}),()=>{Dr.forEach(t=>{e[t]?console[t]=e[t]:console[t]=e.log||console.log||(()=>{})})}},[t]),(0,e.useEffect)(()=>{t||(a([]),o(null))},[t]),(0,e.useEffect)(()=>{t&&!i&&0!==r.length&&(o(r[0]),a(e=>e.slice(1)))},[r,i,t]),t&&i?(0,_t.jsx)("div",{className:"debug-notifier","aria-live":"polite","aria-atomic":"true",children:(0,_t.jsx)(Dt,{message:i.message,type:Rr[i.level]||"info",duration:5e3,onClose:()=>o(null)})}):null},Lr=["children","variant","size","fullWidth","disabled","onClick","type","className"];const Br=function(e){let{children:t,variant:n="primary",size:r="medium",fullWidth:i=!1,disabled:o=!1,onClick:s,type:l="button",className:u=""}=e,d=a(e,Lr);return(0,_t.jsx)("button",c(c({type:l,className:"btn btn-".concat(n," btn-").concat(r," ").concat(i?"btn-full":""," ").concat(u),disabled:o,onClick:s},d),{},{children:t}))};const jr=function(e){let{installAvailable:t,onInstall:n,onDismiss:r}=e;return(0,_t.jsxs)("div",{className:"install-prompt",role:"status","aria-live":"polite",children:[(0,_t.jsx)("div",{className:"install-prompt__icon","aria-hidden":"true",children:"\u2b07\ufe0f"}),(0,_t.jsxs)("div",{className:"install-prompt__text",children:[(0,_t.jsx)("strong",{children:"Instale o App Tormenta 20"}),(0,_t.jsx)("p",{children:"Tenha acesso offline, inicializa\xe7\xe3o mais r\xe1pida e evite fechar acidentalmente o navegador."}),!t&&(0,_t.jsx)("span",{className:"install-prompt__hint",children:'Abra o menu do navegador e escolha "Adicionar \xe0 tela inicial" para concluir.'})]}),(0,_t.jsxs)("div",{className:"install-prompt__actions",children:[t&&(0,_t.jsx)(Br,{size:"small",variant:"primary",onClick:n,children:"Instalar"}),(0,_t.jsx)(Br,{size:"small",variant:"ghost",onClick:r,children:"Agora n\xe3o"})]})]})};const Fr=function(e){let{title:t,showBack:n=!1,rightAction:r=null}=e;const a=ve();return(0,_t.jsxs)("header",{className:"app-header",children:[(0,_t.jsx)("div",{className:"header-left",children:n&&(0,_t.jsx)("button",{className:"header-btn back-btn",onClick:()=>a(-1),children:"\u2190"})}),(0,_t.jsx)("h1",{className:"header-title",children:t}),(0,_t.jsx)("div",{className:"header-right",children:r})]})},zr=e=>{let{filled:t}=e;return(0,_t.jsx)("svg",{className:"favorite-icon",viewBox:"0 0 16 16","aria-hidden":"true",children:t?(0,_t.jsx)("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.32-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.63.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"}):(0,_t.jsx)("path",{d:"M2.866 14.85c-.078.444.36.791.746.593L8 13.187l4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.32.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.63-.283.95l3.522 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"})})};const Ur=function(e){var t;let{character:n,onClick:r,showFavoriteToggle:a=!1,onFavoriteToggle:i}=e;const{name:o,icon:s,level:l,hp:c,isFavorite:u}=n,d=hn(n),h=Math.max(0,Math.min(null!==(t=null===c||void 0===c?void 0:c.current)&&void 0!==t?t:0,d)),f=d>0?h/d*100:0,p=pn(n),m=mn(n);return(0,_t.jsxs)("div",{className:"character-card",onClick:r,children:[(0,_t.jsx)("div",{className:"character-icon",children:s||"\u2694\ufe0f"}),(0,_t.jsxs)("div",{className:"character-info",children:[(0,_t.jsxs)("div",{className:"character-header",children:[(0,_t.jsx)("h3",{className:"character-name",children:o}),a&&(0,_t.jsx)("button",{type:"button",className:"favorite-toggle ".concat(u?"is-favorite":""),onClick:e=>{e.stopPropagation(),null===i||void 0===i||i()},"aria-pressed":u,"aria-label":u?"Personagem favorito":"Marcar como favorito",title:u?"Personagem favorito":"Marcar como favorito",children:(0,_t.jsx)(zr,{filled:u})})]}),(0,_t.jsxs)("p",{className:"character-details",children:[(null===p||void 0===p?void 0:p.name)||"Ra\xe7a"," \u2022 ",(null===m||void 0===m?void 0:m.name)||"Classe"," \u2022 Nv. ",l]}),(0,_t.jsx)("div",{className:"character-hp-bar",children:(0,_t.jsx)("div",{className:"hp-fill",style:{width:"".concat(f,"%")}})}),(0,_t.jsxs)("span",{className:"hp-text",children:[h,"/",d," PV"]})]}),(0,_t.jsx)("div",{className:"character-arrow",children:"\u203a"})]})};const Hr=function(e){let{diceType:t,sides:n,onClick:r,selected:a=!1}=e;return(0,_t.jsxs)("button",{className:"dice-button ".concat(a?"selected":""),onClick:()=>r(t,n),children:[(0,_t.jsx)("span",{className:"dice-icon",children:"\ud83c\udfb2"}),(0,_t.jsx)("span",{className:"dice-label",children:t})]})};const Vr=function(e){let{isOpen:t,onClose:n,title:r,children:a}=e;return t?(0,_t.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,_t.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsx)("h2",{className:"modal-title",children:r}),(0,_t.jsx)("button",{className:"modal-close",onClick:n,children:"\u2715"})]}),(0,_t.jsx)("div",{className:"modal-body",children:a})]})}):null};const Wr=function(t){let{value:n,onSave:r,label:a="",className:i=""}=t;const[o,s]=(0,e.useState)(!1),[l,c]=(0,e.useState)(n),[u,d]=(0,e.useState)([]),h=()=>{c(n),s(!1)};return(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("span",{className:"money-display ".concat(i),onClick:()=>s(!0),children:[a&&"".concat(a," "),n]}),(0,_t.jsx)(Vr,{isOpen:o,onClose:h,title:"Dinheiro",children:(0,_t.jsxs)("div",{className:"money-form",children:[(0,_t.jsx)("div",{className:"form-group",children:(0,_t.jsxs)("div",{className:"input-group",children:[(0,_t.jsx)("button",{className:"adjust-btn",onClick:()=>c(Math.max(0,l-1)),children:"-"}),(0,_t.jsx)("input",{type:"number",min:"0",value:l,onChange:e=>c(parseInt(e.target.value)||0)}),(0,_t.jsx)("button",{className:"adjust-btn",onClick:()=>{c(l+1);const e=Date.now()+Math.random();d(t=>[...t,e]),(()=>{if(rr().soundEnabled)try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.frequency.setValueAtTime(800,e.currentTime),t.frequency.setValueAtTime(600,e.currentTime+.1),t.frequency.setValueAtTime(1e3,e.currentTime+.2),n.gain.setValueAtTime(.3,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),t.start(e.currentTime),t.stop(e.currentTime+.5)}catch(e){console.log("Web Audio n\xe3o suportado")}})()},children:"+"})]})}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)(Br,{variant:"secondary",onClick:h,children:"Cancelar"}),(0,_t.jsx)(Br,{variant:"primary",onClick:()=>{r(l),s(!1)},children:"Salvar"})]})]})}),u.map(e=>(0,_t.jsx)(Gr,{onComplete:()=>d(t=>t.filter(t=>t!==e))},e))]})};const Gr=function(t){let{onComplete:n}=t;const[r,a]=(0,e.useState)([]),i=(0,e.useRef)(n);return(0,e.useEffect)(()=>{i.current=n},[n]),(0,e.useEffect)(()=>{console.log("CoinRain started - showing coin animation");const e=Array.from({length:1},(e,t)=>({id:t,left:100*Math.random(),delay:0,duration:2}));a(e);const t=setTimeout(()=>{console.log("CoinRain completed"),i.current&&i.current()},2e3);return()=>clearTimeout(t)},[]),(0,_t.jsx)("div",{className:"coin-rain",children:r.map(e=>(0,_t.jsx)("div",{className:"coin",style:{left:"".concat(e.left,"%"),animationDelay:"".concat(e.delay,"s"),animationDuration:"".concat(e.duration,"s")},children:"\ud83e\ude99"},e.id))})};const Yr=function(t){let{isOpen:n,onClose:r,character:a,onSaveAbilities:i}=t;const[o,s]=(0,e.useState)([]),[l,u]=(0,e.useState)(0),[d,h]=(0,e.useState)(null),[f,p]=(0,e.useState)([]),[m,g]=(0,e.useState)([]);if((0,e.useEffect)(()=>{if(n&&a){const e=[],t=[],n=Cn(a.characterClass);console.log("Character",a),n.forEach(e=>{"Habilidade base"===e.type&&e.level===a.level&&(a.habilidades.some(t=>t.id===e.id)||t.push(e))}),g(t);const r=new Map;n.some(e=>"Poder"===e.type&&!a.habilidades.some(t=>t.id===e.id)&&Sn(a,e.prerequisites))&&r.set("Poder",1),n.forEach(e=>{if("Habilidade base"===e.type&&e.grantsSelection&&e.level<=a.level){const t=e.grantsSelection,n=r.get(t)||0;r.set(t,n+1),console.log("Habilidade base ".concat(e.name," grants an additional selection for type ").concat(t,". Total now: ").concat(r.get(t)))}}),r.forEach((e,t)=>{if("Poder"!==t){const n=a.habilidades.filter(e=>{var n;return(null===(n=bn(a.characterClass,e.id))||void 0===n?void 0:n.type)===t}).length;console.log("Type ".concat(t," has count ").concat(e," before subtracting owned (").concat(n,")"));const i=e-n;i<=0?r.delete(t):r.set(t,i)}}),console.log("Final type counts with grantsSelection:",r),Array.from(r.entries()).forEach(t=>{let[n,r]=t;for(let a=0;a<r;a++)e.push({type:"selection",selectionType:n,title:"Escolha uma habilidade"})}),e.push({type:"summary",title:"Resumo do N\xedvel"}),s(e),u(0),p([]),h(null)}},[n,null===a||void 0===a?void 0:a.level,null===a||void 0===a?void 0:a.characterClass]),!a)return null;if(0===o.length)return null;const y=o[l];if(!y)return null;const v=a.level-1,w=hn(c(c({},a),{},{level:v})),C=fn(c(c({},a),{},{level:v})),b=hn(a),S=fn(a),E=b-w,A=S-C,I=()=>{if("summary"===y.type){const e=[...m,...f];return i&&e.length>0&&i(e),void r()}if(d){const e=_(y).find(e=>e.id===d);e&&p(t=>[...t,e])}h(null),u(e=>e+1)},N=()=>{h(null),u(e=>e+1)},_=e=>{const t=Cn(a.characterClass);return"selection"===e.type?t.filter(t=>t.type===e.selectionType&&!a.habilidades.some(e=>e.id===t.id)):[]};return(0,_t.jsx)(Vr,{isOpen:n,onClose:r,title:(null===y||void 0===y?void 0:y.title)||"N\xedvel",children:(0,_t.jsx)("div",{className:"level-up-modal",children:"summary"===(null===y||void 0===y?void 0:y.type)?(0,_t.jsxs)("div",{className:"level-up-content",children:[(0,_t.jsxs)("div",{className:"level-display",children:[(0,_t.jsx)("span",{className:"level-label",children:"N\xedvel"}),(0,_t.jsx)("span",{className:"level-number",children:a.level})]}),(0,_t.jsxs)("div",{className:"benefits-section",children:[(0,_t.jsx)("h3",{children:"Benef\xedcios adquiridos:"}),(0,_t.jsxs)("ul",{className:"benefits-list",children:[E>0&&(0,_t.jsxs)("li",{children:["HP m\xe1ximo aumentou em ",E]}),A>0&&(0,_t.jsxs)("li",{children:["PM m\xe1ximo aumentou em ",A]}),m.map(e=>(0,_t.jsxs)("li",{className:"new-power-benefit",children:[(0,_t.jsx)("strong",{children:"Nova Habilidade:"})," ",e.name]},e.id)),f.map(e=>(0,_t.jsxs)("li",{className:"new-power-benefit",children:[(0,_t.jsxs)("strong",{children:[e.type?e.type.charAt(0).toUpperCase()+e.type.slice(1):"Poder",":"]})," ",e.name]},e.id))]})]}),(0,_t.jsx)("div",{className:"modal-actions",children:(0,_t.jsx)(Br,{variant:"primary",onClick:I,children:"Concluir"})})]}):(()=>{const e=_(y);return(0,_t.jsxs)("div",{className:"level-up-content",children:[(0,_t.jsxs)("div",{className:"level-display",children:[(0,_t.jsx)("span",{className:"level-label",children:"N\xedvel"}),(0,_t.jsx)("span",{className:"level-number",children:a.level})]}),(0,_t.jsxs)("div",{className:"benefits-section",children:[(0,_t.jsxs)("h3",{children:[y.title,":"]}),(0,_t.jsx)("div",{className:"powers-list-scroll",children:e.map(e=>{const t=Sn(a,e.prerequisites);return t?(0,_t.jsxs)("div",{className:"power-option ".concat(d===e.id?"selected":""," ").concat(t?"":"disabled"),onClick:()=>t&&h(e.id),children:[(0,_t.jsxs)("div",{className:"power-header",children:[(0,_t.jsx)("strong",{children:e.name}),!t&&(0,_t.jsx)("span",{className:"prereq-warning",children:" (Pr\xe9-requisitos n\xe3o atendidos)"})]}),(0,_t.jsx)("p",{className:"power-desc",children:e.description})]},e.id):null})})]}),(0,_t.jsxs)("div",{className:"modal-actions",children:[(0,_t.jsx)(Br,{variant:"secondary",onClick:N,children:"Pular"}),(0,_t.jsx)(Br,{variant:"primary",onClick:I,disabled:!d,children:"Confirmar"})]})]})})()})})};var Xr;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(Xr||(Xr={}));var qr,Qr,Zr=new Map([[Xr.QR_CODE,"QR_CODE"],[Xr.AZTEC,"AZTEC"],[Xr.CODABAR,"CODABAR"],[Xr.CODE_39,"CODE_39"],[Xr.CODE_93,"CODE_93"],[Xr.CODE_128,"CODE_128"],[Xr.DATA_MATRIX,"DATA_MATRIX"],[Xr.MAXICODE,"MAXICODE"],[Xr.ITF,"ITF"],[Xr.EAN_13,"EAN_13"],[Xr.EAN_8,"EAN_8"],[Xr.PDF_417,"PDF_417"],[Xr.RSS_14,"RSS_14"],[Xr.RSS_EXPANDED,"RSS_EXPANDED"],[Xr.UPC_A,"UPC_A"],[Xr.UPC_E,"UPC_E"],[Xr.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function Kr(e){return Object.values(Xr).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(qr||(qr={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(Qr||(Qr={}));var $r,Jr=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Qr.SCAN_TYPE_CAMERA,Qr.SCAN_TYPE_FILE],e}(),ea=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Zr.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Zr.get(t))},e}(),ta=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}($r||($r={}));var na=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:$r.UNKWOWN_ERROR}},e}(),ra=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function aa(e){return"undefined"===typeof e||null===e}var ia,oa=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),sa=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),la=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),ca=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),a=0,i=Object.keys(e);a<i.length;a++){var o=i[a];if(r.has(o))return t.logError("".concat(o," is not supported videoConstaints."),!0),!1}return!0},e}(),ua=n(72),da=function(){function e(e,t,n){if(this.formatMap=new Map([[Xr.QR_CODE,ua.BarcodeFormat.QR_CODE],[Xr.AZTEC,ua.BarcodeFormat.AZTEC],[Xr.CODABAR,ua.BarcodeFormat.CODABAR],[Xr.CODE_39,ua.BarcodeFormat.CODE_39],[Xr.CODE_93,ua.BarcodeFormat.CODE_93],[Xr.CODE_128,ua.BarcodeFormat.CODE_128],[Xr.DATA_MATRIX,ua.BarcodeFormat.DATA_MATRIX],[Xr.MAXICODE,ua.BarcodeFormat.MAXICODE],[Xr.ITF,ua.BarcodeFormat.ITF],[Xr.EAN_13,ua.BarcodeFormat.EAN_13],[Xr.EAN_8,ua.BarcodeFormat.EAN_8],[Xr.PDF_417,ua.BarcodeFormat.PDF_417],[Xr.RSS_14,ua.BarcodeFormat.RSS_14],[Xr.RSS_EXPANDED,ua.BarcodeFormat.RSS_EXPANDED],[Xr.UPC_A,ua.BarcodeFormat.UPC_A],[Xr.UPC_E,ua.BarcodeFormat.UPC_E],[Xr.UPC_EAN_EXTENSION,ua.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ua)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),a=new Map;a.set(ua.DecodeHintType.POSSIBLE_FORMATS,r),a.set(ua.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(a){r(a)}})},e.prototype.decode=function(e){var t=new ua.MultiFormatReader(this.verbose,this.hints),n=new ua.HTMLCanvasElementLuminanceSource(e),r=new ua.BinaryBitmap(new ua.HybridBinarizer(n)),a=t.decode(r);return{text:a.text,format:ea.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),ha=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(Gi){i(Gi)}}function s(e){try{l(r.throw(e))}catch(Gi){i(Gi)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},fa=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(Gi){s=[6,Gi],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},pa=function(){function e(t,n,r){if(this.formatMap=new Map([[Xr.QR_CODE,"qr_code"],[Xr.AZTEC,"aztec"],[Xr.CODABAR,"codabar"],[Xr.CODE_39,"code_39"],[Xr.CODE_93,"code_93"],[Xr.CODE_128,"code_128"],[Xr.DATA_MATRIX,"data_matrix"],[Xr.ITF,"itf"],[Xr.EAN_13,"ean_13"],[Xr.EAN_8,"ean_8"],[Xr.PDF_417,"pdf417"],[Xr.UPC_A,"upc_a"],[Xr.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return ha(this,void 0,void 0,function(){var t,n;return fa(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:ea.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,a=e;r<a.length;r++){var i=a[r],o=i.boundingBox.width*i.boundingBox.height;o>n&&(n=o,t=i)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];this.formatMap.has(a)?t.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),ma=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(Gi){i(Gi)}}function s(e){try{l(r.throw(e))}catch(Gi){i(Gi)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},ga=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(Gi){s=[6,Gi],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},ya=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&pa.isSupported()?(this.primaryDecoder=new pa(e,n,r),this.secondaryDecoder=new da(e,n,r)):this.primaryDecoder=new da(e,n,r)}return e.prototype.decodeAsync=function(e){return ma(this,void 0,void 0,function(){var t;return ga(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return ma(this,void 0,void 0,function(){var t,n;return ga(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),va=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wa=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(Gi){i(Gi)}}function s(e){try{l(r.throw(e))}catch(Gi){i(Gi)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},Ca=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(Gi){s=[6,Gi],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},ba=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),Sa=function(e){function t(t){return e.call(this,"zoom",t)||this}return va(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return va(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(ba)),Ea=function(e){function t(t){return e.call(this,"torch",t)||this}return va(t,e),t}(ba),Aa=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new Sa(this.track)},e.prototype.torchFeature=function(){return new Ea(this.track)},e}(),Ia=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,a){return wa(this,void 0,void 0,function(){var i,o;return Ca(this,function(s){switch(s.label){case 0:return i=new e(t,n,a),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:s.sent(),s.label=2;case 2:return i.setupSurface(),[2,i]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return wa(this,void 0,void 0,function(){return Ca(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks().length,a=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++a>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new Aa(this.getFirstTrackOrFail())},e}(),Na=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return wa(this,void 0,void 0,function(){return Ca(this,function(r){return[2,Ia.create(e,this.mediaStream,t,n)]})})},e.create=function(t){return wa(this,void 0,void 0,function(){var n;return Ca(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}})})},e}(),_a=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(Gi){i(Gi)}}function s(e){try{l(r.throw(e))}catch(Gi){i(Gi)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},Ta=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(Gi){s=[6,Gi],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},xa=function(){function e(){}return e.failIfNotSupported=function(){return _a(this,void 0,void 0,function(){return Ta(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return _a(this,void 0,void 0,function(){return Ta(this,function(t){return[2,Na.create(e)]})})},e}(),Da=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(Gi){i(Gi)}}function s(e){try{l(r.throw(e))}catch(Gi){i(Gi)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},Ma=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(Gi){s=[6,Gi],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Ra=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=oa.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=oa.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return Da(this,void 0,void 0,function(){var e,t,n,r,a,i,o;return Ma(this,function(s){switch(s.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=s.sent(),r=[],a=0,i=n;a<i.length;a++)"videoinput"===(o=i[a]).kind&&r.push({id:o.deviceId,label:o.label});return e(t),[2,r]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var n=[],r=0,a=t;r<a.length;r++){var i=a[r];"video"===i.kind&&n.push({id:i.id,label:i.label})}e(n)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(ia||(ia={}));var Oa,ka=function(){function e(){this.state=ia.NOT_STARTED,this.onGoingTransactionNewState=ia.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===ia.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ia.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===ia.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ia.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ia.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case ia.UNKNOWN:throw"Transition from unknown is not allowed";case ia.NOT_STARTED:this.failIfNewStateIs(e,[ia.PAUSED]);case ia.SCANNING:case ia.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){if(e===r[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),Pa=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===ia.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==ia.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ia.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===ia.PAUSED},e}(),La=function(){function e(){}return e.create=function(){return new Pa(new ka)},e}(),Ba=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ja=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ba(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Jr),Fa=function(){function e(e,t){this.logger=t,this.fps=ja.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=ja.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ca.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!aa(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),za=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new ra(this.verbose),this.qrcode=new ya(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=La.create()}return e.prototype.start=function(e,t,n,r){var a,i=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";a=r||(this.verbose?this.logger.log:function(){});var o=Fa.create(t,this.logger);this.clearElement();var s=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?s=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=s,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:ja.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var u=this,d=this.stateManagerProxy.startTransition(ia.SCANNING);return new Promise(function(t,r){var s=l?o.videoConstraints:u.createVideoConstraints(e);if(!s)return d.cancel(),void r("videoConstraints should be defined");var c={};l&&!o.aspectRatio||(c.aspectRatio=o.aspectRatio);var h={onRenderSurfaceReady:function(e,t){u.setupUi(e,t,o),u.isScanning=!0,u.foreverScan(o,n,a)}};xa.failIfNotSupported().then(function(e){e.create(s).then(function(e){return e.render(i.element,c,h).then(function(e){u.renderedCamera=e,d.execute(),t(null)}).catch(function(e){d.cancel(),r(e)})}).catch(function(e){d.cancel(),r(oa.errorGettingUserMedia(e))})}).catch(function(e){d.cancel(),r(oa.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ia.PAUSED),this.showPausedState(),(aa(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(ia.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(ia.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(ja.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(aa(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,a){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var i=new Image;i.onload=function(){var e=i.width,o=i.height,s=document.getElementById(n.elementId),l=s.clientWidth?s.clientWidth:ja.DEFAULT_WIDTH,c=Math.max(s.clientHeight?s.clientHeight:o,ja.FILE_SCAN_MIN_HEIGHT),u=n.computeCanvasDrawConfig(e,o,l,c);if(t){var d=n.createCanvasElement(l,c,"qr-canvas-visible");d.style.display="inline-block",s.appendChild(d);var h=d.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=l,h.canvas.height=c,h.drawImage(i,0,0,e,o,u.x,u.y,u.width,u.height)}var f=ja.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(i.width,u.width),m=Math.max(i.height,u.height),g=p+2*f,y=m+2*f,v=n.createCanvasElement(g,y);s.appendChild(v);var w=v.getContext("2d");if(!w)throw"Unable to get 2d context from canvas";w.canvas.width=g,w.canvas.height=y,w.drawImage(i,0,0,e,o,f,f,p,m);try{n.qrcode.decodeRobustlyAsync(v).then(function(e){r(ta.createFromQrcodeResult(e))}).catch(a)}catch(C){a("QR code parse error, error = ".concat(C))}},i.onerror=a,i.onabort=a,i.onstalled=a,i.onsuspend=a,i.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Ra.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!ca.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[Xr.QR_CODE,Xr.AZTEC,Xr.CODABAR,Xr.CODE_39,Xr.CODE_93,Xr.CODE_128,Xr.DATA_MATRIX,Xr.MAXICODE,Xr.ITF,Xr.EAN_13,Xr.EAN_8,Xr.PDF_417,Xr.RSS_14,Xr.RSS_EXPANDED,Xr.UPC_A,Xr.UPC_E,Xr.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,a=e.formatsToSupport;r<a.length;r++){var i=a[r];Kr(i)?n.push(i):this.logger.warn("Invalid format: ".concat(i," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(aa(e))return!0;if(!aa(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(aa(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!aa(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r=this,a=n.qrbox;this.validateQrboxConfig(a);var i,o=this.toQrdimensions(e,t,a),s=function(e){if(e<ja.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ja.MIN_QR_BOX_SIZE,"px.")};s(o.width),s(o.height),o.width=((i=o.width)>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),i=e),i)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=aa(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var a=this.toQrdimensions(e,t,r);a.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var i=n.isShadedBoxEnabled()&&a.height<=t,o={x:0,y:0,width:e,height:t},s=i?this.getShadedRegionBounds(e,t,a):o,l=this.createCanvasElement(s.width,s.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=s.width,c.canvas.height=s.height,this.element.append(l),i&&this.possiblyInsertShadingElement(this.element,e,t,a),this.createScannerPausedUiElement(this.element),this.qrRegion=s,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=oa.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,ta.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var r=oa.codeParseError(e);return t(r,na.createFrom(r)),!1})},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),i=a.videoWidth/a.clientWidth,o=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var s=this.qrRegion.width*i,l=this.qrRegion.height*o,c=this.qrRegion.x*i,u=this.qrRegion.y*o;this.context.drawImage(a,c,u,s,l,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(a){a||!0===e.disableFlip?d():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){d()}))}).catch(function(e){r.logger.logError("Error happend while scanning context",e),d()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},a="exact",i=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},o=Object.keys(e);if(1!==o.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var s=Object.keys(e)[0];if(s!==t&&s!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(s!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(a in l)return{deviceId:{exact:l["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var c=e.facingMode;if("string"==typeof c){if(i(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = ".concat(typeof c);if(!(a in c))throw"'facingMode' should be string or object with"+" ".concat(a," as key.");if(i(c["".concat(a)]))return{facingMode:{exact:c["".concat(a)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var a=e,i=t;return e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),this.logger.log("Image downsampled from "+"".concat(a,"X").concat(i)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?ja.BORDER_SHADER_MATCH_COLOR:ja.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=e,a=t,i=document.createElement("canvas");return i.style.width="".concat(r,"px"),i.style.height="".concat(a,"px"),i.style.display="none",i.id=aa(n)?"qr-canvas":n,i},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var a=document.createElement("div");a.style.position="absolute";var i=(t-r.width)/2,o=(n-r.height)/2;if(a.style.borderLeft="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(ja.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var s=40;this.insertShaderBorders(a,s,5,-5,null,0,!0),this.insertShaderBorders(a,s,5,-5,null,0,!1),this.insertShaderBorders(a,s,5,null,-5,0,!0),this.insertShaderBorders(a,s,5,null,-5,0,!1),this.insertShaderBorders(a,5,45,-5,null,-5,!0),this.insertShaderBorders(a,5,45,null,-5,-5,!0),this.insertShaderBorders(a,5,45,-5,null,-5,!1),this.insertShaderBorders(a,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(a)}},e.prototype.insertShaderBorders=function(e,t,n,r,a,i,o){var s=document.createElement("div");s.style.position="absolute",s.style.backgroundColor=ja.BORDER_SHADER_DEFAULT_COLOR,s.style.width="".concat(t,"px"),s.style.height="".concat(n,"px"),null!==r&&(s.style.top="".concat(r,"px")),null!==a&&(s.style.bottom="".concat(a,"px")),o?s.style.left="".concat(i,"px"):s.style.right="".concat(i,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(s),e.appendChild(s)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),Ua="data:image/svg+xml;base64,",Ha=Ua+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Va=Ua+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Wa=Ua+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Ga=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Ya=function(){function e(){this.data=Ga.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Ga.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),Xa=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=la.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var a=document.createElement("a");a.innerText=la.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),qa=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Wa,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Wa,this.infoIcon.style.opacity="0.6")},e}(),Qa=function(){function e(){var e=this;this.infoDiv=new Xa,this.infoIcon=new qa(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),Za=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(Gi){i(Gi)}}function s(e){try{l(r.throw(e))}catch(Gi){i(Gi)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},Ka=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(Gi){s=[6,Gi],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},$a=function(){function e(){}return e.hasPermissions=function(){return Za(this,void 0,void 0,function(){var e,t,n,r;return Ka(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(r=n[t]).kind&&r.label)return[2,!0];return[2,!1]}})})},e}(),Ja=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===Qr.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===Qr.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return Jr.DEFAULT_SUPPORTED_SCAN_TYPE;var t=Jr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var a=r[n];if(!Jr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type ".concat(a)}return e},e}(),ei=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),ti=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(ei.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),ni=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(Gi){i(Gi)}}function s(e){try{l(r.throw(e))}catch(Gi){i(Gi)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},ri=function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(Gi){s=[6,Gi],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},ai=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return ni(this,void 0,void 0,function(){var e,t;return ri(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?sa.torchOffButton():sa.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?sa.torchOnFailedMessage():sa.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),ii=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=ti.createElement("button",ei.TORCH_BUTTON_ID),this.torchController=new ai(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=sa.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(e){return ni(n,void 0,void 0,function(){return ri(this,function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(ei.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(ei.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(ei.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(ei.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new ai(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=sa.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,a){var i=new e(n,a);return i.render(t,r),i},e}(),oi=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=ti.createElement("button",ei.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=ti.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],i=r.name;a.setImageNameToButton(i),n(r)}}});var i=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(i),this.fileBasedScanRegion.addEventListener("dragenter",function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var o=!1,s=0;s<r.length;++s){var l=r.item(s);if(l){if(l.type.match(/image.*/)){o=!0;var c=l.name;a.setImageNameToButton(c),n(l),i.innerText=sa.dragAndDropMessage();break}}}o||(i.innerText=sa.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=sa.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e="".concat(t,"....").concat(r)}var a=sa.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=a},e.prototype.setInitialValueToButton=function(){var e=sa.fileSelectionChooseImage()+" - "+sa.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),si=function(){function e(e){this.selectElement=ti.createElement("select",ei.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var r=sa.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var a=1,i=0,o=this.cameras;i<o.length;i++){var s=o[i],l=s.id,c=null==s.label?l:s.label;c&&""!==c||(c=[sa.anonymousCameraPrefix(),a++].join(" "));var u=document.createElement("option");u.value=l,u.innerText=c,this.options.push(u),this.selectElement.appendChild(u)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),li=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ti.createElement("input",ei.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=sa.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=sa.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(Oa||(Oa={}));!function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Ja(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ra(this.verbose),this.persistedDataManager=new Ya,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(sa.lastMatch(t),Oa.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var r,a,i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new za(this.getScanRegionId(),(r=this.config,a=this.verbose,{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:a}))},e.prototype.pause=function(e){(aa(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(n,r){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(r){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)}):(e.html5Qrcode.clear(),t(),n()):n()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Jr.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Jr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Jr.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Jr.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Jr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Jr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Jr.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),Ja.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),a=this.getDashboardId();r.id=a,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new Qa).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(sa.cameraPermissionRequesting());var a=function(){n||r.createPermissionButton(e,t)};za.getCameras().then(function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(sa.noCameraFound(),Oa.STATUS_WARNING),a())}).catch(function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:a(),r.setHeaderMessage(e,Oa.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var n=this,r=ti.createElement("button",this.getCameraPermissionButtonId());r.innerText=sa.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;Ja.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?$a.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)}):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=Ja.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=Ja.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=oi.create(e,t,function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";Ja.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(sa.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,Oa.STATUS_WARNING),n.qrCodeErrorCallback(e,na.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var a=li.create(r,!1),i=si.create(r,e),o=document.createElement("span"),s=ti.createElement("button",ei.CAMERA_START_BUTTON_ID);s.innerText=sa.scanButtonStartScanningText(),o.appendChild(s);var l,c=ti.createElement("button",ei.CAMERA_STOP_BUTTON_ID);c.innerText=sa.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,o.appendChild(c);r.appendChild(o);var u=function(e){e||(s.style.display="none"),s.innerText=sa.scanButtonStartScanningText(),s.style.opacity="1",s.disabled=!1,e&&(s.style.display="inline-block")};if(s.addEventListener("click",function(e){s.innerText=sa.scanButtonScanningStarting(),i.disable(),s.disabled=!0,s.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r,d=i.getValue();n.persistedDataManager.setLastUsedCameraId(d),n.html5Qrcode.start(d,(r=n.config,{fps:r.fps,qrbox:r.qrbox,aspectRatio:r.aspectRatio,disableFlip:r.disableFlip,videoConstraints:r.videoConstraints}),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(e){c.disabled=!1,c.style.display="inline-block",u(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=ii.create(o,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){n.setHeaderMessage(e,Oa.STATUS_WARNING)}),l.show()):l&&l.hide()}(r),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){a.setOnCameraZoomValueChangeCallback(function(e){n.apply(e)});var r,i,o,s=1;t.config.defaultZoomValueIfSupported&&(s=t.config.defaultZoomValueIfSupported),r=s,i=n.min(),s=r>(o=n.max())?o:r<i?i:r,a.setValues(n.min(),n.max(),s,n.step()),a.show()}}(r)}).catch(function(e){n.showHideScanTypeSwapLink(!0),i.enable(),u(!0),n.setHeaderMessage(e,Oa.STATUS_WARNING)})}),i.hasSingleItem()&&s.click(),c.addEventListener("click",function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,n.html5Qrcode.stop().then(function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),i.enable(),s.disabled=!1,c.style.display="none",s.style.display="inline-block",l&&(l.reset(),l.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(e){c.disabled=!1,n.setHeaderMessage(e,Oa.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var d=n.persistedDataManager.getLastUsedCameraId();i.hasValue(d)?(i.setValue(d),s.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=sa.textIfCameraScanSelected(),n=sa.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var i=ti.createElement("span",this.getDashboardSectionSwapLinkId());i.style.textDecoration="underline",i.style.cursor="pointer",i.innerText=Ja.isCameraScanType(this.currentScanType)?t:n,i.addEventListener("click",function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Ja.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),i.innerText=n,e.currentScanType=Qr.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),i.innerText=t,e.currentScanType=Qr.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")}),a.appendChild(i),r.appendChild(a)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&$a.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=Oa.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case Oa.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Oa.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Oa.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Ha,this.cameraScanImage.alt=sa.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Va,this.fileScanImage.alt=sa.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return ei.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return ei.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}();const ci=function(t){let{messages:n=[],onSendMessage:r,recipientName:a="Destinat\xe1rio",recipientIcon:i="\ud83d\udcac",isOpen:o=!1,onClose:s}=t;const[l,c]=(0,e.useState)(""),u=(0,e.useRef)(null),d=(0,e.useRef)(null);(0,e.useEffect)(()=>{o&&u.current&&u.current.scrollIntoView({behavior:"smooth"})},[n,o]),(0,e.useEffect)(()=>{o&&d.current&&d.current.focus()},[o]);const h=()=>{const e=l.trim();e&&(null===r||void 0===r||r(e),c(""))};return o?(0,_t.jsxs)("div",{className:"chat-panel",children:[(0,_t.jsxs)("div",{className:"chat-header",children:[(0,_t.jsxs)("div",{className:"chat-recipient",children:[(0,_t.jsx)("span",{className:"chat-recipient-icon",children:i}),(0,_t.jsx)("span",{className:"chat-recipient-name",children:a})]}),(0,_t.jsx)("button",{className:"chat-close-btn",onClick:s,"aria-label":"Fechar chat",children:"\u2715"})]}),(0,_t.jsxs)("div",{className:"chat-messages",children:[0===n.length?(0,_t.jsxs)("div",{className:"chat-empty",children:[(0,_t.jsx)("span",{className:"chat-empty-icon",children:"\ud83d\udcac"}),(0,_t.jsx)("p",{children:"Nenhuma mensagem ainda"}),(0,_t.jsx)("p",{className:"chat-empty-hint",children:"Envie a primeira mensagem!"})]}):n.map(e=>{return(0,_t.jsxs)("div",{className:"chat-message ".concat(e.isOwn?"own":"received"),children:[!e.isOwn&&(0,_t.jsx)("span",{className:"chat-message-icon",children:e.senderIcon}),(0,_t.jsxs)("div",{className:"chat-message-content",children:[!e.isOwn&&(0,_t.jsx)("span",{className:"chat-message-sender",children:e.senderName}),(0,_t.jsx)("p",{className:"chat-message-text",children:e.text}),(0,_t.jsx)("span",{className:"chat-message-time",children:(t=e.timestamp,new Date(t).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}))})]})]},e.id);var t}),(0,_t.jsx)("div",{ref:u})]}),(0,_t.jsxs)("div",{className:"chat-input-container",children:[(0,_t.jsx)("input",{ref:d,type:"text",className:"chat-input",placeholder:"Digite sua mensagem...",value:l,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},maxLength:500}),(0,_t.jsx)(Br,{variant:"primary",size:"small",onClick:h,disabled:!l.trim(),children:"Enviar"})]})]}):null};const ui=function(){const t=ve(),[n,r]=(0,e.useState)(null);(0,e.useEffect)(()=>{const e=Xn();r((e=>Array.isArray(e)&&0!==e.length?1===e.length?e[0]:e.find(e=>e.isFavorite)||null:null)(e))},[]);const a=(null===n||void 0===n?void 0:n.name)||"Jogador",i=n?"\ud83d\udc40 Ver meu Personagem":"\u2795 Criar Primeiro Personagem";return(0,_t.jsxs)("div",{className:"page home-page",children:[(0,_t.jsx)(Fr,{title:"O V\xe9u Rubro"}),(0,_t.jsxs)("main",{className:"page-content",children:[(0,_t.jsxs)("section",{className:"hero-section",children:[(0,_t.jsx)("div",{className:"hero-icon",children:"\u2694\ufe0f"}),(0,_t.jsx)("h2",{children:"Bem-vindo ".concat(a)}),(0,_t.jsx)("p",{children:"Gerencie suas fichas de personagem e role dados durante suas aventuras em Arton!"})]}),(0,_t.jsxs)("section",{className:"quick-actions",children:[(0,_t.jsx)("h3",{children:"A\xe7\xf5es R\xe1pidas"}),(0,_t.jsx)("div",{className:"actions-grid",children:[{icon:"\ud83d\udccb",label:"Criar Ficha",path:"/characters/new"},{icon:"\ud83c\udfb2",label:"Rolar Dados",path:"/dice"},{icon:"\ud83d\udcda",label:"Minhas Fichas",path:"/characters"},{icon:"\ud83c\udff0",label:"Sess\xe3o Mestre",path:"/session/host"},{icon:"\ud83c\udfae",label:"Entrar Sess\xe3o",path:"/session/join"}].map(e=>(0,_t.jsxs)("button",{className:"action-card",onClick:()=>t(e.path),children:[(0,_t.jsx)("span",{className:"action-icon",children:e.icon}),(0,_t.jsx)("span",{className:"action-label",children:e.label})]},e.path))})]}),(0,_t.jsx)("section",{className:"info-section",children:(0,_t.jsxs)("div",{className:"info-card",children:[(0,_t.jsx)("h4",{children:"\ud83d\udca1 Dica"}),(0,_t.jsx)("p",{children:"Seus dados s\xe3o salvos localmente no dispositivo. Use a op\xe7\xe3o de exportar nas configura\xe7\xf5es para fazer backup."})]})}),(0,_t.jsx)("div",{className:"cta-section",children:(0,_t.jsx)(Br,{variant:"primary",size:"large",fullWidth:!0,onClick:()=>{t(n?"/characters/".concat(n.id):"/characters/new")},children:i})})]})]})},di=e=>[...e].sort((e,t)=>!!e.isFavorite===!!t.isFavorite?0:e.isFavorite?-1:1);const hi=function(){const t=ve(),n=me(),[r,a]=(0,e.useState)([]),[i,o]=(0,e.useState)(null);(0,e.useEffect)(()=>{const e=Xn(),{list:t,changed:n}=(e=>{if(!e.length)return{list:e,changed:!1};let t=!1;const n=e.map(e=>"boolean"===typeof e.isFavorite?e:(t=!0,c(c({},e),{},{isFavorite:!1})));if(1===n.length){const e=n[0];return e.isFavorite?{list:n,changed:t}:{list:[c(c({},e),{},{isFavorite:!0})],changed:!0}}let r=!1;return{list:n.map(e=>e.isFavorite?r?(t=!0,c(c({},e),{},{isFavorite:!1})):(r=!0,e):e),changed:t}})(e),r=di(t);n&&Yn(r),a(r)},[]),(0,e.useEffect)(()=>{var e;null!==(e=n.state)&&void 0!==e&&e.toast&&o(n.state.toast)},[n.state]);const s=r.length>1;return(0,_t.jsxs)("div",{className:"page character-list-page",children:[(0,_t.jsx)(Fr,{title:"Minhas Fichas",rightAction:(0,_t.jsx)("button",{className:"header-btn",onClick:()=>t("/characters/new"),children:"\u2795"})}),(0,_t.jsxs)("main",{className:"page-content",children:[0===r.length?(0,_t.jsxs)("div",{className:"empty-state",children:[(0,_t.jsx)("span",{className:"empty-icon",children:"\ud83d\udccb"}),(0,_t.jsx)("h3",{children:"Nenhum personagem"}),(0,_t.jsx)("p",{children:"Crie seu primeiro personagem para come\xe7ar sua aventura!"}),(0,_t.jsx)(Br,{variant:"primary",onClick:()=>t("/characters/new"),children:"\u2795 Criar Personagem"})]}):(0,_t.jsx)("div",{className:"characters-list",children:r.map(e=>(0,_t.jsx)(Ur,{character:e,onClick:()=>t("/characters/".concat(e.id)),showFavoriteToggle:s,onFavoriteToggle:()=>{return t=e.id,void a(e=>{const n=e.map(e=>e.id===t?e.isFavorite?e:c(c({},e),{},{isFavorite:!0}):e.isFavorite?c(c({},e),{},{isFavorite:!1}):e),r=di(n);return Yn(r),r});var t}},e.id))}),r.length>0&&(0,_t.jsx)("div",{className:"fab-container",children:(0,_t.jsx)(Br,{variant:"primary",className:"fab",onClick:()=>t("/characters/new"),children:"\u2795"})})]}),i&&(0,_t.jsx)(Dt,{message:i.message,type:i.type,onClose:()=>o(null)})]})},fi=["\u2694\ufe0f","\ud83d\udee1\ufe0f","\ud83c\udff9","\ud83d\udd2e","\ud83d\udcd6","\ud83d\udde1\ufe0f","\ud83e\ude93","\ud83c\udfad","\ud83d\udc51","\ud83d\udc09"],pi={[-1]:-1,0:0,1:1,2:2,3:4,4:7},mi={forca:"For\xe7a",destreza:"Destreza",constituicao:"Constitui\xe7\xe3o",inteligencia:"Intelig\xeancia",sabedoria:"Sabedoria",carisma:"Carisma"},gi=Object.keys(mi).reduce((e,t)=>(e[t]=0,e),{}),yi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>0?"+".concat(e):"".concat(e)},vi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e.map(e=>{if("string"===typeof e)return e;switch(e.type){case"attribute":const t=mi[e.key]||e.key;return"".concat(t.substring(0,3)," ").concat(e.value);case"skill":return"Treinado em ".concat(e.value.charAt(0).toUpperCase()+e.value.slice(1));case"level":return"".concat(e.value,"\xba n\xedvel");case"Poder":return"Poder ".concat(e.value);case"tag":return"Poder de ".concat(e.value);default:return e.label||""}}).join(", "):""},wi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(e).reduce((e,t)=>{var n;return e+(null!==(n=pi[t])&&void 0!==n?n:0)},0)},Ci=e=>Number.isFinite(Number(e))?Math.max(-1,Math.min(4,Number(e))):0,bi=e=>{const t=Number(e);return Number.isFinite(t)?Math.max(1,Math.min(20,Math.trunc(t))):1},Si=(e,t)=>{const n=Number(t||0),r=bi(e),a=(e=>{var t;const n=Qt(e);return(null===(t=ln.find(e=>e.level===n))||void 0===t?void 0:t.experience)||0})(r);return wn(n)>r||n<a?a:n},Ei=e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.skillTraining)&&void 0!==t&&t.mandatory?e.skillTraining.mandatory:[]};const Ai=function(t){let{mode:n="create"}=t;const r=ve(),{id:a}=we(),i="edit"===n,[o,s]=(0,e.useState)(null),[l,u]=(0,e.useState)(()=>({name:"",icon:"\u2694\ufe0f",race:"",characterClass:"",level:1,attributes:c({},gi),skills:[],habilidades:[],experience:0})),[d,h]=(0,e.useState)(null),[f,p]=(0,e.useState)(i),[m,g]=(0,e.useState)(0),[y,v]=(0,e.useState)(!1),[w,C]=(0,e.useState)({}),[b,S]=(0,e.useState)(!1);(0,e.useEffect)(()=>{var e,t,n;if(!i)return h(null),void p(!1);if(!a)return s({message:"Personagem n\xe3o encontrado.",type:"error"}),p(!1),void r("/characters");const o=Qn(a);if(!o)return s({message:"Personagem n\xe3o encontrado.",type:"error"}),p(!1),void setTimeout(()=>r("/characters"),800);h(o);const l="string"===typeof o.race?o.race:(null===(e=o.race)||void 0===e?void 0:e.id)||"",d="string"===typeof o.characterClass?o.characterClass:(null===(t=o.characterClass)||void 0===t?void 0:t.id)||"",f=Ft.find(e=>e.id===d)||null,m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(mi).reduce((t,n)=>{const r=Number(null===e||void 0===e?void 0:e[n]);return Number.isFinite(r)?t[n]=Ci(r):t[n]=0,t},c({},gi))}(o.attributes),y=Array.isArray(o.skills)?o.skills:[],w=Ei(f),b=[...new Set([...w||[],...y])],S=(null===f||void 0===f||null===(n=f.skillTraining)||void 0===n?void 0:n.choiceGroups)||[],E={},A=new Set;S.forEach((e,t)=>{const n=new Set;e.options.forEach(e=>{b.includes(e)&&!A.has(e)&&(n.add(e),A.add(e))}),n.size>0&&(E[t]=n)});let I=0,N=!0;for(let r=0;r<S.length;r++){const e=S[r];if((E[r]||new Set).size<e.choose){I=r,N=!1;break}}u({name:o.name||"",icon:o.icon||"\u2694\ufe0f",race:l,characterClass:d,level:bi(o.level||1),experience:Number(o.experience||0),attributes:m,skills:b,habilidades:o.habilidades||[]}),C(E),g(I),v(!i&&!N),p(!1)},[i,a,r]);const E=jt.find(e=>e.id===l.race)||null,A=Ft.find(e=>e.id===l.characterClass)||null,I=A?Cn(A.id):[],N=(0,e.useMemo)(()=>({characterClass:l.characterClass,level:bi(l.level),attributes:l.attributes,skills:l.skills,habilidades:l.habilidades||[],race:l.race}),[l.characterClass,l.level,l.attributes,l.skills,l.habilidades,l.race]);(0,e.useEffect)(()=>{const e=N.characterClass;if(!e)return;console.log("Character preview",N);const t=Cn(e),n=t.filter(e=>"Habilidade base"===e.type).filter(e=>Sn(N,e.prerequisites||[]));u(e=>{const r=e.habilidades||[],a=r.filter(e=>{const n=t.find(t=>t.id===e.id);return!n||"Habilidade base"!==n.type}),i=[...n.map(e=>({id:e.id,name:e.name})),...a];return i.length===r.length&&i.every((e,t)=>{var n;return(null===e||void 0===e?void 0:e.id)===(null===(n=r[t])||void 0===n?void 0:n.id)})?e:c(c({},e),{},{habilidades:i})})},[N]);const _=(0,e.useMemo)(()=>A?I.filter(e=>"Poder"===e.type&&Sn(N,e.prerequisites||[])):[],[I,N,A]),T=10-wi(l.attributes),x=i?"Editar Personagem":"Criar Personagem",D=i?"\ud83d\udcbe Salvar Altera\xe7\xf5es":"\u2713 Criar Personagem",M=i?"N\xedvel":"N\xedvel Inicial",R=e=>{var t,n;return(null!==(t=null===(n=l.attributes)||void 0===n?void 0:n[e])&&void 0!==t?t:0)>-1},O=e=>{u(t=>{const n=bi(t.level||1),r=bi(n+e);if(r===n)return t;const a=Si(r,t.experience);return Number(a)!==Number(t.experience||0)&&s({message:"XP ajustado para ".concat(a," (m\xednimo do n\xedvel ").concat(r,")."),type:"info"}),c(c({},t),{},{level:r,experience:a})})},k=e=>{var t,n,r,a;const i=null!==(t=null===(n=l.attributes)||void 0===n?void 0:n[e])&&void 0!==t?t:0;if(i>=4)return!1;const o=Ci(i+1);if(o===i)return!1;const s=null!==(r=pi[i])&&void 0!==r?r:0;return(null!==(a=pi[o])&&void 0!==a?a:0)-s<=T},P=(e,t)=>{console.log("handleChange",e,t),u(n=>{if("level"===e){const e=bi(t),r=Si(e,n.experience);return Number(r)!==Number(n.experience||0)&&s({message:"XP ajustado para ".concat(r," (m\xednimo do n\xedvel ").concat(e,")."),type:"info"}),c(c({},n),{},{level:e,experience:r})}if("characterClass"===e){g(0),v(!0),C({});const r=Ft.find(e=>e.id===t),a=Ei(r);return c(c({},n),{},{[e]:t,skills:a,habilidades:[]})}return c(c({},n),{},{[e]:t})})},L=(e,t)=>{u(n=>{var r;const a=null!==(r=n.attributes[e])&&void 0!==r?r:0,i=Ci(a+t);if(i===a)return n;const o=c(c({},n.attributes),{},{[e]:i});return wi(o)>10?(s({message:"Pontos insuficientes para este ajuste.",type:"error"}),n):c(c({},n),{},{attributes:o})})};return(0,_t.jsxs)("div",{className:"page character-create-page",children:[(0,_t.jsx)(Fr,{title:x,showBack:!0,rightAction:i?(0,_t.jsx)("button",{className:"header-btn delete-btn",onClick:()=>{S(!0)},title:"Excluir Personagem",children:"\ud83d\uddd1\ufe0f"}):null}),(0,_t.jsx)("main",{className:"page-content",children:i&&f?(0,_t.jsx)("p",{children:"Carregando personagem..."}):(0,_t.jsxs)("form",{onSubmit:e=>{var t,n,a,o,u,h,f;if(e.preventDefault(),!l.name.trim())return void s({message:"Digite um nome para o personagem",type:"error"});const p=("string"===typeof l.race?l.race:null===(t=l.race)||void 0===t?void 0:t.id)||null,m=("string"===typeof l.characterClass?l.characterClass:null===(n=l.characterClass)||void 0===n?void 0:n.id)||null;if(!p)return void s({message:"Selecione uma ra\xe7a para continuar.",type:"error"});if(!m)return void s({message:"Selecione uma classe para continuar.",type:"error"});const g=Ei(A),v=l.skills||[],w=g.filter(e=>!v.includes(e));if(w.length>0)return console.log("Missing mandatory skills:",w),console.log("Current skills:",v),void s({message:"Todas as per\xedcias obrigat\xf3rias devem estar selecionadas.",type:"error"});if(!i&&y)return void s({message:"Conclua a sele\xe7\xe3o de per\xedcias antes de salvar.",type:"error"});const C={name:l.name.trim(),icon:l.icon,race:p,characterClass:m,level:bi(l.level),attributes:c({},l.attributes),skills:[...l.skills||[]],habilidades:[...l.habilidades||[]],experience:Number(l.experience||0)},b=Si(C.level,C.experience);Number(b)!==Number(C.experience)&&(C.experience=b,s({message:"XP ajustado para ".concat(b," (m\xednimo do n\xedvel ").concat(C.level,")."),type:"info"}));const S=i&&null!==(a=null===d||void 0===d||null===(o=d.hp)||void 0===o?void 0:o.max)&&void 0!==a?a:10,E=i&&null!==(u=null===d||void 0===d||null===(h=d.mp)||void 0===h?void 0:h.max)&&void 0!==u?u:0,I=hn(C)||S,N=null!==(f=fn(C))&&void 0!==f?f:E;if(i){var _,T,x,D,M,R;if(!d)return void s({message:"N\xe3o foi poss\xedvel carregar o personagem para edi\xe7\xe3o.",type:"error"});const e=c(c(c({},d),C),{},{hp:c(c({},d.hp),{},{max:I,current:Math.min(null!==(_=null===(T=d.hp)||void 0===T?void 0:T.current)&&void 0!==_?_:I,I),temp:null!==(x=null===(D=d.hp)||void 0===D?void 0:D.temp)&&void 0!==x?x:0}),mp:c(c({},d.mp),{},{max:N,current:Math.min(null!==(M=null===(R=d.mp)||void 0===R?void 0:R.current)&&void 0!==M?M:N,N)})});return qn(e),s({message:"Personagem atualizado com sucesso!",type:"success"}),void setTimeout(()=>{r("/characters/".concat(e.id),{state:{toast:{message:"Personagem atualizado com sucesso!",type:"success"}}})},800)}const O=function(){return new cn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}(c(c({},C),{},{hp:{current:I,max:I,temp:0},mp:{current:N,max:N}}));qn(O),s({message:"Personagem criado com sucesso!",type:"success"}),setTimeout(()=>{r("/characters/".concat(O.id),{state:{toast:{message:"Personagem criado com sucesso!",type:"success"}}})},1e3)},children:[(0,_t.jsxs)("section",{className:"form-section",children:[(0,_t.jsx)("label",{className:"form-label",children:"\xcdcone"}),(0,_t.jsx)("div",{className:"icon-picker",children:fi.map(e=>(0,_t.jsx)("button",{type:"button",className:"icon-option ".concat(l.icon===e?"selected":""),onClick:()=>P("icon",e),children:e},e))})]}),(0,_t.jsxs)("section",{className:"form-section",children:[(0,_t.jsx)("label",{className:"form-label",children:"Nome do Personagem"}),(0,_t.jsx)("input",{type:"text",className:"form-input",placeholder:"Digite o nome...",value:l.name,onChange:e=>P("name",e.target.value)})]}),(0,_t.jsxs)("section",{className:"form-section",children:[(0,_t.jsx)("label",{className:"form-label",children:"Ra\xe7a"}),(0,_t.jsxs)("select",{className:"form-select",value:l.race,onChange:e=>P("race",e.target.value),required:!0,children:[(0,_t.jsx)("option",{value:"",children:"Selecione uma ra\xe7a..."}),jt.map(e=>(0,_t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,_t.jsxs)("section",{className:"form-section",children:[(0,_t.jsx)("label",{className:"form-label",children:"Classe"}),(0,_t.jsxs)("select",{className:"form-select",value:l.characterClass,onChange:e=>P("characterClass",e.target.value),required:!0,children:[(0,_t.jsx)("option",{value:"",children:"Selecione uma classe..."}),Ft.map(e=>(0,_t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,_t.jsxs)("section",{className:"form-section",children:[(0,_t.jsx)("label",{className:"form-label",children:M}),(0,_t.jsxs)("div",{className:"level-input-controls",children:[(0,_t.jsx)("input",{type:"number",className:"form-input level-input",min:"1",max:"20",value:l.level,onChange:e=>P("level",e.target.value)}),(0,_t.jsxs)("div",{className:"level-buttons",children:[(0,_t.jsx)("button",{type:"button",className:"attr-btn small",onClick:()=>O(-1),disabled:(B=l.level,!(bi(B)>1)),title:"Diminuir n\xedvel",children:"\u2212"}),(0,_t.jsx)("button",{type:"button",className:"attr-btn small",onClick:()=>O(1),disabled:!(e=>bi(e)<20)(l.level),title:"Aumentar n\xedvel",children:"+"})]})]})]}),(0,_t.jsxs)("section",{className:"form-section",children:[(0,_t.jsxs)("label",{className:"form-label points-label",children:["Distribua seus pontos",(0,_t.jsxs)("span",{className:"points-remaining",children:["Restantes: ",T]})]}),(0,_t.jsx)("div",{className:"attributes-grid",children:Object.entries(l.attributes).map(e=>{let[t,n]=e;const r=null!==n&&void 0!==n?n:0,a=((e,t)=>{var n,r;return e?("number"===typeof(null===(n=e.bonus)||void 0===n?void 0:n[t])?e.bonus[t]:0)+("number"===typeof(null===(r=e.penalty)||void 0===r?void 0:r[t])?e.penalty[t]:0):0})(E,t),i=((e,t)=>{if(!e||"object"!==typeof e)return 0;const n=e.attributeAdjustments;if(!n||"object"!==typeof n)return 0;const r=n[t];return"number"===typeof r?r:0})(A,t),o=r+a+i,s=0!==a||0!==i;return(0,_t.jsxs)("div",{className:"attribute-input",children:[(0,_t.jsx)("label",{children:mi[t]}),(0,_t.jsxs)("div",{className:"attribute-controls",children:[(0,_t.jsx)("button",{type:"button",className:"attr-btn",onClick:()=>L(t,-1),disabled:!R(t),children:"\u2212"}),(0,_t.jsxs)("div",{className:"attribute-value-stack",children:[(0,_t.jsx)("span",{className:"attribute-value-display",children:yi(o)}),s&&(0,_t.jsxs)("span",{className:"attribute-bonus-breakdown",children:[a?"".concat(yi(a)," Ra\xe7a"):"",a&&i?" \u2022 ":"",i?"".concat(yi(i)," Classe"):"","                          "]})]}),(0,_t.jsx)("button",{type:"button",className:"attr-btn",onClick:()=>L(t,1),disabled:!k(t),children:"+"})]})]},t)})})]}),A&&(0,_t.jsxs)("section",{className:"form-section",children:[(0,_t.jsxs)("div",{className:"section-header",children:[(0,_t.jsx)("label",{className:"form-label",children:"Per\xedcias Treinadas"}),!y&&(0,_t.jsx)("button",{type:"button",className:"edit-btn",onClick:()=>{const e=Ei(A);u(t=>c(c({},t),{},{skills:e})),C({}),g(0),v(!0)},children:"Escolher novamente"})]}),(0,_t.jsxs)("div",{className:"skills-section",children:[(0,_t.jsx)("div",{className:"selected-skills-list",children:l.skills.map(e=>{const t=zt.find(t=>t.id===e),n=Ei(A).includes(e);return t?(0,_t.jsxs)("div",{className:"skill-tag ".concat(n?"mandatory":"choice"),children:[(0,_t.jsx)("span",{className:"skill-name",children:t.name}),(0,_t.jsxs)("span",{className:"skill-attr",children:["(",t.attr,")"]}),n&&(0,_t.jsx)("span",{className:"skill-badge",children:"Classe"})]},e):null})}),y&&A.skillTraining.choiceGroups[m]&&(0,_t.jsxs)("div",{className:"skill-selection-area",children:[(0,_t.jsxs)("div",{className:"selection-header",children:[(0,_t.jsxs)("h4",{children:["Escolha ",A.skillTraining.choiceGroups[m].choose," per\xedcias"]}),(0,_t.jsxs)("span",{className:"selection-count",children:[(w[m]||new Set).size," / ",A.skillTraining.choiceGroups[m].choose]})]}),(0,_t.jsx)("div",{className:"skills-grid",children:A.skillTraining.choiceGroups[m].options.filter(e=>{const t=(w[m]||new Set).has(e);return!l.skills.includes(e)||t}).map(e=>{const t=zt.find(t=>t.id===e),n=(w[m]||new Set).has(e);return t?(0,_t.jsxs)("button",{type:"button",className:"skill-option-btn ".concat(n?"selected":""),onClick:()=>(e=>{var t,n;console.log("Toggling skill:",e);const r=m;if(null===A||void 0===A||null===(t=A.skillTraining)||void 0===t||null===(n=t.choiceGroups)||void 0===n||!n[r])return;const a=A.skillTraining.choiceGroups[r];C(t=>{const n=t[r]||new Set;let i;if(n.has(e))i=new Set(n),i.delete(e);else{if(n.size>=a.choose)return t;i=new Set(n),i.add(e)}const o=c(c({},t),{},{[r]:i}),s=Ei(A),l=Object.values(o).flatMap(e=>Array.from(e||[])),d=[...new Set([...s,...l])];return u(e=>c(c({},e),{},{skills:d})),o})})(e),children:[(0,_t.jsx)("span",{className:"skill-name",children:t.name}),(0,_t.jsx)("span",{className:"skill-attr",children:t.attr})]},e):null})}),(0,_t.jsx)("div",{className:"selection-actions",children:(0,_t.jsx)(Br,{type:"button",variant:"secondary",onClick:()=>{const e=A.skillTraining.choiceGroups[m];if((w[m]||new Set).size!==e.choose)return void s({message:"Selecione exatamente ".concat(e.choose," per\xedcia(s) para continuar."),type:"error"});const t=m+1;t<A.skillTraining.choiceGroups.length?g(t):v(!1)},disabled:(w[m]||new Set).size!==A.skillTraining.choiceGroups[m].choose,children:m<A.skillTraining.choiceGroups.length-1?"Pr\xf3ximo":"Concluir"})})]})]})]}),A&&I.length>0&&(0,_t.jsxs)("section",{className:"form-section",children:[(0,_t.jsx)("label",{className:"form-label",children:"Poderes de Classe"}),(0,_t.jsx)("div",{className:"talents-section",children:(0,_t.jsx)("div",{className:"talents-list",children:_.map(e=>{const t=(l.habilidades||[]).some(t=>t.id===e.id);return(0,_t.jsxs)("button",{type:"button",className:"talent-item ".concat(t?"selected":""),onClick:()=>{return t=e.id,void u(e=>{const n=e.habilidades||[];let r;if(n.some(e=>e.id===t))r=n.filter(e=>e.id!==t);else{const a=Cn(e.characterClass).find(e=>e.id===t);if(!a)return e;r=[...n,{id:t,name:a.name}]}return c(c({},e),{},{habilidades:r})});var t},title:e.description,children:[(0,_t.jsxs)("div",{className:"talent-header",children:[(0,_t.jsx)("span",{className:"talent-name",children:e.name}),e.prerequisites.length>0&&(0,_t.jsxs)("span",{className:"talent-prereq",children:["Pr\xe9: ",vi(e.prerequisites)]})]}),(0,_t.jsx)("div",{className:"talent-desc",children:e.description})]},e.id)})})})]}),(0,_t.jsx)("div",{className:"form-actions",children:(0,_t.jsx)(Br,{type:"submit",variant:"primary",size:"large",fullWidth:!0,children:D})})]})}),(0,_t.jsxs)(Vr,{isOpen:b,onClose:()=>S(!1),title:"Confirmar Exclus\xe3o",children:[(0,_t.jsxs)("p",{children:['Tem certeza de que deseja excluir o personagem "',null===d||void 0===d?void 0:d.name,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita.']}),(0,_t.jsxs)("div",{className:"modal-actions",children:[(0,_t.jsx)(Br,{variant:"secondary",onClick:()=>S(!1),children:"Cancelar"}),(0,_t.jsx)(Br,{variant:"danger",onClick:()=>{d&&((e=>{const t=Xn().filter(t=>t.id!==e);Yn(t)})(d.id),S(!1),s({message:"Personagem exclu\xeddo com sucesso!",type:"success"}),setTimeout(()=>r("/characters"),800))},children:"Excluir"})]})]}),o&&(0,_t.jsx)(Dt,{message:o.message,type:o.type,onClose:()=>s(null)})]});var B},Ii=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>0?"+".concat(e):"".concat(e)},Ni=(e,t)=>{var n,r;if(!e)return 0;return("number"===typeof(null===(n=e.bonus)||void 0===n?void 0:n[t])?e.bonus[t]:0)+("number"===typeof(null===(r=e.penalty)||void 0===r?void 0:r[t])?e.penalty[t]:0)},_i={forca:"FOR",destreza:"DES",constituicao:"CON",inteligencia:"INT",sabedoria:"SAB",carisma:"CAR"};const Ti=function(){var t,n,r,a,i;const{id:o}=we(),s=ve(),l=me(),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)("stats"),[p,m]=(0,e.useState)(null),[g,y]=(0,e.useState)(!1),[v,w]=(0,e.useState)(!1),[C,b]=(0,e.useState)(!1),[S,E]=(0,e.useState)(null),[A,I]=(0,e.useState)("0"),N=(0,e.useRef)(null),{status:_,isPlayer:T,sendCharacterUpdate:x}=xr(),D=T&&_===Ir;(0,e.useEffect)(()=>{var e;null!==(e=l.state)&&void 0!==e&&e.toast&&m(l.state.toast)},[l.state]),(0,e.useEffect)(()=>{g&&I("0")},[g]),(0,e.useEffect)(()=>{const e=Qn(o);e?(d(e),console.log("CharacterDetail data",e)):s("/characters")},[o,s]);const M=e=>{var t,n;if(!u)return;const r=hn(u),a=null!==(t=null===(n=u.hp)||void 0===n?void 0:n.current)&&void 0!==t?t:0,i=Math.max(0,Math.min(r,a+e)),o=c(c({},u),{},{hp:c(c({},u.hp),{},{current:i,max:r})});var s,l;(d(o),qn(o),D&&x)&&(x({characterId:u.id,characterName:u.name,characterIcon:u.icon,currentHp:i,maxHp:r,currentMp:null!==(s=null===(l=u.mp)||void 0===l?void 0:l.current)&&void 0!==s?s:fn(u),maxMp:fn(u)}),console.log("[CharacterDetail] Atualiza\xe7\xe3o de HP enviada ao mestre"))},R=e=>{var t,n;if(!u)return;const r=fn(u),a=null!==(t=null===(n=u.mp)||void 0===n?void 0:n.current)&&void 0!==t?t:0,i=Math.max(0,Math.min(r,a+e)),o=c(c({},u),{},{mp:c(c({},u.mp),{},{current:i,max:r})});var s,l;(d(o),qn(o),D&&x)&&(x({characterId:u.id,characterName:u.name,characterIcon:u.icon,currentHp:null!==(s=null===(l=u.hp)||void 0===l?void 0:l.current)&&void 0!==s?s:hn(u),maxHp:hn(u),currentMp:i,maxMp:r}),console.log("[CharacterDetail] Atualiza\xe7\xe3o de MP enviada ao mestre"))},O=e=>{I(t=>{const n=Number(t)||0;let r=Math.floor(n+e);return r<1&&(r=1),String(r)})},k=e=>{I(t=>{const n=Number(t)||0;let r=Math.floor(n+e);return r<1&&(r=1),String(r)})};if(!u)return(0,_t.jsx)("div",{className:"page",children:"Carregando..."});const P=mn(u),L=pn(u),B=hn(u),j=fn(u),F=Math.max(0,Math.min(null!==(t=null===(n=u.hp)||void 0===n?void 0:n.current)&&void 0!==t?t:0,B)),z=Math.max(0,Math.min(null!==(r=null===(a=u.mp)||void 0===a?void 0:a.current)&&void 0!==r?r:0,j)),U=B>0?F/B*100:0,H=j>0?z/j*100:0,V="".concat(yn(u)).concat(vn(u)?" / ".concat(vn(u)):""),W=yn(u),G=vn(u)||0,Y=G>0?Math.min(100,Math.round(W/G*100)):100;return(0,_t.jsxs)("div",{className:"page character-detail-page",children:[(0,_t.jsx)(Fr,{title:u.name,showBack:!0,rightAction:(0,_t.jsx)("button",{className:"header-btn",onClick:()=>s("/characters/".concat(o,"/edit")),children:"\u270f\ufe0f"})}),(0,_t.jsxs)("main",{className:"page-content",children:[(0,_t.jsxs)("section",{className:"character-header",children:[(0,_t.jsx)("div",{className:"character-avatar",children:u.icon}),(0,_t.jsxs)("div",{className:"character-meta",children:[(0,_t.jsx)("h2",{children:u.name}),(0,_t.jsxs)("p",{children:[(null===L||void 0===L?void 0:L.name)||"Ra\xe7a"," \u2022 ",(null===P||void 0===P?void 0:P.name)||"Classe"," \u2022 N\xedvel ",u.level," (",V," XP)"]}),(0,_t.jsx)("div",{className:"xp-bar",children:(0,_t.jsx)("div",{className:"xp-bar-track",children:(0,_t.jsx)("div",{className:"xp-bar-fill",style:{width:"".concat(Y,"%")}})})})]})]}),(0,_t.jsxs)("section",{className:"vitals-section",children:[(0,_t.jsxs)("div",{className:"vital-card hp-card",children:[(0,_t.jsxs)("div",{className:"vital-header",children:[(0,_t.jsx)("span",{className:"vital-label",children:"\u2764\ufe0f PV"}),(0,_t.jsxs)("span",{className:"vital-value",children:[F,"/",B]})]}),(0,_t.jsx)("div",{className:"vital-bar",children:(0,_t.jsx)("div",{className:"vital-fill hp-fill",style:{width:"".concat(U,"%")}})}),(0,_t.jsxs)("div",{className:"vital-controls",children:[(0,_t.jsx)("button",{onClick:()=>M(-1),children:"\u2212"}),(0,_t.jsx)("button",{onClick:()=>M(1),children:"+"})]})]}),(0,_t.jsxs)("div",{className:"vital-card mp-card",children:[(0,_t.jsxs)("div",{className:"vital-header",children:[(0,_t.jsx)("span",{className:"vital-label",children:"\ud83d\udca7 PM"}),(0,_t.jsxs)("span",{className:"vital-value",children:[z,"/",j]})]}),(0,_t.jsx)("div",{className:"vital-bar",children:(0,_t.jsx)("div",{className:"vital-fill mp-fill",style:{width:"".concat(H,"%")}})}),(0,_t.jsxs)("div",{className:"vital-controls",children:[(0,_t.jsx)("button",{onClick:()=>R(-1),children:"\u2212"}),(0,_t.jsx)("button",{onClick:()=>R(1),children:"+"})]})]})]}),(0,_t.jsx)("section",{className:"attributes-section",children:(0,_t.jsx)("div",{className:"attributes-row",children:Object.keys(_i).map(e=>{var t,n;const r=(null!==(t=null===(n=u.attributes)||void 0===n?void 0:n[e])&&void 0!==t?t:0)+Ni(L,e);return(0,_t.jsxs)("div",{className:"attribute-box",children:[(0,_t.jsx)("span",{className:"attr-label",children:_i[e]}),(0,_t.jsx)("span",{className:"attr-value",children:Ii(r)})]},e)})})}),(0,_t.jsxs)("section",{className:"combat-stats",children:[(0,_t.jsxs)("div",{className:"stat-box",children:[(0,_t.jsx)("span",{className:"stat-label",children:"Defesa"}),(0,_t.jsx)("span",{className:"stat-value",children:u.defense})]}),(0,_t.jsxs)("div",{className:"stat-box",children:[(0,_t.jsx)("span",{className:"stat-label",children:"Movimento"}),(0,_t.jsxs)("span",{className:"stat-value",children:[u.movement,"m"]})]}),(0,_t.jsxs)("div",{className:"stat-box",children:[(0,_t.jsx)("span",{className:"stat-label",children:"T$"}),(0,_t.jsx)(Wr,{value:u.money,label:"",className:"stat-value",onSave:e=>{const t=c(c({},u),{},{money:e});d(t),qn(t)}})]})]}),(0,_t.jsx)("div",{className:"tabs-nav",children:[{id:"stats",label:"A\xe7\xf5es",icon:"\ud83d\udcca"},{id:"skills",label:"Per\xedcias",icon:"\ud83c\udfaf"},{id:"abilities",label:"Habilidades",icon:"\u2728"},{id:"inventory",label:"Invent\xe1rio",icon:"\ud83c\udf92"},{id:"notes",label:"Notas",icon:"\ud83d\udcdd"}].map(e=>(0,_t.jsxs)("button",{className:"tab-btn ".concat(h===e.id?"active":""),onClick:()=>f(e.id),children:[(0,_t.jsx)("span",{children:e.icon}),(0,_t.jsx)("span",{children:e.label})]},e.id))}),(0,_t.jsxs)("div",{className:"tab-content",children:["stats"===h&&(0,_t.jsx)("div",{className:"stats-tab",children:(0,_t.jsxs)("div",{className:"xp-row",children:[(0,_t.jsxs)("div",{className:"xp-value",children:["XP: ",V]}),(0,_t.jsx)("div",{className:"xp-actions",children:(0,_t.jsx)(Br,{variant:"secondary",onClick:()=>y(!0),children:"XP \u2795"})})]})}),"skills"===h&&(0,_t.jsx)("div",{className:"skills-tab",children:(0,_t.jsx)("div",{className:"skills-list",children:zt.map(e=>{var t,n,r;const a=(null!==(t=null===(n=u.attributes)||void 0===n?void 0:n[e.attr])&&void 0!==t?t:0)+Ni(L,e.attr),i=null===(r=u.skills)||void 0===r?void 0:r.includes(e.id),o=Math.floor(u.level/2)+a+(i?u.level>=15?6:u.level>=7?4:2:0);return(0,_t.jsxs)("button",{type:"button",className:"skill-item ".concat(i?"trained":""),onClick:()=>s("/dice",{state:{characterId:u.id,skillId:e.id}}),children:[(0,_t.jsx)("span",{className:"skill-name",children:e.name}),(0,_t.jsxs)("span",{className:"skill-attr",children:["(",_i[e.attr],")"]}),(0,_t.jsxs)("span",{className:"skill-bonus",children:[o>=0?"+":"",o]})]},e.id)})})}),"abilities"===h&&(0,_t.jsx)("div",{className:"abilities-tab",children:u.habilidades&&u.habilidades.length>0?(0,_t.jsx)("div",{className:"abilities-list",children:u.habilidades.map(e=>{const t=bn(u.characterClass,e.id),n=e.name||(null===t||void 0===t?void 0:t.name)||e.id;return(0,_t.jsxs)("div",{className:"ability-item",children:[(0,_t.jsx)("div",{className:"ability-left",children:(0,_t.jsx)("div",{className:"ability-name",children:n})}),(0,_t.jsx)("div",{className:"ability-actions",children:(0,_t.jsx)(Br,{variant:"secondary",size:"small",onClick:()=>{E(t||e),b(!0)},children:"Ver"})})]},e.id)})}):(0,_t.jsx)("p",{className:"tab-info",children:"Nenhuma habilidade adquirida."})}),"inventory"===h&&(0,_t.jsxs)("div",{className:"inventory-tab",children:[(0,_t.jsx)(Br,{variant:"secondary",fullWidth:!0,onClick:()=>s("/characters/".concat(o,"/inventory")),children:"\ud83c\udf92 Gerenciar Invent\xe1rio"}),(null===(i=u.inventory)||void 0===i?void 0:i.length)>0?(0,_t.jsxs)("ul",{className:"inventory-preview",children:[u.inventory.slice(0,5).map(e=>(0,_t.jsxs)("li",{children:[e.name," x",e.quantity]},e.id)),u.inventory.length>5&&(0,_t.jsxs)("li",{className:"more",children:["+",u.inventory.length-5," itens..."]})]}):(0,_t.jsx)("p",{className:"tab-info",children:"Invent\xe1rio vazio"})]}),"notes"===h&&(0,_t.jsx)("div",{className:"notes-tab",children:(0,_t.jsx)("textarea",{className:"notes-input",placeholder:"Anota\xe7\xf5es do personagem...",value:u.notes||"",onChange:e=>{const t=c(c({},u),{},{notes:e.target.value});d(t),qn(t)}})})]}),(0,_t.jsx)("section",{className:"quick-actions-bar",children:(0,_t.jsx)(Br,{variant:"primary",onClick:()=>s("/dice"),children:"\ud83c\udfb2 Rolar Dados"})})]}),p&&(0,_t.jsx)(Dt,{message:p.message,type:p.type,onClose:()=>m(null)}),(0,_t.jsx)(Yr,{isOpen:v,onClose:()=>w(!1),character:u,onSaveAbilities:e=>{if(!u||!e||0===e.length)return;const t=[...u.habilidades||[]];e.forEach(e=>{t.some(t=>t.id===e.id)||t.push({id:e.id,name:e.name})});const n=c(c({},u),{},{habilidades:t});d(n),qn(n)}}),(0,_t.jsx)(Vr,{isOpen:C,onClose:()=>b(!1),title:(null===S||void 0===S?void 0:S.name)||"Habilidade",children:(0,_t.jsxs)("div",{className:"ability-detail",children:[(0,_t.jsxs)("div",{className:"ability-header",children:[(0,_t.jsxs)("div",{className:"ability-type",children:[(null===S||void 0===S?void 0:S.type)||"",null!==S&&void 0!==S&&S.level?" \u2022 ".concat(S.level,"\xba n\xedvel"):""]}),(null===S||void 0===S?void 0:S.tags)&&(0,_t.jsx)("div",{className:"ability-tags",children:S.tags.join(", ")})]}),(0,_t.jsx)("p",{className:"ability-description",children:(null===S||void 0===S?void 0:S.description)||"Sem descri\xe7\xe3o dispon\xedvel."}),(0,_t.jsx)("div",{className:"modal-actions",children:(0,_t.jsx)(Br,{variant:"secondary",onClick:()=>b(!1),children:"Fechar"})})]})}),(0,_t.jsx)(Vr,{isOpen:g,onClose:()=>y(!1),title:"Adicionar XP",children:(0,_t.jsxs)("div",{className:"xp-modal",children:[(0,_t.jsxs)("section",{className:"form-section xp-input-section",children:[(0,_t.jsxs)("div",{className:"xp-input-controls",children:[(0,_t.jsx)("button",{type:"button",className:"xp-btn",onClick:()=>O(-1),"aria-label":"Diminuir XP",children:"\u2212"}),(0,_t.jsx)("input",{id:"xp-amount",type:"number",min:"1",className:"form-input xp-input",value:A,onChange:e=>I(e.target.value),ref:N,"aria-label":"Quantidade de XP"}),(0,_t.jsx)("button",{type:"button",className:"xp-btn",onClick:()=>O(1),"aria-label":"Aumentar XP",children:"+"})]}),(0,_t.jsxs)("div",{className:"xp-quick-actions",children:[(0,_t.jsx)(Br,{variant:"secondary",size:"small",onClick:()=>k(1),"aria-label":"Adicionar 1 XP",children:"+1"}),(0,_t.jsx)(Br,{variant:"secondary",size:"small",onClick:()=>k(10),"aria-label":"Adicionar 10 XP",children:"+10"}),(0,_t.jsx)(Br,{variant:"secondary",size:"small",onClick:()=>k(100),"aria-label":"Adicionar 100 XP",children:"+100"}),(0,_t.jsx)(Br,{variant:"secondary",size:"small",onClick:()=>k(1e3),"aria-label":"Adicionar 1000 XP",children:"+1000"})]})]}),(0,_t.jsxs)("div",{className:"modal-actions",children:[(0,_t.jsx)(Br,{variant:"secondary",onClick:()=>y(!1),children:"Cancelar"}),(0,_t.jsx)(Br,{variant:"primary",onClick:()=>(e=>{if(!u)return;const t=Number(e);if(!Number.isFinite(t)||t<=0)return void m({message:"Informe uma quantidade v\xe1lida de XP",type:"error"});const n=Math.max(0,Math.floor(t)),r=Number(u.experience||0),a=Math.max(0,r+n),i=wn(a),o=i>u.level;let s=c(c({},u),{},{experience:a,level:i});if(o){const e=hn(u),t=fn(u),n=hn(s),r=fn(s),a=n-e,i=r-t;var l,h;(a>0||i>0)&&(s=c(c({},s),{},{hp:c(c({},s.hp),{},{current:((null===(l=s.hp)||void 0===l?void 0:l.current)||0)+a,max:n}),mp:c(c({},s.mp),{},{current:((null===(h=s.mp)||void 0===h?void 0:h.current)||0)+i,max:r})}))}d(s),qn(s),o&&w(!0),m({message:"Ganhou ".concat(n," XP"),type:"success"}),y(!1)})(A),children:"Adicionar"})]})]})})]})},xi=(e,t)=>{if(!e)return 0;const n=gn(e,t.attr),r=Math.max(1,e.level),a=Math.floor(r/2),i=e.skills.includes(t.id)?(e=>e>=15?6:e>=7?4:2)(r):0;return a+n+i};const Di=function(){var t;const n=me(),[r,a]=(0,e.useState)("d20"),[i,o]=(0,e.useState)(1),[s,l]=(0,e.useState)(0),[u,d]=(0,e.useState)("normal"),[h,f]=(0,e.useState)(""),[p,m]=(0,e.useState)(null),[g,y]=(0,e.useState)(()=>Jn()),[v,w]=(0,e.useState)(null),[C,b]=(0,e.useState)(!1),[S,E]=(0,e.useState)("free"),[A,I]=(0,e.useState)([]),[N,_]=(0,e.useState)(null),[T,x]=(0,e.useState)(!0),[D,M]=(0,e.useState)(null),{status:R,isPlayer:O,sendDiceRoll:k}=xr(),P=O&&R===Ir;(0,e.useEffect)(()=>{var e;const t=Xn();if(I(t),null!==(e=n.state)&&void 0!==e&&e.characterId){const e=t.find(e=>e.id===n.state.characterId);if(e)return _(e),void E("character")}const r=t.find(e=>e.isFavorite);r?_(r):t.length>0&&_(t[0])},[n.state]);const L=e=>{switch(e){case"advantage":return"\u2b06\ufe0f Vantagem";case"disadvantage":return"\u2b07\ufe0f Desvantagem";default:return"Normal"}},B=(0,e.useCallback)(e=>{if(!N)return;const t=xi(N,e);a("d20"),o(1),l(t),d("normal"),f("Per\xedcia: ".concat(e.name)),M({type:"skill",skill:e,bonus:t}),x(!1),w({message:"Configurado: ".concat(e.name," (").concat(t>=0?"+":"").concat(t,")"),type:"info"})},[N]);return(0,e.useEffect)(()=>{var e;const t=null===(e=n.state)||void 0===e?void 0:e.skillId;if(!t||!N)return;const r=zt.find(e=>e.id===t);r&&(E("character"),B(r))},[N,null===(t=n.state)||void 0===t?void 0:t.skillId,B]),(0,_t.jsxs)("div",{className:"page dice-roller-page",children:[(0,_t.jsx)(Fr,{title:"Rolar Dados"}),(0,_t.jsxs)("main",{className:"page-content",children:[A.length>0&&(0,_t.jsxs)("div",{className:"roll-mode-toggle",children:[(0,_t.jsx)("button",{className:"free"===S?"active":"",onClick:()=>{E("free"),f(""),x(!0),M(null)},children:"Livre"}),(0,_t.jsx)("button",{className:"character"===S?"active":"",onClick:()=>{E("character"),x(!0),M(null)},children:"Personagem"})]}),(0,_t.jsx)("section",{className:"roll-result-section",children:(0,_t.jsx)("div",{className:"roll-display ".concat(C?"rolling":""," ").concat(null!==p&&void 0!==p&&p.isCriticalSuccess?"critical-success":""," ").concat(null!==p&&void 0!==p&&p.isCriticalFailure?"critical-failure":""),children:C?(0,_t.jsx)("span",{className:"rolling-animation",children:"\ud83c\udfb2"}):p?(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("span",{className:"roll-total",children:p.total}),(0,_t.jsxs)("span",{className:"roll-details",children:[p.rolls.join(" + "),0!==s?" ".concat(s>=0?"+":"").concat(s):""]}),p.description&&(0,_t.jsx)("span",{className:"roll-description",children:p.description}),p.isCriticalSuccess&&(0,_t.jsx)("span",{className:"roll-critical",children:"\ud83c\udf89 CR\xcdTICO!"}),p.isCriticalFailure&&(0,_t.jsx)("span",{className:"roll-critical",children:"\ud83d\udc80 FALHA CR\xcdTICA!"})]}):(0,_t.jsx)("span",{className:"roll-placeholder",children:"character"===S?"Selecione um atributo ou per\xedcia":"Selecione e role!"})})}),"character"===S&&A.length>0&&(0,_t.jsx)("div",{className:"character-selector",children:(0,_t.jsx)("select",{value:(null===N||void 0===N?void 0:N.id)||"",onChange:e=>{_(A.find(t=>t.id===e.target.value)),x(!0),M(null)},children:A.map(e=>(0,_t.jsxs)("option",{value:e.id,children:[e.icon," ",e.name," (N\xedv. ",e.level,")"]},e.id))})}),"free"===S?(0,_t.jsxs)("section",{className:"dice-selection",children:[(0,_t.jsx)("h3",{children:"Escolha o dado"}),(0,_t.jsx)("div",{className:"dice-grid",children:xn.map(e=>(0,_t.jsx)(Hr,{diceType:e.id,sides:e.sides,selected:r===e.id,onClick:()=>{a(e.id),f("")}},e.id))})]}):(0,_t.jsx)("section",{className:"character-rolls",children:N?(0,_t.jsx)(_t.Fragment,{children:!T&&D?(0,_t.jsxs)("div",{className:"selection-collapsed",onClick:()=>x(!0),children:[(0,_t.jsx)("span",{className:"selection-label",children:"attribute"===D.type?"".concat(D.label):"".concat(D.skill.name)}),(0,_t.jsxs)("span",{className:"selection-bonus",children:[D.bonus>=0?"+":"",D.bonus]}),(0,_t.jsx)("span",{className:"expand-icon",children:"\u25bc"})]}):(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("div",{className:"attributes-grid",children:[{key:"forca",label:"For\xe7a",abbr:"FOR"},{key:"destreza",label:"Destreza",abbr:"DES"},{key:"constituicao",label:"Constitui\xe7\xe3o",abbr:"CON"},{key:"inteligencia",label:"Intelig\xeancia",abbr:"INT"},{key:"sabedoria",label:"Sabedoria",abbr:"SAB"},{key:"carisma",label:"Carisma",abbr:"CAR"}].map(e=>{const t=(n=N,r=e.key,n?{value:gn(n,r)}:{value:0});var n,r;return(0,_t.jsxs)("button",{className:"attribute-roll-btn",onClick:()=>((e,t)=>{if(!N)return;const n=gn(N,e);a("d20"),o(1),l(n),d("normal"),f("Teste de ".concat(t)),M({type:"attribute",key:e,label:t,bonus:n}),x(!1),w({message:"Configurado: Teste de ".concat(t," (").concat(n>=0?"+":"").concat(n,")"),type:"info"})})(e.key,e.label),children:[(0,_t.jsx)("span",{className:"attr-abbr",children:e.abbr}),(0,_t.jsxs)("span",{className:"attr-value",children:[t.value>=0?"+":"",t.value]})]},e.key)})}),(0,_t.jsxs)("div",{className:"skills-list",children:[(0,_t.jsx)("h3",{children:"Per\xedcias"}),(0,_t.jsx)("div",{className:"skills-grid",children:zt.map(e=>{const t=N.skills.includes(e.id),n=xi(N,e);return(0,_t.jsxs)("button",{className:"skill-roll-btn ".concat(t?"trained":""),onClick:()=>B(e),children:[(0,_t.jsx)("span",{className:"skill-name",children:e.name}),(0,_t.jsxs)("span",{className:"skill-bonus",children:[n>=0?"+":"",n]})]},e.id)})})]})]})}):(0,_t.jsx)("p",{className:"no-character-msg",children:"Nenhum personagem selecionado."})}),(0,_t.jsxs)("section",{className:"roll-config",children:[(0,_t.jsxs)("div",{className:"config-row",children:[(0,_t.jsx)("label",{children:"Quantidade"}),(0,_t.jsxs)("div",{className:"config-controls",children:[(0,_t.jsx)("button",{onClick:()=>o(Math.max(1,i-1)),children:"\u2212"}),(0,_t.jsx)("span",{children:i}),(0,_t.jsx)("button",{onClick:()=>o(Math.min(10,i+1)),children:"+"})]})]}),(0,_t.jsxs)("div",{className:"config-row",children:[(0,_t.jsx)("label",{children:"Modificador"}),(0,_t.jsxs)("div",{className:"config-controls",children:[(0,_t.jsx)("button",{onClick:()=>l(s-1),children:"\u2212"}),(0,_t.jsx)("span",{children:s>=0?"+".concat(s):s}),(0,_t.jsx)("button",{onClick:()=>l(s+1),children:"+"})]})]}),"d20"===r&&(0,_t.jsxs)("div",{className:"config-row",children:[(0,_t.jsx)("label",{children:"Tipo de Rolagem"}),(0,_t.jsxs)("div",{className:"roll-type-buttons",children:[(0,_t.jsx)("button",{className:"normal"===u?"active":"",onClick:()=>d("normal"),children:"Normal"}),(0,_t.jsx)("button",{className:"advantage"===u?"active":"",onClick:()=>d("advantage"),children:"\u2b06\ufe0f Vantagem"}),(0,_t.jsx)("button",{className:"disadvantage"===u?"active":"",onClick:()=>d("disadvantage"),children:"\u2b07\ufe0f Desvantagem"})]})]})]}),(0,_t.jsx)("section",{className:"roll-action",children:(0,_t.jsx)(Br,{variant:"primary",size:"large",fullWidth:!0,onClick:()=>{b(!0),setTimeout(()=>{const e=Ln(r,i,s,u,h);if(m(e),(e=>{const t=Jn();t.push(On(e)),$n(t)})(e),y(t=>[...t,e]),b(!1),P&&k){const t=c(c({},e.toJSON()),{},{playerId:(null===N||void 0===N?void 0:N.id)||null});k(t)&&console.log("[DiceRoller] Rolagem enviada ao mestre:",t.description||t.diceType)}navigator.vibrate&&navigator.vibrate(100)},500)},disabled:C,children:C?"\ud83c\udfb2 Rolando...":h?"\ud83c\udfb2 Rolar ".concat(h):"\ud83c\udfb2 Rolar ".concat(i).concat(r)})}),(0,_t.jsxs)("section",{className:"roll-history",children:[(0,_t.jsxs)("div",{className:"history-header",children:[(0,_t.jsx)("h3",{children:"Hist\xf3rico"}),g.length>0&&(0,_t.jsx)("button",{className:"clear-history",onClick:()=>{Vn(jn,[]),y([]),w({message:"Hist\xf3rico limpo",type:"success"})},children:"Limpar"})]}),0===g.length?(0,_t.jsx)("p",{className:"history-empty",children:"Nenhuma rolagem ainda"}):(0,_t.jsx)("ul",{className:"history-list",children:[...g].reverse().slice(0,10).map((e,t)=>(0,_t.jsxs)("li",{className:"history-item ".concat(e.isCriticalSuccess?"success":""," ").concat(e.isCriticalFailure?"failure":""),children:[(0,_t.jsxs)("div",{className:"history-main",children:[(0,_t.jsxs)("span",{className:"history-dice",children:[e.diceCount,e.diceType]}),(0,_t.jsxs)("span",{className:"history-total",children:["= ",e.total]})]}),(0,_t.jsxs)("div",{className:"history-sub",children:[(0,_t.jsxs)("span",{className:"history-rolls",children:["[",e.rolls.join(", "),"]"]}),0!==e.modifier&&(0,_t.jsxs)("span",{className:"history-mod",children:[e.modifier>=0?"+":"",e.modifier]}),"normal"!==e.rollType&&(0,_t.jsx)("span",{className:"history-type",children:L(e.rollType)})]}),e.description&&(0,_t.jsx)("div",{className:"history-desc",children:e.description})]},e.id||t))})]})]}),v&&(0,_t.jsx)(Dt,{message:v.message,type:v.type,onClose:()=>w(null)})]})};const Mi=function(){const{id:t}=we(),n=ve(),[r,a]=(0,e.useState)(null),[i,o]=(0,e.useState)(!1),[s,l]=(0,e.useState)(null),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)("all"),[p,m]=(0,e.useState)({name:"",description:"",quantity:1,weight:0,price:0,type:"misc",rarity:"common"});(0,e.useEffect)(()=>{const e=Qn(t);e?a(e):n("/characters")},[t,n]);const g=()=>{m({name:"",description:"",quantity:1,weight:0,price:0,type:"misc",rarity:"common"}),l(null)},y=(e,t)=>{const n=r.inventory.map(n=>{if(n.id===e){const e=Math.max(0,n.quantity+t);return c(c({},n),{},{quantity:e})}return n}).filter(e=>e.quantity>0),i=c(c({},r),{},{inventory:n});a(i),qn(i)};if(!r)return(0,_t.jsx)("div",{className:"page",children:"Carregando..."});const v=r.inventory||[],w="all"===h?v:v.filter(e=>e.type===h),C=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>e+An(null===t||void 0===t?void 0:t.weight,0)*Math.max(0,En(null===t||void 0===t?void 0:t.quantity,0)),0)}(v);return function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>e+An(null===t||void 0===t?void 0:t.price,0)*Math.max(0,En(null===t||void 0===t?void 0:t.quantity,0)),0)}(v),(0,_t.jsxs)("div",{className:"page inventory-page",children:[(0,_t.jsx)(Fr,{title:"Invent\xe1rio",showBack:!0,rightAction:(0,_t.jsx)("button",{className:"header-btn",onClick:()=>{g(),o(!0)},children:"\u2795"})}),(0,_t.jsxs)("main",{className:"page-content",children:[(0,_t.jsxs)("section",{className:"inventory-summary",children:[(0,_t.jsxs)("div",{className:"summary-item",children:[(0,_t.jsx)("span",{className:"summary-icon",children:"\u2696\ufe0f"}),(0,_t.jsxs)("span",{className:"summary-value",children:[C.toFixed(1)," kg"]})]}),(0,_t.jsxs)("div",{className:"summary-item",children:[(0,_t.jsx)("span",{className:"summary-icon",children:"\ud83d\udcb0"}),(0,_t.jsx)(Wr,{label:"T$",value:r.money,onSave:e=>{const t=c(c({},r),{},{money:e});a(t),qn(t)}})]}),(0,_t.jsxs)("div",{className:"summary-item",children:[(0,_t.jsx)("span",{className:"summary-icon",children:"\ud83d\udce6"}),(0,_t.jsxs)("span",{className:"summary-value",children:[v.length," itens"]})]})]}),(0,_t.jsxs)("section",{className:"inventory-filters",children:[(0,_t.jsx)("button",{className:"filter-btn ".concat("all"===h?"active":""),onClick:()=>f("all"),children:"Todos"}),_n.map(e=>(0,_t.jsxs)("button",{className:"filter-btn ".concat(h===e.id?"active":""),onClick:()=>f(e.id),children:[e.icon," ",e.name]},e.id))]}),0===w.length?(0,_t.jsxs)("div",{className:"empty-inventory",children:[(0,_t.jsx)("span",{className:"empty-icon",children:"\ud83c\udf92"}),(0,_t.jsxs)("p",{children:["Nenhum item ","all"!==h?"nesta categoria":""]}),(0,_t.jsx)(Br,{variant:"secondary",onClick:()=>{g(),o(!0)},children:"\u2795 Adicionar Item"})]}):(0,_t.jsx)("ul",{className:"inventory-list",children:w.map(e=>{const t=Tn.find(t=>t.id===e.rarity),n=_n.find(t=>t.id===e.type);return(0,_t.jsxs)("li",{className:"inventory-item",children:[(0,_t.jsx)("div",{className:"item-icon",children:(null===n||void 0===n?void 0:n.icon)||"\ud83d\udce6"}),(0,_t.jsxs)("div",{className:"item-info",children:[(0,_t.jsxs)("div",{className:"item-header",children:[(0,_t.jsx)("span",{className:"item-name",style:{color:null===t||void 0===t?void 0:t.color},children:e.name}),(0,_t.jsxs)("span",{className:"item-qty",children:["x",e.quantity]})]}),e.description&&(0,_t.jsx)("p",{className:"item-desc",children:e.description}),(0,_t.jsxs)("div",{className:"item-meta",children:[e.weight>0&&(0,_t.jsxs)("span",{children:["\u2696\ufe0f ",e.weight,"kg"]}),e.price>0&&(0,_t.jsxs)("span",{children:["\ud83d\udcb0 T$",e.price]})]})]}),(0,_t.jsxs)("div",{className:"item-actions",children:[(0,_t.jsx)("button",{onClick:()=>y(e.id,-1),children:"\u2212"}),(0,_t.jsx)("button",{onClick:()=>y(e.id,1),children:"+"}),(0,_t.jsx)("button",{onClick:()=>(e=>{l(e),m({name:e.name,description:e.description,quantity:e.quantity,weight:e.weight,price:e.price,type:e.type,rarity:e.rarity}),o(!0)})(e),children:"\u270f\ufe0f"}),(0,_t.jsx)("button",{className:"delete",onClick:()=>(e=>{if(window.confirm("Remover este item?")){const t=r.inventory.filter(t=>t.id!==e),n=c(c({},r),{},{inventory:t});a(n),qn(n),d({message:"Item removido",type:"success"})}})(e.id),children:"\ud83d\uddd1\ufe0f"})]})]},e.id)})})]}),(0,_t.jsx)(Vr,{isOpen:i,onClose:()=>{o(!1),g()},title:s?"Editar Item":"Adicionar Item",children:(0,_t.jsxs)("div",{className:"item-form",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Nome"}),(0,_t.jsx)("input",{type:"text",placeholder:"Nome do item",value:p.name,onChange:e=>m(c(c({},p),{},{name:e.target.value}))})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Descri\xe7\xe3o"}),(0,_t.jsx)("textarea",{placeholder:"Descri\xe7\xe3o (opcional)",value:p.description,onChange:e=>m(c(c({},p),{},{description:e.target.value}))})]}),(0,_t.jsxs)("div",{className:"form-row",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Quantidade"}),(0,_t.jsx)("input",{type:"number",min:"1",value:p.quantity,onChange:e=>m(c(c({},p),{},{quantity:parseInt(e.target.value)||1}))})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Peso (kg)"}),(0,_t.jsx)("input",{type:"number",min:"0",step:"0.1",value:p.weight,onChange:e=>m(c(c({},p),{},{weight:parseFloat(e.target.value)||0}))})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Pre\xe7o (T$)"}),(0,_t.jsx)("input",{type:"number",min:"0",value:p.price,onChange:e=>m(c(c({},p),{},{price:parseInt(e.target.value)||0}))})]})]}),(0,_t.jsxs)("div",{className:"form-row",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Tipo"}),(0,_t.jsx)("select",{value:p.type,onChange:e=>m(c(c({},p),{},{type:e.target.value})),children:_n.map(e=>(0,_t.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Raridade"}),(0,_t.jsx)("select",{value:p.rarity,onChange:e=>m(c(c({},p),{},{rarity:e.target.value})),children:Tn.map(e=>(0,_t.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)(Br,{variant:"secondary",onClick:()=>{o(!1),g()},children:"Cancelar"}),(0,_t.jsx)(Br,{variant:"primary",onClick:s?()=>{if(!p.name.trim())return void d({message:"Digite o nome do item",type:"error"});const e=r.inventory.map(e=>e.id===s.id?c(c({},e),p):e),t=c(c({},r),{},{inventory:e});a(t),qn(t),o(!1),g(),d({message:"Item atualizado!",type:"success"})}:()=>{if(!p.name.trim())return void d({message:"Digite o nome do item",type:"error"});const e=function(){return new Nn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}(p),t=[...r.inventory||[],e],n=c(c({},r),{},{inventory:t});a(n),qn(n),o(!1),g(),d({message:"Item adicionado!",type:"success"})},children:s?"Salvar":"Adicionar"})]})]})}),u&&(0,_t.jsx)(Dt,{message:u.message,type:u.type,onClose:()=>d(null)})]})};const Ri=function(){const[t,n]=(0,e.useState)(rr()),[r,a]=(0,e.useState)(null),i=(e,r)=>{const a=c(c({},t),{},{[e]:r});n(a),nr(a)};return(0,_t.jsxs)("div",{className:"page settings-page",children:[(0,_t.jsx)(Fr,{title:"Configura\xe7\xf5es"}),(0,_t.jsxs)("main",{className:"page-content",children:[(0,_t.jsxs)("section",{className:"settings-section",children:[(0,_t.jsx)("h3",{children:"Apar\xeancia"}),(0,_t.jsxs)("div",{className:"setting-item",children:[(0,_t.jsxs)("div",{className:"setting-info",children:[(0,_t.jsx)("span",{className:"setting-label",children:"\ud83c\udf19 Tema Escuro"}),(0,_t.jsx)("span",{className:"setting-desc",children:"Use o tema escuro para economizar bateria"})]}),(0,_t.jsxs)("label",{className:"toggle",children:[(0,_t.jsx)("input",{type:"checkbox",checked:"dark"===t.theme,onChange:e=>i("theme",e.target.checked?"dark":"light")}),(0,_t.jsx)("span",{className:"toggle-slider"})]})]})]}),(0,_t.jsxs)("section",{className:"settings-section",children:[(0,_t.jsx)("h3",{children:"Feedback"}),(0,_t.jsxs)("div",{className:"setting-item",children:[(0,_t.jsxs)("div",{className:"setting-info",children:[(0,_t.jsx)("span",{className:"setting-label",children:"\ud83d\udcf3 Vibra\xe7\xe3o"}),(0,_t.jsx)("span",{className:"setting-desc",children:"Vibrar ao rolar dados"})]}),(0,_t.jsxs)("label",{className:"toggle",children:[(0,_t.jsx)("input",{type:"checkbox",checked:t.vibrationEnabled,onChange:e=>i("vibrationEnabled",e.target.checked)}),(0,_t.jsx)("span",{className:"toggle-slider"})]})]}),(0,_t.jsxs)("div",{className:"setting-item",children:[(0,_t.jsxs)("div",{className:"setting-info",children:[(0,_t.jsx)("span",{className:"setting-label",children:"\ud83d\udd0a Som"}),(0,_t.jsx)("span",{className:"setting-desc",children:"Tocar sons de efeito (ex: moedas)"})]}),(0,_t.jsxs)("label",{className:"toggle",children:[(0,_t.jsx)("input",{type:"checkbox",checked:!1!==t.soundEnabled,onChange:e=>i("soundEnabled",e.target.checked)}),(0,_t.jsx)("span",{className:"toggle-slider"})]})]})]}),(0,_t.jsxs)("section",{className:"settings-section",children:[(0,_t.jsx)("h3",{children:"Depura\xe7\xe3o"}),(0,_t.jsxs)("div",{className:"setting-item",children:[(0,_t.jsxs)("div",{className:"setting-info",children:[(0,_t.jsx)("span",{className:"setting-label",children:"\ud83d\udc1e Notifica\xe7\xf5es de Debug"}),(0,_t.jsx)("span",{className:"setting-desc",children:"Mostra logs do console como alertas no app"})]}),(0,_t.jsxs)("label",{className:"toggle",children:[(0,_t.jsx)("input",{type:"checkbox",checked:Boolean(t.debugNotificationsEnabled),onChange:e=>i("debugNotificationsEnabled",e.target.checked)}),(0,_t.jsx)("span",{className:"toggle-slider"})]})]})]}),(0,_t.jsxs)("section",{className:"settings-section",children:[(0,_t.jsx)("h3",{children:"Dados"}),(0,_t.jsxs)("div",{className:"setting-action",children:[(0,_t.jsxs)("div",{className:"setting-info",children:[(0,_t.jsx)("span",{className:"setting-label",children:"\ud83d\udce4 Exportar Dados"}),(0,_t.jsx)("span",{className:"setting-desc",children:"Baixe um backup de todos os seus dados"})]}),(0,_t.jsx)(Br,{variant:"secondary",size:"small",onClick:()=>{const e={characters:Gn(Xn()),rollHistory:Zn(Jn()),settings:rr(),exportedAt:(new Date).toISOString(),version:"1.0.3"},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="tormenta20-backup-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),a({message:"Dados exportados com sucesso!",type:"success"})},children:"Exportar"})]}),(0,_t.jsxs)("div",{className:"setting-action",children:[(0,_t.jsxs)("div",{className:"setting-info",children:[(0,_t.jsx)("span",{className:"setting-label",children:"\ud83d\udce5 Importar Dados"}),(0,_t.jsx)("span",{className:"setting-desc",children:"Restaure dados de um backup"})]}),(0,_t.jsxs)("label",{className:"import-btn",children:[(0,_t.jsx)("input",{type:"file",accept:".json",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const r=new FileReader;r.onload=e=>{try{var t;const n=(e=>{try{return e.characters&&Yn(e.characters),e.rollHistory&&$n(e.rollHistory),e.settings&&nr(e.settings),{success:!0}}catch(t){return console.error("Erro ao importar dados:",t),{success:!1,error:t.message}}})(JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result));n.success?(a({message:"Dados importados com sucesso!",type:"success"}),window.location.reload()):a({message:"Erro ao importar dados",type:"error"})}catch(n){a({message:"Arquivo inv\xe1lido",type:"error"})}},r.readAsText(n)},style:{display:"none"}}),(0,_t.jsx)(Br,{variant:"secondary",size:"small",as:"span",children:"Importar"})]})]}),(0,_t.jsxs)("div",{className:"setting-action",children:[(0,_t.jsxs)("div",{className:"setting-info",children:[(0,_t.jsx)("span",{className:"setting-label",children:"\u2b07\ufe0f Adicionar como PWA"}),(0,_t.jsx)("span",{className:"setting-desc",children:"Instalar o app como Progressive Web App"})]}),(0,_t.jsx)(Br,{variant:"secondary",size:"small",onClick:()=>{if("undefined"===typeof window)return void a({message:"Instala\xe7\xe3o PWA n\xe3o dispon\xedvel",type:"error"});if(("function"===typeof window.tormentaHasInstallEvent?window.tormentaHasInstallEvent():Boolean(window.tormentaBeforeInstallPrompt))&&"function"===typeof window.tormentaPromptInstall){const e=window.tormentaPromptInstall();a(e?{message:"Prompt de instala\xe7\xe3o exibido",type:"success"}:{message:"Instala\xe7\xe3o n\xe3o dispon\xedvel no momento",type:"error"})}else a({message:'Instala\xe7\xe3o n\xe3o dispon\xedvel. Abra o menu do navegador e escolha "Adicionar \xe0 tela inicial".',type:"info"})},children:"Adicionar"})]}),(0,_t.jsxs)("div",{className:"setting-action danger",children:[(0,_t.jsxs)("div",{className:"setting-info",children:[(0,_t.jsx)("span",{className:"setting-label",children:"\ud83d\uddd1\ufe0f Limpar Dados"}),(0,_t.jsx)("span",{className:"setting-desc",children:"Apague todos os dados do aplicativo"})]}),(0,_t.jsx)(Br,{variant:"danger",size:"small",onClick:()=>{window.confirm("\u26a0\ufe0f ATEN\xc7\xc3O: Isso apagar\xe1 TODOS os seus dados (personagens, hist\xf3rico, configura\xe7\xf5es). Esta a\xe7\xe3o n\xe3o pode ser desfeita. Continuar?")&&(localStorage.clear(),a({message:"Todos os dados foram apagados",type:"success"}),setTimeout(()=>window.location.reload(),1500))},children:"Limpar"})]})]}),(0,_t.jsxs)("section",{className:"settings-section",children:[(0,_t.jsx)("h3",{children:"Sobre"}),(0,_t.jsxs)("div",{className:"about-info",children:[(0,_t.jsx)("p",{children:(0,_t.jsx)("strong",{children:"O V\xe9u Rubro"})}),(0,_t.jsxs)("p",{children:["Vers\xe3o ","1.0.3"]}),(0,_t.jsx)("p",{className:"disclaimer",children:"Este aplicativo \xe9 um projeto de f\xe3 e n\xe3o possui afilia\xe7\xe3o oficial com a Jamb\xf4 Editora ou os criadores de Tormenta 20."})]})]})]}),r&&(0,_t.jsx)(Dt,{message:r.message,type:r.type,onClose:()=>a(null)})]})},Oi=Sr,ki=Er,Pi=Ar,Li=_r;const Bi=function(){const t=ve(),{roomId:n,role:r,apiToken:a}=vr(),{status:i,players:o,errorMessage:s,isActive:l,startHostSession:u,endSession:d,updateCallbacks:h,sendChatMessage:f}=xr(),p=i===Ir?Ar:i,m=o,g=s,[y,v]=(0,e.useState)([]),[w,C]=(0,e.useState)(null),[b,S]=(0,e.useState)({soundEnabled:!0,vibrationEnabled:!0}),[E,A]=(0,e.useState)(!1),[I,N]=(0,e.useState)(null),[_,T]=(0,e.useState)({}),[x,D]=(0,e.useState)({}),[M,R]=(0,e.useState)(null),O=(0,e.useRef)(!1);(0,e.useEffect)(()=>{const e=rr();S(e);const t=Xn(),n=t.find(e=>e.isFavorite)||t[0];N(n)},[]);const k=(0,e.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if(b.vibrationEnabled&&navigator.vibrate){const t={default:50,success:[50,50,100],error:[100,50,100]};navigator.vibrate(t[e]||t.default)}},[b.vibrationEnabled]),P=(0,e.useCallback)((e,t)=>{var n;console.log("[MestreView] Jogador conectado:",e,t),k("success"),C({message:"".concat((null===t||void 0===t||null===(n=t.info)||void 0===n?void 0:n.characterName)||"Jogador"," conectado!"),type:"success"})},[k]),L=(0,e.useCallback)((e,t)=>{console.log("[MestreView] Jogador desconectado:",e),k("error"),C({message:"".concat((null===t||void 0===t?void 0:t.characterName)||"Jogador"," desconectou"),type:"warning"})},[k]),B=(0,e.useCallback)((e,t)=>{var n;switch(console.log("[MestreView] Mensagem recebida:",e,t.type),t.type){case"diceRoll":const r={id:t.id||Date.now()+Math.random(),playerId:e,diceType:t.diceType||"d20",diceCount:t.diceCount||1,modifier:t.modifier||0,rolls:t.rolls||[],total:t.total||0,description:t.description||"",rollType:t.rollType||"normal",isCriticalSuccess:t.isCriticalSuccess||!1,isCriticalFailure:t.isCriticalFailure||!1,timestamp:t.timestamp||Date.now()};v(e=>[r,...e].slice(0,50)),k();break;case"hello":console.log("[MestreView] Handshake recebido:",null===(n=t.characterInfo)||void 0===n?void 0:n.characterName);break;case"characterUpdate":console.log("[MestreView] Atualiza\xe7\xe3o de personagem recebida:",e,t.data);break;default:console.log("[MestreView] Mensagem n\xe3o tratada:",t.type)}},[k]),j=(0,e.useCallback)(e=>{console.error("[MestreView] Erro:",e),C({message:e.error||"Erro na conex\xe3o",type:"error"})},[]),F=(0,e.useCallback)((e,t)=>{console.log("[MestreView] Chat recebido de:",e,t.text),T(n=>{const r=[...n[e]||[],c(c({},t),{},{isOwn:!1})].slice(-100);return c(c({},n),{},{[e]:r})}),M!==e&&(D(t=>c(c({},t),{},{[e]:(t[e]||0)+1})),k())},[M,k]);(0,e.useEffect)(()=>{if(O.current)return;n&&"host"===r&&a&&i===Sr&&(O.current=!0,console.log("[MestreView] Resumindo sess\xe3o persistida:",n),u({resumeInfo:{roomId:n,apiToken:a},onPlayerConnected:P,onPlayerDisconnected:L,onMessage:B,onChatMessage:F,onError:j}).catch(e=>{console.error("[MestreView] Falha ao resumir sess\xe3o:",e),O.current=!1}))},[n,r,a,i,u,P,L,B,F,j]),(0,e.useEffect)(()=>{h({onPlayerConnected:P,onPlayerDisconnected:L,onMessage:B,onChatMessage:F,onError:j})},[h,P,L,B,F,j]);const z=async()=>{if(or())try{await u({onPlayerConnected:P,onPlayerDisconnected:L,onMessage:B,onError:j}),v([]),k("success"),C({message:"Sess\xe3o iniciada! Compartilhe o ID da sala com os jogadores.",type:"success"})}catch(e){console.error("[MestreView] Erro ao criar sess\xe3o:",e),C({message:e.message||"Erro ao criar sess\xe3o",type:"error"})}else C({message:"WebRTC n\xe3o suportado neste navegador",type:"error"})};return(0,_t.jsxs)("div",{className:"page campaign-session-page",children:[(0,_t.jsx)(Fr,{title:"Sess\xe3o do Mestre",showBack:!0}),(0,_t.jsxs)("main",{className:"page-content",children:[!sr()&&(0,_t.jsx)("div",{className:"compatibility-warning",children:(0,_t.jsx)("p",{children:"\u26a0\ufe0f Esta funcionalidade \xe9 otimizada para Android. Pode n\xe3o funcionar corretamente em outros dispositivos."})}),p===Oi&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("section",{className:"qr-section",children:[(0,_t.jsx)("h3",{children:"\ud83c\udff0 Iniciar Sess\xe3o de Campanha"}),(0,_t.jsx)("p",{className:"qr-subtitle",children:"Como Mestre, voc\xea poder\xe1 ver o status dos personagens e rolagens de dados dos jogadores conectados."}),(0,_t.jsx)("div",{className:"action-buttons",children:(0,_t.jsx)(Br,{variant:"primary",size:"large",fullWidth:!0,onClick:z,children:"\u2694\ufe0f Iniciar como Mestre"})})]}),(0,_t.jsx)("section",{className:"info-section",children:(0,_t.jsxs)("div",{className:"info-card",children:[(0,_t.jsx)("h4",{children:"\ud83d\udca1 Como funciona"}),(0,_t.jsx)("p",{children:"1. Inicie a sess\xe3o"}),(0,_t.jsx)("p",{children:"2. Compartilhe o ID da sala com os jogadores"}),(0,_t.jsx)("p",{children:"3. Os jogadores entram digitando o ID"}),(0,_t.jsx)("p",{children:"4. Pronto! Voc\xea ver\xe1 os status em tempo real"})]})})]}),p===ki&&(0,_t.jsxs)("div",{className:"loading-state",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:"Criando sess\xe3o..."})]}),p===Pi&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("section",{className:"room-id-section",children:[(0,_t.jsx)("h4",{children:"\ud83c\udff0 Sala Criada"}),(0,_t.jsxs)("div",{className:"room-id-display",children:[(0,_t.jsxs)("p",{children:["ID da Sala: ",(0,_t.jsx)("strong",{children:n})]}),(0,_t.jsx)(Br,{variant:"secondary",size:"small",onClick:()=>navigator.clipboard.writeText(n),children:"\ud83d\udccb Copiar ID"})]}),(0,_t.jsx)("p",{className:"room-id-info",children:"Compartilhe este ID com os jogadores para que eles possam entrar na sess\xe3o."})]}),(0,_t.jsxs)("section",{className:"players-section",children:[(0,_t.jsxs)("h4",{children:[(0,_t.jsx)("span",{children:"\ud83d\udc65 Jogadores Conectados"}),(0,_t.jsx)("span",{className:"player-count",children:m.filter(e=>e&&"connected"===e.status).length})]}),(()=>{const e=[];var t,n,r,a;I&&e.push({playerId:"host",status:"connected",isHost:!0,info:{characterName:"(Host) ".concat(I.name||"Mestre"),characterIcon:I.icon||"\ud83d\udc82\u200d\u2642\ufe0f",characterClass:I.className||"Mestre",characterLevel:I.level||"",currentHp:null===(t=I.hp)||void 0===t?void 0:t.current,maxHp:null===(n=I.hp)||void 0===n?void 0:n.max,currentMp:null===(r=I.mp)||void 0===r?void 0:r.current,maxMp:null===(a=I.mp)||void 0===a?void 0:a.max}});if(Array.isArray(m)){const t=m.filter(e=>e&&"host"!==e.playerId);e.push(...t)}return 0===e.length?(0,_t.jsxs)("div",{className:"empty-players",children:[(0,_t.jsx)("div",{className:"empty-icon",children:"\ud83d\udc65"}),(0,_t.jsx)("p",{children:"Nenhum jogador conectado"}),(0,_t.jsx)("p",{className:"text-muted",children:"Os jogadores aparecer\xe3o aqui ao entrar"})]}):(0,_t.jsx)("div",{className:"players-list",children:e.map(e=>{if(!e)return null;const t=e.playerId||Math.random().toString(),n=e.status||"pending",r=e.info||{};return(0,_t.jsxs)("div",{className:"player-card ".concat(n," ").concat(e.isHost?"host-card":""),children:[(0,_t.jsx)("div",{className:"player-avatar",children:r.characterIcon||"\ud83d\udc64"}),(0,_t.jsxs)("div",{className:"player-info",children:[(0,_t.jsx)("div",{className:"player-name",children:r.characterName||("connected"===n?"Sincronizando...":"Conectando...")}),(0,_t.jsx)("div",{className:"player-details",children:r.characterClass?(0,_t.jsxs)("span",{children:[r.characterClass," ",r.characterLevel?"Nv.".concat(r.characterLevel):""]}):(0,_t.jsx)("span",{className:"text-muted",children:"Aguardando dados..."})})]}),(0,_t.jsxs)("div",{className:"player-status",children:[(0,_t.jsx)("span",{className:"status-badge ".concat(n),children:"connected"===n?"Conectado":"pending"===n||"connecting"===n?"Iniciando":"disconnected"===n?"Offline":"Reconectando"}),void 0!==r.currentHp&&void 0!==r.maxHp&&(0,_t.jsxs)("div",{className:"player-stats",children:[(0,_t.jsxs)("span",{className:"stat-hp",children:["\u2764\ufe0f ",r.currentHp,"/",r.maxHp]}),void 0!==r.currentMp&&(0,_t.jsxs)("span",{className:"stat-mp",children:["\ud83d\udca7 ",r.currentMp,"/",r.maxMp]})]})]}),"connected"===n&&!e.isHost&&(0,_t.jsxs)("button",{className:"player-chat-btn",onClick:()=>{R(t),D(e=>c(c({},e),{},{[t]:0}))},title:"Abrir chat",children:["\ud83d\udcac",x[t]>0&&(0,_t.jsx)("span",{className:"chat-unread-badge",children:x[t]})]})]},t)})})})()]}),(()=>{if(0===y.length)return null;return(0,_t.jsxs)("section",{className:"rolls-section",children:[(0,_t.jsx)("h4",{children:"\ud83c\udfb2 Rolagens Recentes"}),(0,_t.jsx)("div",{className:"rolls-list",children:y.map(e=>{const t=(e=>{var t,n;const r=m.find(t=>t.playerId===e);return{name:(null===r||void 0===r||null===(t=r.info)||void 0===t?void 0:t.characterName)||"Jogador",icon:(null===r||void 0===r||null===(n=r.info)||void 0===n?void 0:n.characterIcon)||"\ud83c\udfb2"}})(e.playerId),n=(e=>{const t=e.rolls&&e.rolls.length>0?"[".concat(e.rolls.join(", "),"]"):"",n=0!==e.modifier?" ".concat(e.modifier>=0?"+":"").concat(e.modifier):"";return"".concat(t).concat(n)})(e),r=e.isCriticalSuccess||e.isCriticalFailure;return(0,_t.jsxs)("div",{className:"roll-item ".concat(e.isCriticalSuccess?"critical-success":""," ").concat(e.isCriticalFailure?"critical-failure":""),children:[(0,_t.jsx)("span",{className:"roll-player",children:t.icon}),(0,_t.jsxs)("div",{className:"roll-info",children:[(0,_t.jsxs)("div",{className:"roll-description",children:[(0,_t.jsx)("strong",{children:t.name}),": ",e.description||"".concat(e.diceCount).concat(e.diceType),e.isCriticalSuccess&&(0,_t.jsx)("span",{className:"critical-badge success",children:"\ud83c\udf89 Cr\xedtico!"}),e.isCriticalFailure&&(0,_t.jsx)("span",{className:"critical-badge failure",children:"\ud83d\udc80 Falha!"})]}),(0,_t.jsx)("div",{className:"roll-details",children:n})]}),(0,_t.jsx)("div",{className:"roll-result ".concat(r?"critical":""),children:e.total})]},e.id)})})]})})(),(0,_t.jsx)("div",{className:"session-actions",children:(0,_t.jsx)(Br,{variant:"danger",fullWidth:!0,onClick:()=>A(!0),children:"\ud83d\uded1 Encerrar Sala"})})]}),p===Li&&(0,_t.jsxs)("section",{className:"qr-section",children:[(0,_t.jsx)("h3",{children:"\u274c Erro"}),(0,_t.jsx)("p",{className:"qr-subtitle",children:g}),(0,_t.jsxs)("div",{className:"action-buttons",children:[(0,_t.jsx)(Br,{variant:"primary",onClick:z,children:"\ud83d\udd04 Tentar Novamente"}),(0,_t.jsx)(Br,{variant:"secondary",onClick:()=>t(-1),children:"\u2190 Voltar"})]})]})]}),w&&(0,_t.jsx)(Dt,{message:w.message,type:w.type,duration:3e3,onClose:()=>C(null)}),(0,_t.jsxs)(Vr,{isOpen:E,title:"Encerrar Sala?",onClose:()=>A(!1),children:[(0,_t.jsx)("p",{children:"Tem certeza que deseja encerrar a sala? Todos os jogadores ser\xe3o desconectados e a sala ser\xe1 fechada permanentemente."}),(0,_t.jsxs)("div",{className:"modal-footer-actions",children:[(0,_t.jsx)(Br,{variant:"secondary",onClick:()=>A(!1),children:"Cancelar"}),(0,_t.jsx)(Br,{variant:"danger",onClick:()=>{d(),A(!1),t("/")},children:"Encerrar Sess\xe3o"})]})]}),M&&(()=>{const e=m.find(e=>e.playerId===M),t=(null===e||void 0===e?void 0:e.info)||{},n=t.characterName||"Jogador",r=t.characterIcon||"\ud83d\udc64";return(0,_t.jsx)(ci,{isOpen:!0,messages:_[M]||[],recipientName:n,recipientIcon:r,onSendMessage:e=>{const t=(null===I||void 0===I?void 0:I.name)||"Mestre",n=(null===I||void 0===I?void 0:I.icon)||"\ud83d\udc51";f(e,t,n,M)&&T(r=>{const a=[...r[M]||[],{id:"chat-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),text:e,senderName:t,senderIcon:n,timestamp:Date.now(),isOwn:!0}].slice(-100);return c(c({},r),{},{[M]:a})})},onClose:()=>R(null)})})()]})},ji={SELECTING:"selecting",CONNECTING:Er,CONNECTED:Ir,DISCONNECTED:Nr,ERROR:_r};const Fi=function(){const t=ve(),{status:n,errorMessage:r,isPlayer:a,startPlayerSession:i,endSession:o,sendCharacterUpdate:s,sendChatMessage:l,updateCallbacks:u}=xr(),[d,h]=(0,e.useState)(ji.SELECTING),[f,p]=(0,e.useState)(null),[m,g]=(0,e.useState)([]),[y,v]=(0,e.useState)(null),[w,C]=(0,e.useState)(""),[b,S]=(0,e.useState)(null),[E,A]=(0,e.useState)({soundEnabled:!0,vibrationEnabled:!0}),[I,N]=(0,e.useState)([]),[_,T]=(0,e.useState)(!1),[x,D]=(0,e.useState)(0),M=n===Ir?ji.CONNECTED:n===Nr&&a?ji.DISCONNECTED:n===_r?ji.ERROR:n===Er?ji.CONNECTING:d;(0,e.useEffect)(()=>{const e=Xn();g(e);const t=e.find(e=>e.isFavorite);t?v(t):e.length>0&&v(e[0]);const n=rr();A(n)},[]);const R=(0,e.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if(E.vibrationEnabled&&navigator.vibrate){const t={default:50,success:[50,50,100],error:[100,50,100]};navigator.vibrate(t[e]||t.default)}},[E.vibrationEnabled]),O=(0,e.useCallback)(e=>{var t,n;if(!e)return null;const r=hn(e),a=fn(e);return{characterId:e.id,characterName:e.name,characterIcon:e.icon||"\ud83d\udc64",characterClass:e.className,characterRace:e.raceName,characterLevel:e.level,currentHp:null!==(t=e.currentHp)&&void 0!==t?t:r,maxHp:r,currentMp:null!==(n=e.currentMp)&&void 0!==n?n:a,maxMp:a}},[]),k=(0,e.useCallback)(()=>{console.log("[JogadorView] Conectado ao Mestre!"),R("success"),S({message:"Conectado ao Mestre!",type:"success"})},[R]),P=(0,e.useCallback)(()=>{console.log("[JogadorView] Desconectado do Mestre"),R("error"),S({message:"Conex\xe3o perdida com o Mestre",type:"warning"})},[R]),L=(0,e.useCallback)(e=>{console.log("[JogadorView] Mensagem do Mestre:",e.type)},[]),B=(0,e.useCallback)(e=>{console.error("[JogadorView] Erro:",e),p(e.error||"Erro na conex\xe3o"),S({message:e.error||"Erro na conex\xe3o",type:"error"})},[]),j=(0,e.useCallback)((e,t)=>{console.log("[JogadorView] Chat recebido do mestre:",t.text),N(e=>[...e,c(c({},t),{},{isOwn:!1})].slice(-100)),_||(D(e=>e+1),R())},[_,R]),F=(0,e.useCallback)(()=>{console.log("[JogadorView] Mestre solicitou rein\xedcio de ICE"),h(ji.SELECTING),S({message:"Mestre solicitou rein\xedcio. Pe\xe7a um novo convite ao Mestre.",type:"info"})},[]);return(0,e.useEffect)(()=>{u({onConnected:k,onDisconnected:P,onMessage:L,onChatMessage:j,onError:B,onIceRestartRequired:F})},[u,k,P,L,j,B,F]),(0,_t.jsxs)("div",{className:"page campaign-session-page",children:[(0,_t.jsx)(Fr,{title:"Entrar na Sess\xe3o",showBack:!0}),(0,_t.jsxs)("main",{className:"page-content",children:[!sr()&&(0,_t.jsx)("div",{className:"compatibility-warning",children:(0,_t.jsx)("p",{children:"\u26a0\ufe0f Esta funcionalidade \xe9 otimizada para Android. Pode n\xe3o funcionar corretamente em outros dispositivos."})}),M===ji.SELECTING&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("section",{className:"character-selection",children:[(0,_t.jsx)("h4",{children:"\ud83d\udc64 Selecione seu Personagem"}),0===m.length?(0,_t.jsxs)("div",{className:"no-characters-cta",children:[(0,_t.jsx)("p",{children:"Voc\xea precisa criar um personagem primeiro"}),(0,_t.jsx)(Br,{variant:"primary",onClick:()=>t("/characters/new"),children:"\u2795 Criar Personagem"})]}):(0,_t.jsx)("select",{className:"character-selector",value:(null===y||void 0===y?void 0:y.id)||"",onChange:e=>{const t=m.find(t=>t.id===e.target.value);v(t)},children:m.map(e=>(0,_t.jsxs)("option",{value:e.id,children:[e.icon," ",e.name," - ",e.className," Nv.",e.level]},e.id))})]}),y&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("section",{className:"room-id-section",children:[(0,_t.jsx)("h3",{children:"\ud83c\udff0 Entrar na Sess\xe3o"}),(0,_t.jsx)("p",{className:"room-id-subtitle",children:"Digite o ID da sala fornecido pelo Mestre"}),(0,_t.jsx)("div",{className:"input-group",children:(0,_t.jsx)("input",{type:"text",placeholder:"ID da sala",value:w,onChange:e=>C(e.target.value),className:"room-id-input"})}),(0,_t.jsx)("div",{className:"action-buttons",children:(0,_t.jsx)(Br,{variant:"primary",size:"large",fullWidth:!0,onClick:async()=>{if(y)if(w.trim())if(or())try{h(ji.CONNECTING),p(null);const e=O(y);await i(w.trim(),e,{onConnected:k,onDisconnected:P,onMessage:L,onError:B}),R("success"),S({message:"Conectando \xe0 sess\xe3o...",type:"success"})}catch(e){console.error("[JogadorView] Erro ao conectar:",e),h(ji.ERROR),p(e.message||"Erro ao conectar"),S({message:e.message||"Erro ao conectar",type:"error"})}else S({message:"WebRTC n\xe3o suportado neste navegador",type:"error"});else S({message:"Digite o ID da sala",type:"error"});else S({message:"Selecione um personagem primeiro",type:"error"})},children:"\u2694\ufe0f Entrar na Sess\xe3o"})})]}),(0,_t.jsx)("section",{className:"info-section",children:(0,_t.jsxs)("div",{className:"info-card",children:[(0,_t.jsx)("h4",{children:"\ud83d\udca1 Como conectar"}),(0,_t.jsx)("p",{children:"1. Pe\xe7a o ID da sala ao Mestre"}),(0,_t.jsx)("p",{children:"2. Digite o ID aqui"}),(0,_t.jsx)("p",{children:'3. Clique em "Entrar na Sess\xe3o"'}),(0,_t.jsx)("p",{children:"4. Pronto! Voc\xea est\xe1 na sess\xe3o"})]})})]})]}),M===ji.CONNECTED&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"connection-status connected",children:[(0,_t.jsx)("span",{className:"status-dot"}),(0,_t.jsx)("span",{children:"Conectado \xe0 sess\xe3o do Mestre"})]}),(()=>{var e,t;if(!y)return null;const n=hn(y),r=fn(y),a=null!==(e=y.currentHp)&&void 0!==e?e:n,i=null!==(t=y.currentMp)&&void 0!==t?t:r;return(0,_t.jsxs)("section",{className:"character-status",children:[(0,_t.jsxs)("h4",{children:[(0,_t.jsx)("span",{children:y.icon}),(0,_t.jsx)("span",{children:y.name})]}),(0,_t.jsxs)("div",{className:"status-grid",children:[(0,_t.jsxs)("div",{className:"status-item",children:[(0,_t.jsx)("div",{className:"status-label",children:"PV"}),(0,_t.jsxs)("div",{className:"status-value hp",children:[a,"/",n]})]}),(0,_t.jsxs)("div",{className:"status-item",children:[(0,_t.jsx)("div",{className:"status-label",children:"PM"}),(0,_t.jsxs)("div",{className:"status-value mp",children:[i,"/",r]})]})]})]})})(),(0,_t.jsx)("section",{className:"info-section",children:(0,_t.jsxs)("div",{className:"info-card",children:[(0,_t.jsx)("h4",{children:"\u2705 Voc\xea est\xe1 na sess\xe3o!"}),(0,_t.jsx)("p",{children:"O Mestre pode ver seu status e rolagens de dados."}),(0,_t.jsx)("p",{children:'Use o bot\xe3o "Enviar Status" para atualizar manualmente.'})]})}),(0,_t.jsxs)("div",{className:"action-buttons",children:[(0,_t.jsx)(Br,{variant:"primary",onClick:()=>t("/dice",{state:{characterId:null===y||void 0===y?void 0:y.id}}),children:"\ud83c\udfb2 Rolar Dados"}),(0,_t.jsx)(Br,{variant:"danger",onClick:()=>{o(),t(-1)},children:"\u274c Sair da Sess\xe3o"})]})]}),M===ji.DISCONNECTED&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"connection-status disconnected",children:[(0,_t.jsx)("span",{className:"status-dot"}),(0,_t.jsx)("span",{children:"Desconectado da sess\xe3o"})]}),(0,_t.jsxs)("section",{className:"qr-section",children:[(0,_t.jsx)("h3",{children:"\ud83d\udd0c Conex\xe3o Perdida"}),(0,_t.jsx)("p",{className:"qr-subtitle",children:"A conex\xe3o com o Mestre foi interrompida"}),(0,_t.jsx)("div",{className:"action-buttons",children:(0,_t.jsx)(Br,{variant:"secondary",onClick:()=>t(-1),children:"\u2190 Voltar"})})]})]}),M===ji.ERROR&&(0,_t.jsxs)("section",{className:"qr-section",children:[(0,_t.jsx)("h3",{children:"\u274c Erro"}),(0,_t.jsx)("p",{className:"qr-subtitle",children:f||r}),(0,_t.jsxs)("div",{className:"action-buttons",children:[(0,_t.jsx)(Br,{variant:"primary",onClick:()=>h(ji.SELECTING),children:"\ud83d\udd04 Tentar Novamente"}),(0,_t.jsx)(Br,{variant:"secondary",onClick:()=>t(-1),children:"\u2190 Voltar"})]})]})]}),b&&(0,_t.jsx)(Dt,{message:b.message,type:b.type,duration:3e3,onClose:()=>S(null)}),M===ji.CONNECTED&&(0,_t.jsxs)("button",{className:"chat-fab",onClick:()=>{T(!0),D(0)},title:"Abrir chat com Mestre",children:["\ud83d\udcac",x>0&&(0,_t.jsx)("span",{className:"chat-fab-badge",children:x})]}),_&&(0,_t.jsx)(ci,{isOpen:!0,messages:I,recipientName:"Mestre",recipientIcon:"\ud83d\udc51",onSendMessage:e=>{const t=(null===y||void 0===y?void 0:y.name)||"Jogador",n=(null===y||void 0===y?void 0:y.icon)||"\ud83d\udc64";l(e,t,n)&&N(r=>[...r,{id:"chat-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),text:e,senderName:t,senderIcon:n,timestamp:Date.now(),isOwn:!0}].slice(-100))},onClose:()=>T(!1)})]})},zi="tormenta20_install_prompt_dismissed",Ui="tormenta20_storage_warning_dismissed",Hi=()=>{try{if("undefined"===typeof window||!window.localStorage)return;window.localStorage.setItem(zi,"true")}catch(e){}};const Vi=function(){const[t,n]=(0,e.useState)(null),[r,a]=(0,e.useState)(!1),[i,o]=(0,e.useState)(null);return(0,e.useEffect)(()=>{console.log("Tormenta 20 App v1.0.3"),ar().then(e=>{let{supported:t,persisted:r}=e;const a=(()=>{try{return!("undefined"===typeof window||!window.localStorage)&&"true"===window.localStorage.getItem(Ui)}catch(e){return!1}})();if(t){if(!r){const e="N\xe3o foi poss\xedvel garantir storage persistente. Dados podem ser limpos pelo navegador.";console.warn(e),a||n({message:e})}}else console.info("Storage persistente n\xe3o suportado neste navegador."),a||n({message:"Storage persistente n\xe3o suportado neste navegador."})}).catch(e=>{console.error("Erro ao configurar storage persistente:",e)})},[]),(0,e.useEffect)(()=>{if("undefined"===typeof window)return;if((()=>{if("undefined"===typeof window)return!1;const e=!("function"!==typeof window.matchMedia)&&window.matchMedia("(display-mode: standalone)").matches,t="undefined"!==typeof window.navigator&&window.navigator.standalone;return Boolean(e||t)})()||(()=>{try{return!("undefined"===typeof window||!window.localStorage)&&"true"===window.localStorage.getItem(zi)}catch(e){return!1}})())return;a(!0);const e=e=>{e.preventDefault(),o(e),window.tormentaBeforeInstallPrompt=e,a(!0)},t=()=>{Hi(),a(!1),o(null),window&&window.tormentaBeforeInstallPrompt&&(window.tormentaBeforeInstallPrompt=null)};window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t);return(()=>{try{window.tormentaPromptInstall=()=>{try{const e=i||window.tormentaBeforeInstallPrompt;if(!e)return!1;e.prompt();const t=e.userChoice;return t&&"function"===typeof t.then?t.then(e=>{"accepted"===(null===e||void 0===e?void 0:e.outcome)&&(Hi(),a(!1))}).finally(()=>{o(null),window&&window.tormentaBeforeInstallPrompt&&(window.tormentaBeforeInstallPrompt=null)}):(o(null),window&&window.tormentaBeforeInstallPrompt&&(window.tormentaBeforeInstallPrompt=null)),!0}catch(e){return console.error("Erro ao exibir prompt de instala\xe7\xe3o (global):",e),!1}},window.tormentaHasInstallEvent=()=>Boolean(i||window.tormentaBeforeInstallPrompt)}catch(e){}})(),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t);try{window&&(delete window.tormentaPromptInstall,delete window.tormentaHasInstallEvent,delete window.tormentaBeforeInstallPrompt)}catch(Gi){}}},[]),(0,_t.jsx)(yr,{children:(0,_t.jsx)(Tr,{children:(0,_t.jsx)(yt,{basename:"/Tormenta20-App",children:(0,_t.jsxs)("div",{className:"app",children:[(0,_t.jsxs)(je,{children:[(0,_t.jsx)(Le,{path:"/",element:(0,_t.jsx)(ui,{})}),(0,_t.jsx)(Le,{path:"/characters",element:(0,_t.jsx)(hi,{})}),(0,_t.jsx)(Le,{path:"/characters/new",element:(0,_t.jsx)(Ai,{})}),(0,_t.jsx)(Le,{path:"/characters/:id/edit",element:(0,_t.jsx)(Ai,{mode:"edit"})}),(0,_t.jsx)(Le,{path:"/characters/:id",element:(0,_t.jsx)(Ti,{})}),(0,_t.jsx)(Le,{path:"/characters/:id/inventory",element:(0,_t.jsx)(Mi,{})}),(0,_t.jsx)(Le,{path:"/dice",element:(0,_t.jsx)(Di,{})}),(0,_t.jsx)(Le,{path:"/settings",element:(0,_t.jsx)(Ri,{})}),(0,_t.jsx)(Le,{path:"/session/host",element:(0,_t.jsx)(Bi,{})}),(0,_t.jsx)(Le,{path:"/session/join",element:(0,_t.jsx)(Fi,{})})]}),r&&(0,_t.jsx)(jr,{installAvailable:Boolean(i),onInstall:()=>{if(i)try{i.prompt();const e=i.userChoice;e&&"function"===typeof e.then?e.then(e=>{"accepted"===(null===e||void 0===e?void 0:e.outcome)&&(Hi(),a(!1))}).finally(()=>o(null)):o(null)}catch(e){console.error("Erro ao exibir prompt de instala\xe7\xe3o:",e)}},onDismiss:()=>{Hi(),a(!1)}}),(0,_t.jsx)(xt,{}),(0,_t.jsx)(Pr,{}),t&&(0,_t.jsx)(Dt,{message:t.message,type:"warning",duration:5e3,onClose:()=>{(()=>{try{if("undefined"===typeof window||!window.localStorage)return;window.localStorage.setItem(Ui,"true")}catch(e){}})(),n(null)}})]})})})})},Wi=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:i,getTTFB:o}=t;n(e),r(e),a(e),i(e),o(e)})};r.createRoot(document.getElementById("root")).render((0,_t.jsx)(e.StrictMode,{children:(0,_t.jsx)(Vi,{})})),Wi()})()})();
//# sourceMappingURL=main.937b7490.js.map